<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BPO Dashboard</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: '#CBEB33',
                        brandlight: '#D9F25A'
                    }
                }
            }
        }
    </script>

    <style>
        /* Style for Page Navigation: Hides all non-active pages by default */
        .page-section {
            display: none;
        }

        .page-section.active {
            display: block;
        }

        /* Styles for Attendance Tab component */
        .tab {
            color: black;
            transition: background-color 0.2s, color 0.2s;
        }

        .tab:hover {
            background-color: #f0f9c0;
            /* brandlight hover */
            color: black;
        }

        .tab.active {
            border-bottom: 2px solid #cce416;
            /* brand color */
            background-color: #f0f9c0;
            color: black;
        }
    </style>
</head>

<body class="bg-gray-50 text-slate-800">
    <div class="flex min-h-screen">

        <aside class="w-64 bg-white shadow-xl flex flex-col">
            <div class="p-6 flex flex-col items-center gap-2">
                <img src="dmi_logo.png" alt="Digital Minds BPO Logo" class="w-20 h-20 rounded-full object-cover mb-2">
                <h1 class="text-xl font-bold text-slate-900 text-center">Digital Minds BPO</h1>
            </div>

            <nav class="flex-1 px-4 space-y-2">
                <a href="#" data-page="dashboard"
                    class="nav-link flex items-center px-4 py-3 rounded-lg hover:bg-brandlight transition">
                    <i class="fas fa-tachometer-alt mr-3 text-slate-700"></i> Dashboard
                </a>

                <a href="#" data-page="campaigns"
                    class="nav-link flex items-center px-4 py-3 rounded-lg hover:bg-brandlight transition">
                    <i class="fas fa-bullhorn mr-3 text-slate-700"></i> Campaigns
                </a>

                <a href="#" data-page="headcount"
                    class="nav-link flex items-center px-4 py-3 rounded-lg hover:bg-brandlight transition">
                    <i class="fas fa-users mr-3 text-slate-700"></i> Headcount
                </a>

                <a href="#" data-page="attendance-calendar"
                    class="nav-link flex items-center px-4 py-3 rounded-lg hover:bg-brandlight transition">
                    <i class="fas fa-calendar-check mr-3 text-slate-700"></i> Attendance Calendar
                </a>

                <a href="#" data-page="billing"
                    class="nav-link flex items-center px-4 py-3 rounded-lg hover:bg-brandlight transition">
                    <i class="fas fa-file-invoice-dollar mr-3 text-slate-700"></i> Billing
                </a>

                <a href="#" data-page="scorecards"
                    class="nav-link flex items-center px-4 py-3 rounded-lg hover:bg-brandlight transition">
                    <i class="fas fa-clipboard-list mr-3 text-slate-700"></i> Scorecards
                </a>

                <a href="#" data-page="coaching"
                    class="nav-link flex items-center px-4 py-3 rounded-lg hover:bg-brandlight transition">
                    <i class="fas fa-clipboard-list mr-3 text-slate-700"></i> Coaching Logs
                </a>

                <a href="#" data-page="reports"
                    class="nav-link flex items-center px-4 py-3 rounded-lg hover:bg-brandlight transition">
                    <i class="fas fa-chart-pie mr-3 text-slate-700"></i> Reports
                </a>

                <p class="text-xs text-gray-400 mt-6 uppercase px-4">Macro</p>
                <a href="#" data-page="macro"
                    class="nav-link flex items-center px-4 py-3 rounded-lg hover:bg-brandlight transition">
                    <i class="fas fa-bolt mr-3 text-slate-700"></i> Macros
                </a>
            </nav>

            <div class="p-4">
                <button
                    class="w-full py-2 bg-brand hover:bg-brandlight rounded-lg font-semibold text-slate-900 transition">Logout</button>
            </div>
        </aside>

        <main class="flex-1 ml-0 md:ml-0 p-6">

            <section id="dashboard" class="page-section active">
                <h1 class="text-3xl font-bold mb-4">Dashboard</h1>

                <div class="bg-white rounded-xl shadow-md p-6 mb-6">
                    <h2 class="text-xl font-semibold mb-2">Welcome Back, Admin</h2>
                    <p class="text-gray-600">Here’s an overview of your CRM campaigns and agent performance today.</p>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                    <div class="bg-white rounded-xl shadow-md p-4">
                        <h3 class="font-bold text-gray-700 mb-1">Tickets Handled</h3>
                        <p class="text-3xl font-bold mt-2 text-[#cce416]">1,250</p>
                        <p class="text-sm text-green-600 mt-1">↑ 5% from last month</p>
                    </div>

                    <div class="bg-white rounded-xl shadow-md p-4">
                        <h3 class="font-bold text-gray-700 mb-1">FCR %</h3>
                        <p class="text-3xl font-bold mt-2 text-[#d8ec42]">87%</p>
                        <p class="text-sm text-red-600 mt-1">↓ 2% from last month</p>
                    </div>

                    <div class="bg-white rounded-xl shadow-md p-4">
                        <h3 class="font-bold text-gray-700 mb-1">Avg Response Time</h3>
                        <p class="text-3xl font-bold mt-2 text-[#e2f171]">2h 15m</p>
                        <p class="text-sm text-green-600 mt-1">↓ 10% from last month</p>
                    </div>

                    <div class="bg-white rounded-xl shadow-md p-4">
                        <h3 class="font-bold text-gray-700 mb-1">CSAT %</h3>
                        <p class="text-3xl font-bold mt-2 text-[#cce416]">92%</p>
                        <p class="text-sm text-green-600 mt-1">↑ 3% from last month</p>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-md p-6 mb-6 overflow-x-auto">
                    <h2 class="text-xl font-semibold mb-4">Campaign Summary</h2>
                    <table class="min-w-full text-sm border-collapse">
                        <thead class="bg-gray-100 text-gray-700">
                            <tr>
                                <th class="text-left px-4 py-3">Campaign</th>
                                <th class="text-left px-4 py-3">Line of Business</th>
                                <th class="text-left px-4 py-3">Total Agents</th>
                                <th class="text-left px-4 py-3">Tickets Handled</th>
                                <th class="text-left px-4 py-3">FCR %</th>
                                <th class="text-left px-4 py-3">CSAT %</th>
                                <th class="text-left px-4 py-3">Avg Response Time</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <tr>
                                <td class="px-4 py-2 font-semibold">Campaign A</td>
                                <td class="px-4 py-2">Retail</td>
                                <td class="px-4 py-2">40</td>
                                <td class="px-4 py-2">450</td>
                                <td class="px-4 py-2">88%</td>
                                <td class="px-4 py-2">91%</td>
                                <td class="px-4 py-2">2h 10m</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2 font-semibold">Campaign B</td>
                                <td class="px-4 py-2">Banking</td>
                                <td class="px-4 py-2">35</td>
                                <td class="px-4 py-2">380</td>
                                <td class="px-4 py-2">85%</td>
                                <td class="px-4 py-2">93%</td>
                                <td class="px-4 py-2">2h 30m</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2 font-semibold">Campaign C</td>
                                <td class="px-4 py-2">Telecom</td>
                                <td class="px-4 py-2">45</td>
                                <td class="px-4 py-2">420</td>
                                <td class="px-4 py-2">90%</td>
                                <td class="px-4 py-2">89%</td>
                                <td class="px-4 py-2">1h 50m</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="bg-white rounded-xl shadow-md p-6 mb-6">
                    <h2 class="text-xl font-semibold mb-4">Campaign Trends</h2>
                    <div class="h-64 bg-gray-100 flex items-center justify-center text-gray-400">
                        Chart placeholder (Tickets / FCR / CSAT)
                    </div>
                </div>
            </section>

            <section id="campaigns" class="page-section">
                <h1 class="text-3xl font-bold mb-4">Campaigns</h1>

                <div class="relative">
                    <div class="h-56 relative rounded-2xl overflow-hidden flex items-center">
                        <div class="absolute inset-0">
                            <div class="w-full h-full bg-brand"></div>
                            <svg class="absolute inset-0 w-full h-full opacity-10" viewBox="0 0 1440 320"
                                xmlns="http://www.w3.org/2000/svg">
                                <defs>
                                    <pattern id="dots" x="0" y="0" width="40" height="40" patternUnits="userSpaceOnUse">
                                        <circle cx="20" cy="20" r="6" fill="#A6B91A" />
                                    </pattern>
                                </defs>
                                <rect width="1440" height="320" fill="url(#dots)" />
                            </svg>
                            <svg class="absolute bottom-0 left-0 w-full h-28" viewBox="0 0 1440 320"
                                xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                <path fill="#CBE31B" fill-opacity="0.5"
                                    d="M0,224L48,202.7C96,181,192,139,288,154.7C384,171,480,245,576,240C672,235,768,149,864,117.3C960,85,1056,107,1152,117.3C1248,128,1344,128,1392,128L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z">
                                </path>
                            </svg>
                        </div>
                        <div class="absolute top-4 right-6 flex items-center gap-4 z-10">
                            <input type="text" placeholder="Search..."
                                class="px-4 py-2 rounded-full outline-none text-gray-700 shadow-md bg-white/90 w-56" />
                        </div>
                    </div>

                    <div class="relative w-[95%] max-w-6xl mx-auto -mt-16 z-20">
                        <div
                            class="bg-white/70 backdrop-blur-safe rounded-4xl p-6 flex flex-col md:flex-row items-center gap-6 border border-white/20 shadow-lg">
                            <img src="sb.png" alt="Profile"
                                class="w-24 h-24 rounded-full border-4 border-white shadow-lg object-cover">
                            <div class="flex-1 text-center md:text-left">
                                <h2 class="text-2xl font-semibold text-slate-900">Digital Minds BPO</h2>
                                <p class="text-sm text-slate-600">admin@dmibpo.com</p>
                            </div>
                            <div class="flex flex-wrap justify-center md:justify-end gap-3">
                                <button
                                    class="px-6 py-2 rounded-full bg-white/60 hover:bg-white text-slate-900 font-medium transition">OVERVIEW</button>
                                <button
                                    class="px-6 py-2 rounded-full bg-white/60 hover:bg-white text-slate-900 font-medium transition">TEAMS</button>
                                <button
                                    class="px-6 py-2 rounded-full bg-white/60 hover:bg-white text-slate-900 font-medium transition">PROJECTS</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="px-4 md:px-8 mt-10 grid grid-cols-1 md:grid-cols-3 gap-6">
                    <section class="bg-white rounded-xl shadow p-6">
                        <h3 class="font-semibold mb-4">Platform Settings</h3>
                        <p class="text-xs text-gray-400 mb-2">ACCOUNT</p>
                        <div class="space-y-2">
                            <label class="flex items-center justify-between">
                                <span>Email me when someone follows me</span>
                                <input type="checkbox" class="h-5 w-5" />
                            </label>
                            <label class="flex items-center justify-between">
                                <span>Email me when someone answers on my post</span>
                                <input type="checkbox" class="h-5 w-5" />
                            </label>
                            <label class="flex items-center justify-between">
                                <span>Email me when someone mentions me</span>
                                <input type="checkbox" class="h-5 w-5" />
                            </label>
                        </div>
                    </section>

                    <section class="bg-white rounded-xl shadow p-6">
                        <h3 class="font-semibold mb-4">Profile Information</h3>
                        <p class="text-sm mb-4">Hi, I’m Esthera Jackson. Decisions: If you can’t decide, the answer is
                            no...
                        </p>
                        <div class="text-sm space-y-2">
                            <p><strong>Full Name:</strong> Esthera Jackson</p>
                            <p><strong>Mobile:</strong> (44) 123 1234 123</p>
                            <p><strong>Email:</strong> esthera@simmmpple.com</p>
                            <p><strong>Location:</strong> United States</p>
                            <p><strong>Social:</strong>
                                <span class="inline-flex gap-3 ml-2 text-slate-700">
                                    <i class="fab fa-facebook-f"></i>
                                    <i class="fab fa-instagram"></i>
                                    <i class="fab fa-twitter"></i>
                                </span>
                            </p>
                        </div>
                    </section>

                    <section class="bg-white rounded-xl shadow p-6">
                        <h3 class="font-semibold mb-4">Conversations</h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <img src="https://via.placeholder.com/40" class="rounded-full" />
                                    <div>
                                        <p class="font-medium">Sophie B.</p>
                                        <p class="text-sm text-gray-500">Hi! I need more information...</p>
                                    </div>
                                </div>
                                <a href="#" class="text-slate-700 text-sm font-semibold">REPLY</a>
                            </div>
                        </div>
                    </section>
                </div>
            </section>

            <section id="attendance-calendar" class="page-section">
                <div class="bg-white rounded-xl shadow-lg p-6">

                    <div class="mb-6 border-b border-gray-300">
                        <nav class="flex space-x-4">
                            <button id="weekly-tab" onclick="switchAttendanceTab('weekly')"
                                class="tab py-3 px-5 text-sm font-semibold rounded-t-lg active focus:outline-none">Weekly
                                View</button>
                            <button id="monthly-tab" onclick="switchAttendanceTab('monthly')"
                                class="tab py-3 px-5 text-sm font-semibold rounded-t-lg focus:outline-none">Monthly
                                View</button>
                            <button id="custom-tab" onclick="switchAttendanceTab('custom')"
                                class="tab py-3 px-5 text-sm font-semibold rounded-t-lg focus:outline-none">Custom</button>
                        </nav>
                    </div>

                    <div>
                        <div id="weekly-content" class="tab-content">
                            <div class="text-center text-gray-400 py-10">
                                <p>Weekly attendance data goes here.</p>
                            </div>
                        </div>

                        <div id="monthly-content" class="tab-content hidden">
                            <div class="text-center text-gray-400 py-10">
                                <p>Monthly attendance data goes here.</p>
                            </div>
                        </div>

                        <div id="custom-content" class="tab-content hidden">
                            <div class="text-center text-gray-400 py-10">
                                <p>Loading custom calendar...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="billing" class="page-section px-6 py-4">
                <h1 class="text-3xl font-bold mb-4">Billing</h1>
                <p class="text-gray-600 mb-6">Overview of billing metrics, trends, and campaign comparison.</p>

                <div class="flex space-x-3 mb-6">
                    <button onclick="openDownloadModal()"
                        class="bg-[#cce416] hover:bg-[#d8ec42] text-black px-4 py-2 rounded shadow font-medium flex items-center space-x-2">
                        <i class="fas fa-file-excel"></i><span>Download Excel</span>
                    </button>
                    <button onclick="openDownloadModal()"
                        class="bg-[#cce416] hover:bg-[#d8ec42] text-black px-4 py-2 rounded shadow font-medium flex items-center space-x-2">
                        <i class="fas fa-file-pdf"></i><span>Download PDF</span>
                    </button>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                    <div class="bg-white rounded-xl shadow-md p-4">
                        <h3 class="font-bold text-gray-700 mb-1">Active Agents</h3>
                        <p class="text-3xl font-bold mt-2 text-[#cce416]">120</p>
                        <p class="text-sm text-gray-500 mt-1">
                            <span class="text-green-600 font-semibold">↑ 3%</span> from last month
                        </p>
                    </div>

                    <div class="bg-white rounded-xl shadow-md p-4">
                        <h3 class="font-bold text-gray-700 mb-1">Total Headcount</h3>
                        <p class="text-3xl font-bold mt-2 text-[#cce416]">145</p>
                        <p class="text-sm text-gray-500 mt-1">
                            <span class="text-red-600 font-semibold">↓ 2%</span> from last month
                        </p>
                    </div>

                    <div class="bg-white rounded-xl shadow-md p-4">
                        <h3 class="font-bold text-gray-700 mb-1">Lost Hours</h3>
                        <p class="text-3xl font-bold mt-2 text-[#cce416]">125</p>
                        <p class="text-sm text-gray-500 mt-1">
                            <span class="text-red-600 font-semibold">↑ 5%</span> from last month
                        </p>
                    </div>

                    <div class="bg-white rounded-xl shadow-md p-4">
                        <h3 class="font-bold text-gray-700 mb-1">Covered Absences %</h3>
                        <p class="text-3xl font-bold mt-2 text-[#cce416]">95%</p>
                        <p class="text-sm text-gray-500 mt-1">
                            <span class="text-green-600 font-semibold">↑ 5%</span> from last month
                        </p>
                    </div>

                    <div class="bg-white rounded-xl shadow-md p-4">
                        <h3 class="font-bold text-gray-700 mb-1">Billed Hours</h3>
                        <p class="text-3xl font-bold mt-2 text-[#cce416]">1,020 hrs</p>
                        <p class="text-sm text-gray-500 mt-1">
                            <span class="text-green-600 font-semibold">↑ 4%</span> from last month
                        </p>
                    </div>

                    <div class="bg-white rounded-xl shadow-md p-4">
                        <h3 class="font-bold text-gray-700 mb-1">Overhead (Supervisors)</h3>
                        <p class="text-3xl font-bold mt-2 text-[#cce416]">25 hrs</p>
                        <p class="text-sm text-gray-500 mt-1">
                            <span class="text-yellow-600 font-semibold">↔ 1%</span> from last month
                        </p>
                    </div>

                    <div class="bg-white rounded-xl shadow-md p-4">
                        <h3 class="font-bold text-gray-700 mb-1">Agent Coverage %</h3>
                        <p class="text-3xl font-bold mt-2 text-[#e2f171]">87.5%</p>
                        <p class="text-sm text-gray-500 mt-1">
                            <span class="text-green-600 font-semibold">↑ 2%</span> from last month
                        </p>
                    </div>

                    <div class="bg-white rounded-xl shadow-md p-4">
                        <h3 class="font-bold text-gray-700 mb-1">Agent Coverage Hours</h3>
                        <p class="text-3xl font-bold mt-2 text-[#cce416]">1,050 hrs</p>
                        <p class="text-sm text-gray-500 mt-1">
                            <span class="text-red-600 font-semibold">↓ 1%</span> from last month
                        </p>
                    </div>
                </div>

                <div class="bg-white shadow rounded-xl p-4 mb-6">
                    <h3 class="text-lg font-semibold mb-2">Lost Hours & Headcount Trend</h3>
                    <div class="h-64 flex items-center justify-center text-gray-400 border-2 border-dashed rounded-lg">
                        <span>Chart will go here</span>
                    </div>
                </div>

                <div class="bg-white shadow rounded-xl p-4 mb-6">
                    <h3 class="text-lg font-semibold mb-2">Campaign Comparison</h3>
                    <div class="h-64 flex items-center justify-center text-gray-400 border-2 border-dashed rounded-lg">
                        <span>Chart will go here</span>
                    </div>
                </div>

                <section id="metrics-description" class="mb-10">
                    <h2 class="text-2xl font-bold mb-4">KPI Metrics & Calculations</h2>

                    <div class="space-y-4">
                        <details class="bg-white rounded-xl shadow p-4">
                            <summary class="cursor-pointer font-semibold text-gray-700">Active Agents</summary>
                            <div class="mt-2 text-gray-600 text-sm">
                                <p><strong>Definition:</strong> Total number of agents actively handling tasks, logged
                                    in, and productive during the measurement period.</p>
                                <p><strong>Calculation:</strong>
                                    <code>Count of agents currently logged in and marked as Productive</code>
                                </p>
                                <p><strong>Example:</strong> If 120 agents are currently logged in, the count is
                                    **120**.</p>
                            </div>
                        </details>

                        <details class="bg-white rounded-xl shadow p-4">
                            <summary class="cursor-pointer font-semibold text-gray-700">Total Headcount</summary>
                            <div class="mt-2 text-gray-600 text-sm">
                                <p><strong>Definition:</strong> Total number of employees (both billable agents and
                                    non-billable overhead like supervisors/managers) in the team or campaign.</p>
                                <p><strong>Calculation:</strong> <code>Total Active Agents + Total Overhead Staff</code>
                                </p>
                                <p><strong>Example:</strong> 120 active agents + 25 overhead staff = **145 total
                                    headcount**.</p>
                            </div>
                        </details>

                        <details class="bg-white rounded-xl shadow p-4">
                            <summary class="cursor-pointer font-semibold text-gray-700">Lost Hours</summary>
                            <div class="mt-2 text-gray-600 text-sm">
                                <p><strong>Definition:</strong> The total number of scheduled hours that were lost due
                                    to unscheduled absenteeism, tardiness, or other non-productive activities.</p>
                                <p><strong>Calculation:</strong> <code>Total Scheduled Hours - Total Hours Worked</code>
                                </p>
                                <p><strong>Example:</strong> 1,145 scheduled hours - 1,020 hours worked = **125 lost
                                    hours**.</p>
                            </div>
                        </details>

                        <details class="bg-white rounded-xl shadow p-4">
                            <summary class="cursor-pointer font-semibold text-gray-700">Covered Absences %</summary>
                            <div class="mt-2 text-gray-600 text-sm">
                                <p><strong>Definition:</strong> The percentage of all agent absences (Lost Hours) that
                                    were successfully covered by backup agents or scheduling adjustments.</p>
                                <p><strong>Calculation:</strong>
                                    <code>(Total Absences Covered ÷ Total Absences) × 100</code>
                                </p>
                                <p><strong>Example:</strong> 118 covered hours ÷ 125 lost hours × 100 = **94.4%**
                                    (~95%).</p>
                            </div>
                        </details>

                        <details class="bg-white rounded-xl shadow p-4">
                            <summary class="cursor-pointer font-semibold text-gray-700">Billed Hours</summary>
                            <div class="mt-2 text-gray-600 text-sm">
                                <p><strong>Definition:</strong> The total cumulative hours worked by all **billable
                                    agents** that are submitted to the client for invoicing.</p>
                                <p><strong>Calculation:</strong>
                                    <code>Sum of all agents’ approved billable hours for the period</code>
                                </p>
                                <p><strong>Example:</strong> Total sum of agent timesheets is **1,020 hrs**.</p>
                            </div>
                        </details>

                        <details class="bg-white rounded-xl shadow p-4">
                            <summary class="cursor-pointer font-semibold text-gray-700">Overhead (Supervisors)</summary>
                            <div class="mt-2 text-gray-600 text-sm">
                                <p><strong>Definition:</strong> Total hours worked by non-billable staff, such as
                                    supervisors, managers, trainers, etc., that contribute to operational cost.</p>
                                <p><strong>Calculation:</strong>
                                    <code>Sum of supervisors’ logged hours for the period</code>
                                </p>
                                <p><strong>Example:</strong> 5 supervisors × 5 hours/day × 5 days = **125 hours** (~25
                                    hrs in the card if displaying average).</p>
                            </div>
                        </details>

                        <details class="bg-white rounded-xl shadow p-4">
                            <summary class="cursor-pointer font-semibold text-gray-700">Agent Coverage %</summary>
                            <div class="mt-2 text-gray-600 text-sm">
                                <p><strong>Definition:</strong> The percentage of scheduled agents who were available,
                                    present, and actively productive during their shifts.</p>
                                <p><strong>Calculation:</strong>
                                    <code>(Active Agents ÷ Total Scheduled Agents) × 100</code>
                                </p>
                                <p><strong>Example:</strong> 120 active agents ÷ 145 scheduled agents × 100 = **82.75%**
                                    (~87.5% if based on hours).</p>
                            </div>
                        </details>

                        <details class="bg-white rounded-xl shadow p-4">
                            <summary class="cursor-pointer font-semibold text-gray-700">Agent Coverage Hours</summary>
                            <div class="mt-2 text-gray-600 text-sm">
                                <p><strong>Definition:</strong> The total number of hours covered by productive agents,
                                    including billable time and scheduled non-billable time (like breaks/training)
                                    included in coverage.</p>
                                <p><strong>Calculation:</strong> <code>Total Scheduled Hours - Lost Hours</code></p>
                                <p><strong>Example:</strong> 1,175 scheduled hours - 125 lost hours = **1,050 hrs**.</p>
                            </div>
                        </details>
                    </div>
                </section>
            </section>

            <section id="headcount" class="page-section">
                <div class="flex items-center justify-between mb-4">
                    <h1 class="text-3xl font-bold">Headcount</h1>
                    <button onclick="openCrudModal('NEW')"
                        class="px-4 py-2 bg-brand text-black rounded hover:bg-brandlight"> + Add Employee </button>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-bold text-slate-900">Agent Headcount</h2>
                        <div class="flex space-x-2">
                            <input type="text" id="searchHeadcount" oninput="filterHeadcount()"
                                placeholder="Search agents..."
                                class="px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-brand">
                        </div>
                    </div>

                    <div class="overflow-x-auto">
                        <table class="min-w-full text-sm text-left border-collapse">
                            <thead class="bg-gray-100 text-gray-700 uppercase text-xs">
                                <tr>
                                    <th class="px-4 py-3">Emp No</th>
                                    <th class="px-4 py-3">Name</th>
                                    <th class="px-4 py-3">Phone</th>
                                    <th class="px-4 py-3">Emergency Contact</th>
                                    <th class="px-4 py-3">Department</th>
                                    <th class="px-4 py-3">DOJ</th>
                                    <th class="px-4 py-3">LWD</th>
                                    <th class="px-4 py-3">Status</th>
                                    <th class="px-4 py-3 text-center">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="headcountTableBody" class="divide-y divide-gray-200">
                                <tr>
                                    <td class="px-4 py-2">1001</td>
                                    <td class="px-4 py-2">John Doe</td>
                                    <td class="px-4 py-2">555-1234</td>
                                    <td class="px-4 py-2">555-5678</td>
                                    <td class="px-4 py-2">Retail</td>
                                    <td class="px-4 py-2">2023-01-15</td>
                                    <td class="px-4 py-2">N/A</td>
                                    <td class="px-4 py-2">Active</td>
                                    <td class="px-4 py-2 text-center">
                                        <button onclick="openCrudModal('EDIT', '1001')" class="text-blue-600 hover:text-blue-800 text-sm">Edit</button>
                                        <button onclick="deleteHeadcount('1001')" class="text-red-600 hover:text-red-800 text-sm ml-2">Delete</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-2">1002</td>
                                    <td class="px-4 py-2">Jane Smith</td>
                                    <td class="px-4 py-2">555-9876</td>
                                    <td class="px-4 py-2">555-5432</td>
                                    <td class="px-4 py-2">Banking</td>
                                    <td class="px-4 py-2">2022-11-20</td>
                                    <td class="px-4 py-2">N/A</td>
                                    <td class="px-4 py-2">Active</td>
                                    <td class="px-4 py-2 text-center">
                                        <button onclick="openCrudModal('EDIT', '1002')" class="text-blue-600 hover:text-blue-800 text-sm">Edit</button>
                                        <button onclick="deleteHeadcount('1002')" class="text-red-600 hover:text-red-800 text-sm ml-2">Delete</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <section id="scorecards" class="page-section">
                <h1 class="text-3xl font-bold mb-4">Scorecards</h1>
                <div class="bg-white rounded-xl shadow-md p-6 h-96 flex items-center justify-center text-gray-400">
                    Scorecard visualization and data will be added here.
                </div>
            </section>

            <section id="reports" class="page-section">
                <h1 class="text-3xl font-bold mb-4">Reports</h1>
                <div class="bg-white rounded-xl shadow-md p-6 h-96 flex items-center justify-center text-gray-400">
                    Reports dashboard and generation forms will be added here.
                </div>
                <button onclick="openRequestReportModal()"
                    class="mt-4 px-4 py-2 bg-brand text-black rounded hover:bg-brandlight">Request Custom
                    Report</button>
            </section>






            <section id="coaching" class="page-section max-w-7xl mx-auto p-6 space-y-6">
                <div class="flex items-center justify-between mb-6">
                    <h1 class="text-3xl font-bold text-slate-900">Coaching Sessions</h1>
                    <button onclick="openCoachingModal(false)"
                        class="px-4 py-2 bg-brand text-black rounded hover:bg-brandlight transition font-semibold shadow">
                        + New Session
                    </button>
                </div>

                <div class="bg-white dark:bg-blackpearl rounded-xl shadow p-6">
                    <h2 class="text-xl font-semibold mb-4 dark:text-pear">Past Coaching Sessions</h2>

                    <div class="overflow-x-auto">
                        <div id="coachingTableStatus" class="p-4 text-center text-gray-500 hidden"></div>

                        <table class="min-w-full text-sm">
                            <thead class="bg-gray-200 text-gray-700">
                                <tr>
                                    <th class="text-left px-4 py-2">Date</th>
                                    <th class="text-left px-4 py-2">Coach</th>
                                    <th class="text-left px-4 py-2">Employee</th>
                                    <th class="text-left px-4 py-2">Focus Area</th>
                                    <th class="text-left px-4 py-2">Acknowledge</th>
                                    <th class="text-left px-4 py-2">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="sessionsTable" class="divide-y divide-gray-200">
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            
            <section id="macro" class="page-section">
                <h1 class="text-3xl font-bold mb-4">Macros/Automation</h1>
                <div class="bg-white rounded-xl shadow-md p-6 h-96 flex items-center justify-center text-gray-400">
                    Macro creation and management interface.
                </div>
            </section>

        </main>
    </div>

    <div id="modalBg"
        class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-3xl p-8 relative max-h-[90vh] overflow-y-auto">
            <button onclick="closeCoachingModal()"
                class="absolute top-4 right-4 text-gray-400 hover:text-gray-600">
                <i class="fas fa-times text-xl"></i>
            </button>
            <h3 id="modalTitle" class="text-2xl font-bold mb-6 text-slate-900">Record New Coaching Session</h3>

            <form id="coachingForm" data-edit-id="">
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div>
                        <label for="date" class="block text-sm font-medium text-gray-700">Date</label>
                        <input type="date" id="date" name="date" required
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-brand focus:ring-brand p-2">
                    </div>
                    <div>
                        <label for="coach" class="block text-sm font-medium text-gray-700">Coach</label>
                        <input type="text" id="coach" name="coach" required
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-brand focus:ring-brand p-2">
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div>
                        <label for="employee" class="block text-sm font-medium text-gray-700">Employee Name</label>
                        <input type="text" id="employee" name="employee" required
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-brand focus:ring-brand p-2">
                    </div>
                    <div>
                        <label for="employeenumber" class="block text-sm font-medium text-gray-700">Employee
                            Number</label>
                        <input type="text" id="employeenumber" name="employeenumber" required
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-brand focus:ring-brand p-2">
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div>
                        <label for="agentacknowledged" class="block text-sm font-medium text-gray-700">Agent
                            Acknowledge</label>
                        <select id="agentacknowledged" name="agentacknowledged" required
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-brand focus:ring-brand p-2">
                            <option value="Pending">Pending</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </div>
                </div>

                <div class="space-y-4 mb-6">
                    <div>
                        <label for="performance" class="block text-sm font-medium text-gray-700">Performance Notes</label>
                        <textarea id="performance" name="performance" rows="2" required
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-brand focus:ring-brand p-2"></textarea>
                    </div>
                    <div>
                        <label for="coachingprovided" class="block text-sm font-medium text-gray-700">Coaching
                            Provided</label>
                        <textarea id="coachingprovided" name="coachingprovided" rows="2" required
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-brand focus:ring-brand p-2"></textarea>
                    </div>
                    <div>
                        <label for="actionplan" class="block text-sm font-medium text-gray-700">Action Plan</label>
                        <textarea id="actionplan" name="actionplan" rows="2" required
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-brand focus:ring-brand p-2"></textarea>
                    </div>
                </div>

                <div class="flex justify-end mt-4 space-x-2">
                    <button type="button" onclick="closeCoachingModal()"
                        class="px-6 py-2 rounded bg-gray-200 hover:bg-gray-300 font-medium">Cancel</button>
                    <button type="submit" id="coachingSubmitButton"
                        class="px-6 py-2 rounded bg-brand hover:bg-brandlight text-black font-semibold transition">Save
                        Session</button>
                </div>
            </form>
        </div>
    </div>

    <div id="crudModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-xl shadow-lg w-full max-w-lg p-6 relative">
            <button onclick="closeCrudModal()" class="absolute top-3 right-3 text-gray-400 hover:text-gray-600">
                <i class="fas fa-times"></i>
            </button>
            <h3 id="crudModalTitle" class="text-xl font-bold mb-4">Modal Title</h3>
            <div id="crudModalBody" class="space-y-4">
                <p>Form content for adding/editing an employee goes here.</p>
            </div>
            <div class="flex justify-end mt-6 space-x-2">
                <button onclick="closeCrudModal()"
                    class="px-4 py-2 rounded bg-gray-200 hover:bg-gray-300">Cancel</button>
                <button id="crudModalAction"
                    class="px-4 py-2 rounded bg-brand hover:bg-brandlight text-black font-semibold">Confirm</button>
            </div>
        </div>
    </div>

    <div id="downloadModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-xl shadow-lg w-full max-w-sm p-6 relative">
            <button onclick="closeDownloadModal()" class="absolute top-3 right-3 text-gray-400 hover:text-gray-600">
                <i class="fas fa-times"></i>
            </button>
            <h3 class="text-xl font-bold mb-4">Download Report</h3>
            <div class="space-y-4">
                <label class="block">
                    <span class="text-gray-700">Select Date Range:</span>
                    <input type="date" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" />
                </label>
                <label class="block">
                    <span class="text-gray-700">Select Format:</span>
                    <select class="mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                        <option>Excel (.xlsx)</option>
                        <option>PDF (.pdf)</option>
                        <option>CSV (.csv)</option>
                    </select>
                </label>
            </div>
            <div class="flex justify-end mt-6">
                <button onclick="downloadReport()"
                    class="px-4 py-2 rounded bg-brand hover:bg-brandlight text-black font-semibold">Download</button>
            </div>
        </div>
    </div>

    <div id="requestReportModal"
        class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-xl shadow-lg w-full max-w-md p-6 relative">
            <button onclick="closeRequestReportModal()"
                class="absolute top-3 right-3 text-gray-400 hover:text-gray-600">
                <i class="fas fa-times"></i>
            </button>
            <h3 class="text-xl font-bold mb-4">Request Custom Report</h3>
            <div class="space-y-4">
                <label class="block">
                    <span class="text-gray-700">Report Name:</span>
                    <input type="text" id="reportName" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" />
                </label>
                <label class="block">
                    <span class="text-gray-700">Description / Requirements:</span>
                    <textarea id="reportDescription" rows="4"
                        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm"></textarea>
                </label>
            </div>
            <div class="flex justify-end mt-6">
                <button onclick="submitReportRequest()"
                    class="px-4 py-2 rounded bg-brand hover:bg-brandlight text-black font-semibold">Submit
                    Request</button>
            </div>
        </div>
    </div>


    <div id="loadingModal"
        class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden z-[100]">
        <div class="bg-white p-6 rounded-lg shadow-xl flex items-center space-x-3">
            <svg class="animate-spin h-5 w-5 text-brand" xmlns="http://www.w3.org/2000/svg" fill="none"
                viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor"
                    d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                </path>
            </svg>
            <p id="loadingText" class="text-gray-700 font-medium">Loading...</p>
        </div>
    </div>

    <script>
        // Placeholder API URL for Coaching Logs - adjust as needed
        const API_URL = "https://script.google.com/macros/s/AKfycbyn9CG1Lk3S5bXtfEEbvH5H-8fBBOvY4OGSJPyIM5RZSDBCOf4fwkXVvnKjzZGvqUL/exec"; 
        
        // Caching DOM elements for Coaching Log form
        const coachingForm = document.getElementById("coachingForm");

        document.addEventListener('DOMContentLoaded', () => {
            // Initialize main page navigation and other components when the DOM is fully loaded.
            initializePageNavigation();
            initializeAttendanceTabs();
            renderHeadcountTable(); // Renders placeholder/initial table data
        });


        /* -------------------------------------------
         * 1. GLOBAL UTILITY FUNCTIONS
         * ------------------------------------------- */

        // Global Loading Functions (Used for Headcount CRUD & Coaching Logs)
        function showLoading(message = "Loading...") {
            const loadingModal = document.getElementById('loadingModal');
            if (document.getElementById('loadingText')) {
                document.getElementById('loadingText').innerText = message;
                loadingModal.classList.remove('hidden');
            }
        }
        function hideLoading() {
            const loadingModal = document.getElementById('loadingModal');
            if (loadingModal) {
                loadingModal.classList.add('hidden');
            }
        }
        
        // Local Loading Functions (Used for Coaching Logs table)
        function showLocalLoading(message) {
            const statusEl = document.getElementById('coachingTableStatus');
            if (statusEl) {
                statusEl.innerHTML = `<i class="fas fa-spinner fa-spin mr-2 text-brand"></i>${message}`;
                statusEl.classList.remove('hidden');
                document.getElementById('sessionsTable').classList.add('hidden');
            }
        }
        function hideLocalLoading() {
            const statusEl = document.getElementById('coachingTableStatus');
            if (statusEl) {
                statusEl.classList.add('hidden');
                document.getElementById('sessionsTable').classList.remove('hidden');
            }
        }
        function showLocalError(message) {
            const statusEl = document.getElementById('coachingTableStatus');
            if (statusEl) {
                statusEl.innerHTML = `<i class="fas fa-exclamation-triangle mr-2 text-red-500"></i>${message}`;
                statusEl.classList.remove('hidden');
                document.getElementById('sessionsTable').classList.add('hidden');
            }
        }


        /* -------------------------------------------
         * 2. MAIN PAGE NAVIGATION LOGIC
         * ------------------------------------------- */

        function initializePageNavigation() {
            const navLinks = document.querySelectorAll('.nav-link');
            const pageSections = document.querySelectorAll('.page-section');
            const defaultPageId = 'dashboard';

            function navigateTo(pageId) {
                // Update link styles (highlight active link)
                navLinks.forEach(link => {
                    if (link.dataset.page === pageId) {
                        link.classList.add('bg-brandlight');
                    } else {
                        link.classList.remove('bg-brandlight');
                    }
                });

                // Show/Hide page sections
                pageSections.forEach(section => {
                    if (section.id === pageId) {
                        section.classList.add('active');
                        // Special handling for the coaching page
                        if (pageId === 'coaching' && typeof window.loadSessions === 'function') {
                            window.loadSessions();
                        }
                    } else {
                        section.classList.remove('active');
                    }
                });
            }

            // Set up click listeners for all sidebar links
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    navigateTo(link.dataset.page);
                });
            });

            // Set default page on load
            // Determine initial page from URL hash if available, otherwise use default
            const initialPageId = window.location.hash.substring(1) || defaultPageId;
            navigateTo(initialPageId);
        }

        /* -------------------------------------------
         * 3. ATTENDANCE CALENDAR LOGIC
         * ------------------------------------------- */

        function initializeAttendanceTabs() {
            // Ensures the 'Weekly View' tab is active and its content is shown by default
            const defaultTab = document.getElementById('weekly-tab');
            const defaultContent = document.getElementById('weekly-content');
            if (defaultTab) defaultTab.classList.add('active');
            if (defaultContent) defaultContent.classList.remove('hidden');
        }

        function switchAttendanceTab(tabId) {
            const tabs = document.querySelectorAll('.tab');
            const contents = document.querySelectorAll('.tab-content');

            // Deactivate all tabs and hide all content
            tabs.forEach(tab => tab.classList.remove('active'));
            contents.forEach(content => content.classList.add('hidden'));

            // Activate the clicked tab and show its content
            const activeTab = document.getElementById(`${tabId}-tab`);
            const activeContent = document.getElementById(`${tabId}-content`);

            if (activeTab) activeTab.classList.add('active');
            if (activeContent) activeContent.classList.remove('hidden');
        }


        /* -------------------------------------------
         * 4. HEADCOUNT LOGIC (Placeholders)
         * ------------------------------------------- */
        
        function renderHeadcountTable() {
            // Function to load and render Headcount data from API (or dummy data)
            // The dummy data is already in the HTML, so this primarily serves as a setup placeholder
            console.log("Headcount table rendered with dummy data.");
        }

        function openCrudModal(mode, employeeId = null) {
            const modal = document.getElementById('crudModal');
            const title = document.getElementById('crudModalTitle');
            const body = document.getElementById('crudModalBody');
            const actionButton = document.getElementById('crudModalAction');

            if (mode === 'NEW') {
                title.textContent = 'Add New Employee';
                body.innerHTML = '<p>Form for NEW employee goes here.</p>'; 
                actionButton.textContent = 'Add Employee';
                actionButton.onclick = () => { /* Handle Add Employee logic */ closeCrudModal(); };
            } else if (mode === 'EDIT' && employeeId) {
                title.textContent = `Edit Employee #${employeeId}`;
                body.innerHTML = `<p>Form content for EDITING employee ${employeeId} goes here.</p>`; 
                actionButton.textContent = 'Save Changes';
                actionButton.onclick = () => { /* Handle Edit Employee logic */ closeCrudModal(); };
            }
            modal.classList.remove('hidden');
        }

        function closeCrudModal() {
            document.getElementById('crudModal').classList.add('hidden');
        }

        function filterHeadcount() {
            const filterValue = document.getElementById('searchHeadcount').value.toLowerCase();
            const tableBody = document.getElementById('headcountTableBody');
            const rows = tableBody.querySelectorAll('tr');

            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(filterValue) ? '' : 'none';
            });
        }
        
        function deleteHeadcount(employeeId) {
            if (confirm(`Are you sure you want to delete employee ${employeeId}?`)) {
                showLoading("Deleting employee...");
                // Simulating API call
                setTimeout(() => {
                    hideLoading();
                    alert(`Employee ${employeeId} deleted (simulated).`);
                    // Reload or remove row from table after successful deletion
                }, 1000);
            }
        }


        /* -------------------------------------------
         * 5. BILLING / REPORTS MODAL LOGIC (Placeholders)
         * ------------------------------------------- */

        function openDownloadModal() {
            document.getElementById('downloadModal').classList.remove('hidden');
        }
        function closeDownloadModal() {
            document.getElementById('downloadModal').classList.add('hidden');
        }
        function downloadReport() {
            alert('Download initiated (placeholder).');
            closeDownloadModal();
        }

        function openRequestReportModal() {
            document.getElementById('requestReportModal').classList.remove('hidden');
        }
        function closeRequestReportModal() {
            document.getElementById('requestReportModal').classList.add('hidden');
        }
        function submitReportRequest() {
            const reportName = document.getElementById('reportName').value;
            const reportDescription = document.getElementById('reportDescription').value;
            alert(`Request Submitted:\nName: ${reportName}\nDescription: ${reportDescription}`);
            closeRequestReportModal();
        }


        /* -------------------------------------------
         * 6. COACHING LOGS LOGIC
         * ------------------------------------------- */

        function openCoachingModal(editing = false) {
            document.getElementById('modalBg').classList.remove('hidden');
            document.getElementById("modalTitle").innerText = editing ? "Edit Coaching Session" : "Add Coaching Session";
        }
        function closeCoachingModal() {
            document.getElementById('modalBg').classList.add('hidden');
            coachingForm.reset();
            delete coachingForm.dataset.editId;
            // Re-enable form elements and show submit button after viewing
            [...coachingForm.elements].forEach(el => el.disabled = false);
            coachingForm.querySelector('button[type="submit"]').classList.remove('hidden');
        }

        // Load sessions
        window.loadSessions = async function () { // Made global to be called by navigation
            showLocalLoading("Fetching coaching sessions...");
            try {
                // Mocking a successful API response for a working example
                const sessions = [
                    { "date": "2023-10-01", "coach": "Admin", "employee": "J. Doe", "performance": "AHT is high", "acknowledge": "Yes", "ID": 1 },
                    { "date": "2023-10-02", "coach": "Admin", "employee": "M. Scott", "performance": "CSAT low", "acknowledge": "Pending", "ID": 2 }
                ];
                
                const table = document.getElementById("sessionsTable");
                table.innerHTML = "";
                sessions.forEach(session => {
                    table.innerHTML += `
                    <tr>
                        <td class="px-4 py-2">${session.date}</td>
                        <td class="px-4 py-2">${session.coach}</td>
                        <td class="px-4 py-2">${session.employee}</td>
                        <td class="px-4 py-2">${session.performance}</td>
                        <td class="px-4 py-2">${session.acknowledge}</td>
                        <td class="px-4 py-2 flex space-x-2">
                            <button class="text-blue-600" onclick='viewSession(${JSON.stringify(session)})'>View</button>
                            <button class="text-yellow-600" onclick='editSession(${JSON.stringify(session)})'>Edit</button>
                            <button class="text-red-600" onclick='deleteSession(${session.ID})'>Delete</button>
                        </td>
                    </tr>
                `;
                });
                hideLocalLoading();
            } catch (error) {
                console.error("Error loading sessions:", error);
                showLocalError("Failed to load sessions. Check API URL.");
            } finally {
                 hideLoading(); // Hide global loading if it was triggered
            }
        }

        function viewSession(session) {
            openCoachingModal(false);
            Object.keys(session).forEach(key => {
                const element = coachingForm.querySelector(`#${key.toLowerCase()}`); // Use lowercase for consistency
                if (element) {
                    element.value = session[key];
                    element.disabled = true;
                }
                // Handle 'agentacknowledged' as a special case if key is different
                if(key === 'acknowledge' && coachingForm['agentacknowledged']) {
                    coachingForm['agentacknowledged'].value = session[key];
                    coachingForm['agentacknowledged'].disabled = true;
                }
            });
            coachingForm.querySelector('button[type="submit"]').classList.add('hidden');
        }

        function editSession(session) {
            openCoachingModal(true);
            Object.keys(session).forEach(key => {
                const element = coachingForm.querySelector(`#${key.toLowerCase()}`);
                if (element) element.value = session[key];
                // Handle 'agentacknowledged' as a special case if key is different
                if(key === 'acknowledge' && coachingForm['agentacknowledged']) {
                    coachingForm['agentacknowledged'].value = session[key];
                }
            });
            coachingForm.dataset.editId = session.ID || session.id;
        }

        async function deleteSession(id) {
            if (!confirm("Delete this session? (This is a mock deletion)")) return;
            showLoading("Deleting session...");
            
            // Mocking a successful API call
            setTimeout(async () => {
                alert(`Session ${id} deleted (mock).`);
                await loadSessions();
                hideLoading();
            }, 1000);
            
            // Real API call structure:
            // await fetch(API_URL, {
            //     method: "POST",
            //     body: JSON.stringify({ _method: "DELETE", id })
            // });
            // await loadSessions();
            // hideLoading();
        }

        coachingForm.addEventListener("submit", async function (e) {
            e.preventDefault();
            const isEdit = !!this.dataset.editId;
            showLoading(isEdit ? "Updating session..." : "Saving session...");
            
            // Using a mock timeout to simulate an API call
            setTimeout(async () => {
                alert(`Session ${isEdit ? 'updated' : 'saved'} (mock).`);
                closeCoachingModal();
                await loadSessions(); // Reload table data
                hideLoading();
            }, 1000);
            
            // Real API call structure:
            /*
            const formData = Object.fromEntries(new FormData(this).entries());
            const payload = isEdit 
                ? { _method: "PUT", id: this.dataset.editId, ...formData }
                : formData;
                
            await fetch(API_URL, {
                method: "POST", // Assumes API uses POST for all methods with _method override
                body: JSON.stringify(payload)
            });

            if (isEdit) delete this.dataset.editId;
            hideLoading();
            closeCoachingModal();
            loadSessions();
            */
        });
    </script>
</body>

</html>