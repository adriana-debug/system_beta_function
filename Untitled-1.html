<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Digital Minds BPO</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/feather-icons"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

  <style>
    :root {
      --dm-primary: #04101d; /* deep navy */
      --dm-secondary: #a3b612; /* olive */
      --dm-accent: #cce416; /* lime */
      --dm-muted: #6b7280; /* gray-500 */
      --dm-bg: #ffffff;
      --dm-surface: #f3f4f6;
    }

    body.dark {
      --dm-bg: #0f172a;
      --dm-surface: #1f2937;
      --dm-muted: #cbd5e1;
    }

    /* Spinner */
    .themed-spinner {
      border-width: 4px;
      border-style: solid;
      border-color: rgba(0,0,0,0.08);
      border-top-color: var(--dm-primary);
      width: 2rem; height: 2rem; border-radius: 9999px;
    }

    /* Banner */
    .banner-gradient {
      background: linear-gradient(135deg, var(--dm-primary) 0%, var(--dm-secondary) 50%, var(--dm-accent) 100%);
      position: relative;
      overflow: hidden;
    }

    /* Modern Table */
    .modern-table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0 8px;
    }
    .modern-table thead tr th {
      background: var(--dm-surface);
      padding: 12px;
      text-align: left;
      font-size: 14px;
      font-weight: 600;
      color: var(--dm-muted);
    }
    .modern-table tbody tr {
      background: var(--dm-bg);
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
      transition: transform 0.2s;
    }
    .modern-table tbody tr:hover {
      transform: scale(1.01);
    }
    .modern-table td {
      padding: 12px;
      font-size: 14px;
      color: var(--dm-muted);
      border-top: 1px solid rgba(0,0,0,0.06);
    }
    body.dark .modern-table thead tr th {
      background: var(--dm-surface);
      color: var(--dm-muted);
    }
    body.dark .modern-table tbody tr {
      background: var(--dm-surface);
    }
    body.dark .modern-table td {
      color: var(--dm-muted);
      border-top-color: rgba(255,255,255,0.03);
    }

    /* Google Table styles (keeps Tables uniform) */
    .google-visualization-table-table {
      border-collapse: separate !important;
      border-spacing: 0 !important;
      width: 100% !important;
      font-size: 0.9375rem;
      border-radius: 0.5rem;
      overflow: hidden;
      background: var(--dm-bg);
    }
    .google-visualization-table-th {
      background-color: var(--dm-surface) !important;
      color: var(--dm-muted) !important;
      font-weight: 700 !important;
      padding: 0.75rem !important;
      border-bottom: 1px solid rgba(0,0,0,0.06) !important;
      text-align: center !important;
    }
    .google-visualization-table-td {
      padding: 0.75rem !important;
      border-bottom: 1px solid rgba(0,0,0,0.04) !important;
      color: var(--dm-muted) !important;
      text-align: center !important;
      background: transparent !important;
    }
    .google-visualization-table-tr:hover .google-visualization-table-td {
      background-color: rgba(163,182,18,0.04) !important;
    }
    .google-visualization-table-tr:nth-child(even) .google-visualization-table-td {
      background-color: rgba(0,0,0,0.02) !important;
    }
  </style>
</head>
<body class="bg-gray-50 min-h-screen">
<!-- Main container to align banner, filters and content -->
<div class="max-w-7xl mx-auto px-6">

  <!-- Banner -->
  <div class="banner-gradient text-white rounded-lg p-6 mb-4 relative flex items-center gap-4">
    <div class="flex-shrink-0 w-12 h-12 bg-white rounded-md overflow-hidden rotate-45 relative">
      <img src="dmi_logo.jpg" alt="Logo"
           class="w-full h-full object-cover absolute top-0 left-0 rotate-[315deg] scale-125">
    </div>
    <div>
      <h1 class="text-3xl font-bold">Welcome to Your Dashboard</h1>
      <p class="text-sm opacity-80">Track your team's performance in real time</p>
    </div>
  </div>

  <!-- Filter Bar -->
  <div class="flex flex-wrap gap-4 mb-6">
    <button class="bg-white border border-gray-300 rounded-md px-3 py-2 text-sm text-gray-700 hover:bg-gray-100">All Teams</button>
    <button class="bg-white border border-gray-300 rounded-md px-3 py-2 text-sm text-gray-700 hover:bg-gray-100">All Agents</button>
    <button class="bg-white border border-gray-300 rounded-md px-3 py-2 text-sm text-gray-700 hover:bg-gray-100">All Months</button>
    <button id="themeToggle" class="bg-white border border-gray-300 rounded-md px-3 py-2 text-sm text-gray-700 hover:bg-gray-100"><i data-feather="moon"></i></button>
  </div>

  <!-- Spinner -->
  <div id="spinner" class="flex justify-center items-center py-6 hidden">
    <div class="themed-spinner animate-spin"></div>
  </div>



    <!-- Email Section -->
    <div class="bg-white rounded-lg border border-gray-200 p-6 mb-8">
      <h2 class="text-lg font-semibold mb-4"><i data-feather="mail"></i> Email</h2>
      <div class="grid grid-cols-5 gap-8">
        <div><p class="text-sm text-gray-500 mb-1">Total Emails</p><p class="text-2xl font-semibold" id="email-total">--</p></div>
        <div><p class="text-sm text-gray-500 mb-1">CSAT</p><p class="text-2xl font-semibold" id="email-csat">--</p></div>
        <div><p class="text-sm text-gray-500 mb-1">First Response</p><p class="text-2xl font-semibold" id="email-frt">--</p></div>
        <div><p class="text-sm text-gray-500 mb-1">Resolution</p><p class="text-2xl font-semibold" id="email-res">--</p></div>
        <div><p class="text-sm text-gray-500 mb-1">SLA</p><p class="text-2xl font-semibold" id="email-sla">--</p></div>
      </div>
    </div>

    <!-- Chat Section -->
    <div class="bg-white rounded-lg border border-gray-200 p-6 mb-8">
      <h2 class="text-lg font-semibold mb-4"><i data-feather="message-circle"></i> Chat</h2>
      <div class="grid grid-cols-5 gap-8">
        <div><p class="text-sm text-gray-500 mb-1">Total Chats</p><p class="text-2xl font-semibold" id="chat-total">--</p></div>
        <div><p class="text-sm text-gray-500 mb-1">CSAT</p><p class="text-2xl font-semibold" id="chat-csat">--</p></div>
        <div><p class="text-sm text-gray-500 mb-1">First Response</p><p class="text-2xl font-semibold" id="chat-frt">--</p></div>
        <div><p class="text-sm text-gray-500 mb-1">Resolution</p><p class="text-2xl font-semibold" id="chat-res">--</p></div>
        <div><p class="text-sm text-gray-500 mb-1">SLA</p><p class="text-2xl font-semibold" id="chat-sla">--</p></div>
      </div>
    </div>

    <!-- Calls Section -->
    <div class="bg-white rounded-lg border border-gray-200 p-6 mb-8">
      <h2 class="text-lg font-semibold mb-4"><i data-feather="phone"></i> Calls</h2>
      <div class="grid grid-cols-4 gap-8">
        <div><p class="text-sm text-gray-500 mb-1">Total Calls</p><p class="text-2xl font-semibold" id="call-total">--</p></div>
        <div><p class="text-sm text-gray-500 mb-1">Abandonment Rate</p><p class="text-2xl font-semibold" id="call-abandon">--</p></div>
        <div><p class="text-sm text-gray-500 mb-1">Transfers</p><p class="text-2xl font-semibold" id="call-transfers">--</p></div>
        <div><p class="text-sm text-gray-500 mb-1">SLA</p><p class="text-2xl font-semibold" id="call-sla">--</p></div>
      </div>
    </div>


  <!-- Google Chart Section -->
    <div class="bg-white rounded-lg border border-gray-200 p-6 mb-8">
      <h2 class="text-lg font-semibold mb-4"><i data-feather="bar-chart-2" class="icon"></i> Chart Overview</h2>
      <div id="google-chart" style="width:100%;height:400px;"></div>
      <!-- Lightweight trend chart (Chart.js) -->

    </div>

    <!-- Weekly Average Chart -->
    <div class="bg-white rounded-lg border border-gray-200 p-6 mb-8">
      <h2 class="text-lg font-semibold mb-6">Weekly Average - Tasks (Email/Chat/Calls)</h2>
      <div id="weeklyAverageTasksChart" style="width:100%; height:400px;"></div>
    </div>

    <!-- Daily Trend Table -->
    <div class="bg-white rounded-lg border border-gray-200 p-6 mb-8">
      <h2 class="text-lg font-semibold mb-6">Daily Trend - Overall</h2>
      <div id="dailyTrendTable" class="overflow-x-auto"></div>

    </div>

    <!-- Agent Trend Table -->
    <div class="bg-white rounded-lg border border-gray-200 p-6 mb-8">
      <h2 class="text-lg font-semibold mb-6">Agent Performance Trend</h2>
      <div id="agentTrendTable" class="overflow-x-auto"></div>

    </div>



  </div>

  <script>
    feather.replace();

    // Load required Google packages
    google.charts.load('current', { packages: ['corechart', 'table'] });
    google.charts.setOnLoadCallback(drawDashboard);

    function drawDashboard() {
      drawChannelOverview();
      drawWeeklyAverageTasksChart();
      drawDailyTrendTable();
      drawAgentTrendTable();
    }

    // Utility to read palette variables
    function palette() {
      const styles = getComputedStyle(document.documentElement);
      return {
        primary: styles.getPropertyValue('--dm-primary').trim() || '#04101d',
        secondary: styles.getPropertyValue('--dm-secondary').trim() || '#a3b612',
        accent: styles.getPropertyValue('--dm-accent').trim() || '#cce416',
        muted: styles.getPropertyValue('--dm-muted').trim() || '#6b7280',
        isDark: document.body.classList.contains('dark')
      };
    }

    // Channel Overview (simple line chart)
    function drawChannelOverview() {
      const p = palette();
      const data = google.visualization.arrayToDataTable([
        ['Month', 'Emails', 'Chats', 'Calls'],
        ['Jan', 1000, 400, 200],
        ['Feb', 1170, 460, 250],
        ['Mar', 660, 1120, 300],
        ['Apr', 1030, 540, 350]
      ]);
      const options = {
        title: 'Channel Overview',
        curveType: 'function',
        legend: { position: 'bottom', textStyle: { color: p.isDark ? '#e5e7eb' : p.muted } },
        colors: [p.primary, p.secondary, p.accent],
        backgroundColor: 'transparent',
        hAxis: { textStyle: { color: p.isDark ? '#e5e7eb' : p.muted } },
        vAxis: { textStyle: { color: p.isDark ? '#e5e7eb' : p.muted } }
      };
      const chart = new google.visualization.LineChart(document.getElementById('google-chart'));
      chart.draw(data, options);
    }

    // Weekly Average Combo Chart
    function drawWeeklyAverageTasksChart() {
      const p = palette();
      const data = google.visualization.arrayToDataTable([
        ['Week', 'Email', 'Chat', 'Calls', 'Tasks'],
        ['Week 1', 300, 400, 150, 298.33],
        ['Week 2', 500, 600, 400, 523.67],
        ['Week 3', 550, 580, 420, 531.67],
        ['Week 4', 560, 590, 430, 538.67],
        ['Week 5', 400, 500, 300, 458]
      ]);
      const options = {
        seriesType: 'bars',
        isStacked: true,
        series: { 3: { type: 'line', color: p.isDark ? '#e5e7eb' : p.primary, lineWidth: 2, pointSize: 5 } },
        colors: [p.secondary, '#0ea5e9', '#06b6d4'],
        backgroundColor: 'transparent',
        chartArea: { left: 50, top: 20, width: '85%', height: '70%' },
        legend: { position: 'top', textStyle: { color: p.isDark ? '#e5e7eb' : p.muted } },
        vAxis: { minValue: 0, textStyle: { color: p.isDark ? '#e5e7eb' : p.muted }, gridlines: { color: p.isDark ? '#374151' : '#e5e7eb' } },
        hAxis: { textStyle: { color: p.isDark ? '#e5e7eb' : p.muted } }
      };
      const chart = new google.visualization.ComboChart(document.getElementById('weeklyAverageTasksChart'));
      chart.draw(data, options);
    }

    // Daily Trend Table
    function drawDailyTrendTable() {
      const data = new google.visualization.DataTable();
      data.addColumn('string', 'Date');
      data.addColumn('number', 'Total');
      data.addColumn('number', 'Email');
      data.addColumn('number', 'Chat');
      data.addColumn('number', 'Calls');
      data.addColumn('number', 'CSAT');
      data.addColumn('string', 'First Response');
      data.addColumn('string', 'Resolution');
      data.addColumn('string', 'Abandonment');
      data.addColumn('string', 'SLA');

      data.addRows([
        ['2025-09-01', 890, 300, 400, 190, 4.8, '8m', '1.8h', '2.1%', '98%'],
        ['2025-09-02', 865, 310, 380, 175, 4.7, '9m', '1.9h', '2.3%', '97%'],
        ['2025-09-03', 920, 320, 400, 200, 4.9, '7m', '1.7h', '2.0%', '99%'],
        ['2025-09-04', 880, 305, 390, 185, 4.8, '8m', '1.8h', '2.2%', '98%']
      ]);

      const table = new google.visualization.Table(document.getElementById('dailyTrendTable'));
      table.draw(data, { showRowNumber: false, width: '100%', allowHtml: true });
    }

    // Agent Trend Table
    function drawAgentTrendTable() {
      const data = new google.visualization.DataTable();
      data.addColumn('string', 'Agent');
      data.addColumn('number', 'Total');
      data.addColumn('number', 'Email');
      data.addColumn('number', 'Chat');
      data.addColumn('number', 'Calls');
      data.addColumn('number', 'CSAT');
      data.addColumn('string', 'First Response');
      data.addColumn('string', 'Resolution');
      data.addColumn('string', 'Transfer Rate');
      data.addColumn('string', 'SLA');

      data.addRows([
        ['Sarah Johnson', 142, 65, 52, 25, 4.8, '8m', '1.8h', '2.1%', '98%'],
        ['Mike Chen', 128, 58, 48, 22, 4.7, '10m', '2.0h', '2.5%', '96%'],
        ['Emma Davis', 135, 62, 50, 23, 4.6, '9m', '1.9h', '2.3%', '97%'],
        ['Alex Thompson', 138, 63, 51, 24, 4.7, '9m', '1.8h', '2.2%', '97%'],
        ['Rachel Kim', 132, 60, 49, 23, 4.8, '8m', '1.7h', '2.0%', '98%']
      ]);

      const table = new google.visualization.Table(document.getElementById('agentTrendTable'));
      table.draw(data, { showRowNumber: false, width: '100%', allowHtml: true });
    }

    // Spinner Example: show briefly on load
    document.addEventListener('DOMContentLoaded', () => {
      const spinner = document.getElementById('spinner');
      spinner.classList.remove('hidden');
      setTimeout(() => spinner.classList.add('hidden'), 1000);
    });

    // Dark theme toggle
    document.getElementById('themeToggle').addEventListener('click', () => {
      document.body.classList.toggle('dark');
      // Redraw charts to update colors
      drawDashboard();
    });
  </script>
</body>
</html>