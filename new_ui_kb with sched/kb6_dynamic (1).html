<!DOCTYPE html>
<html lang="en">
<head>
  <base target="_top">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>
  
  <style>
    :root {
      --primary: #0f172a;
      --sidebar-width: 280px;
    }
    body { 
      font-family: 'Plus Jakarta Sans', sans-serif; 
      background-color: #f1f5f9; 
      color: #1e293b; 
    }
    
    /* Modern Navigation Styling */
    .nav-item {
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
    }
    .nav-active { 
      background: #f8fafc; 
      color: #0f172a; 
      font-weight: 600;
      box-shadow: inset 4px 0 0 0 #0f172a;
    }
    .nav-active i { color: #0f172a; }
    
    /* Layout Components */
    .glass-card { 
      background: rgba(255, 255, 255, 0.9); 
      backdrop-filter: blur(8px);
      border: 1px solid rgba(226, 232, 240, 0.8); 
      border-radius: 16px; 
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .glass-card:hover { 
      transform: translateY(-2px);
      box-shadow: 0 12px 24px -10px rgba(0,0,0,0.05);
    }

    /* Knowledge Base Enhancements */
    .kb-table { width: 100%; border-collapse: separate; border-spacing: 0; margin-top: 1rem; border-radius: 12px; overflow: hidden; border: 1px solid #e2e8f0; }
    .kb-table th { background: #f8fafc; color: #64748b; font-size: 11px; text-transform: uppercase; letter-spacing: 0.05em; padding: 14px; text-align: left; border-bottom: 1px solid #e2e8f0; }
    .kb-table td { padding: 20px; font-size: 14px; border-bottom: 1px solid #f1f5f9; vertical-align: top; line-height: 1.6; background: white; }
    
    .kb-template {
      position: relative;
      background: #f8fafc;
      border: 1px solid #e2e8f0;
      cursor: pointer;
    }
    .kb-template:hover { background: #f1f5f9; }
    .copy-hint { position: absolute; top: 8px; right: 8px; opacity: 0; transition: opacity 0.2s; }
    .kb-template:hover .copy-hint { opacity: 1; }

    .view-content { animation: fadeIn 0.4s ease-out; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }

    /* Timezone Switch Styling */
    .timezone-switch {
      display: inline-flex;
      background: #f1f5f9;
      border-radius: 12px;
      padding: 4px;
      gap: 4px;
    }
    .timezone-btn {
      padding: 8px 16px;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      border: none;
      background: transparent;
      color: #64748b;
    }
    .timezone-btn:hover {
      background: #e2e8f0;
    }
    .timezone-btn.active {
      background: #0f172a;
      color: white;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    /* Today's Date Highlight */
    .today-column {
      background: #f0f9ff !important;
      border-left: 3px solid #3b82f6 !important;
      border-right: 3px solid #3b82f6 !important;
    }
  </style>
</head>
<body class="flex min-h-screen">

  <aside class="w-[280px] h-screen bg-white border-r border-slate-200 fixed flex flex-col z-50">
    <div class="p-8">
      <div class="flex items-center gap-3 mb-2">
        <div class="w-10 h-10 bg-slate-900 rounded-xl flex items-center justify-center">
          <span class="text-white font-bold text-xl">æœˆ</span>
        </div>
        <div>
          <h1 class="text-lg font-extrabold text-slate-900 tracking-tight">TSUKI GLASS</h1>
          <p class="text-[10px] text-slate-400 font-bold uppercase tracking-widest">Support Portal</p>
        </div>
      </div>
    </div>
    
    <nav class="flex-1 px-4 space-y-1">
      <div class="text-[10px] font-bold text-slate-400 uppercase tracking-widest px-4 mb-2 mt-4">Main Menu</div>
      <button onclick="setView('dashboard')" id="btn-dashboard" class="nav-item w-full flex items-center gap-3 px-4 py-3 text-sm font-medium text-slate-500 hover:bg-slate-50 rounded-xl nav-active">
        <i data-lucide="layout-dashboard" class="w-4 h-4"></i> Dashboard
      </button>
      <button onclick="setView('agents')" id="btn-agents" class="nav-item w-full flex items-center gap-3 px-4 py-3 text-sm font-medium text-slate-500 hover:bg-slate-50 rounded-xl">
        <i data-lucide="users" class="w-4 h-4"></i> Agent Performance
      </button>
      <button onclick="setView('knowledge')" id="btn-knowledge" class="nav-item w-full flex items-center gap-3 px-4 py-3 text-sm font-medium text-slate-500 hover:bg-slate-50 rounded-xl">
        <i data-lucide="book-open" class="w-4 h-4"></i> Knowledge Base
      </button>

      <div class="text-[10px] font-bold text-slate-400 uppercase tracking-widest px-4 mb-2 mt-8">Systems</div>
      <button onclick="setView('quality')" id="btn-quality" class="nav-item w-full flex items-center gap-3 px-4 py-3 text-sm font-medium text-slate-500 hover:bg-slate-50 rounded-xl">
        <i data-lucide="shield-check" class="w-4 h-4"></i> Quality Metrics
      </button>
      <button onclick="setView('schedule')" id="btn-schedule" class="nav-item w-full flex items-center gap-3 px-4 py-3 text-sm font-medium text-slate-500 hover:bg-slate-50 rounded-xl">
        <i data-lucide="calendar" class="w-4 h-4"></i> Schedule
      </button>
      <button onclick="setView('settings')" id="btn-settings" class="nav-item w-full flex items-center gap-3 px-4 py-3 text-sm font-medium text-slate-500 hover:bg-slate-50 rounded-xl">
        <i data-lucide="settings" class="w-4 h-4"></i> Settings
      </button>
    </nav>

<div class="p-4 border-t border-slate-200">
  <div class="bg-slate-50 p-3 rounded-lg flex items-center justify-center">
    <p class="text-xs font-bold text-slate-900">Internal Use Only</p>
  </div>
</div>

  </aside>

  <main class="ml-[280px] flex-1 p-12 max-w-[1600px]">
    
    <section id="view-dashboard" class="view-content">
      <div class="flex justify-between items-end mb-10">
        <div>
          <h1 class="text-3xl font-bold text-slate-900 tracking-tight">Operational Overview</h1>
          <p class="text-slate-500 mt-1">Real-time performance metrics for the current billing cycle.</p>
        </div>
        <div class="flex gap-2">
          <button class="bg-white border border-slate-200 px-4 py-2 rounded-lg text-sm font-semibold text-slate-600 flex items-center gap-2 hover:bg-slate-50">
            <i data-lucide="download" class="w-4 h-4"></i> Export Report
          </button>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-10">
        <div class="glass-card p-6 border-b-4 border-b-blue-500">
          <p class="text-[11px] font-bold text-slate-400 uppercase tracking-widest mb-3">Total Inbound</p>
          <div class="flex items-end justify-between">
            <h2 class="text-3xl font-bold text-slate-900">1,000</h2>
            <span class="bg-emerald-100 text-emerald-700 px-2 py-1 rounded text-[10px] font-bold flex items-center gap-1">
              <i data-lucide="trending-up" class="w-3 h-3"></i> 12%
            </span>
          </div>
        </div>
        <div class="glass-card p-6 border-b-4 border-b-indigo-500">
          <p class="text-[11px] font-bold text-slate-400 uppercase tracking-widest mb-3">Avg Handling Time</p>
          <div class="flex items-end justify-between">
            <h2 class="text-3xl font-bold text-slate-900">4m 12s</h2>
            <span class="bg-rose-100 text-rose-700 px-2 py-1 rounded text-[10px] font-bold flex items-center gap-1">
              <i data-lucide="trending-down" class="w-3 h-3"></i> 2%
            </span>
          </div>
        </div>
        <div class="glass-card p-6 border-b-4 border-b-emerald-500">
          <p class="text-[11px] font-bold text-slate-400 uppercase tracking-widest mb-3">CSAT Score</p>
          <div class="flex items-end justify-between">
            <h2 class="text-3xl font-bold text-slate-900">100.0%</h2>
            <span class="text-emerald-600 text-xs font-bold">Stable</span>
          </div>
        </div>
        <div class="glass-card p-6 bg-slate-900 text-white border-none shadow-xl shadow-slate-200">
          <p class="text-[11px] font-bold text-slate-400 uppercase tracking-widest mb-3">Active Agents</p>
          <div class="flex items-end justify-between">
            <h2 class="text-3xl font-bold">3</h2>
            <span class="bg-emerald-500 text-white px-2 py-1 rounded text-[10px] font-bold">Online</span>
          </div>
        </div>
      </div>

      <div class="glass-card p-10">
        <h2 class="text-xl font-bold text-slate-900 mb-4">Retention Calculator</h2>
        <div class="grid grid-cols-2 gap-4 mb-6">
          <div>
            <label class="text-xs font-bold text-slate-400 uppercase tracking-wider block mb-2">Order Amount ($)</label>
            <input type="number" id="orderAmount" onchange="calculateRetention()" class="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg text-sm outline-none focus:border-slate-900 transition-all">
          </div>
          <div>
            <label class="text-xs font-bold text-slate-400 uppercase tracking-wider block mb-2">Existing Discount (%)</label>
            <input type="number" id="existingDiscount" value="0" onchange="calculateRetention()" class="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg text-sm outline-none focus:border-slate-900 transition-all">
          </div>
        </div>

        <div id="results" class="hidden mt-8">
          <div class="grid grid-cols-2 gap-6 mb-6">
            <div class="bg-blue-50 border-2 border-blue-200 p-6 rounded-xl">
              <h3 class="text-xs font-bold text-blue-900 uppercase tracking-wider mb-4 flex items-center gap-2">
                <i data-lucide="dollar-sign" class="w-4 h-4"></i> Option A: Refund
              </h3>
              <div class="space-y-2">
                <div class="flex justify-between">
                  <span class="text-sm text-slate-600">Refund Amount</span>
                  <span class="text-lg font-bold text-slate-900" id="refundAmount">$0</span>
                </div>
                <div class="flex justify-between">
                  <span class="text-sm text-slate-600">Next Order Discount</span>
                  <span class="text-lg font-bold text-blue-600" id="refundDiscount">0%</span>
                </div>
                <div class="flex justify-between pt-2 border-t border-blue-200">
                  <span class="text-sm font-bold text-slate-700">Net Amount</span>
                  <span class="text-lg font-bold text-slate-900" id="refundNetAmount">$0</span>
                </div>
              </div>
            </div>

            <div class="bg-emerald-50 border-2 border-emerald-200 p-6 rounded-xl">
              <h3 class="text-xs font-bold text-emerald-900 uppercase tracking-wider mb-4 flex items-center gap-2">
                <i data-lucide="gift" class="w-4 h-4"></i> Option B: Store Credit
              </h3>
              <div class="space-y-2">
                <div class="flex justify-between">
                  <span class="text-sm text-slate-600">Credit Amount</span>
                  <span class="text-lg font-bold text-slate-900" id="creditAmount">$0</span>
                </div>
                <div class="flex justify-between">
                  <span class="text-sm text-slate-600">Next Order Discount</span>
                  <span class="text-lg font-bold text-emerald-600" id="creditDiscount">0%</span>
                </div>
                <div class="flex justify-between pt-2 border-t border-emerald-200">
                  <span class="text-sm font-bold text-slate-700">Total Value</span>
                  <span class="text-lg font-bold text-slate-900" id="creditTotalValue">$0</span>
                </div>
              </div>
            </div>
          </div>

          <div class="bg-slate-50 p-6 rounded-xl border border-slate-200">
            <h3 class="text-xs font-bold text-slate-600 uppercase tracking-wider mb-3 flex items-center gap-2">
              <i data-lucide="message-square" class="w-4 h-4"></i> Suggested Script
            </h3>
            <p class="text-sm text-slate-700 leading-relaxed" id="scriptTemplate"></p>
          </div>
        </div>
      </div>
    </section>

    <section id="view-agents" class="view-content hidden">
      <h1 class="text-3xl font-bold text-slate-900 mb-8">Agent Performance Dashboard</h1>
      <div class="glass-card p-10">
        <p class="text-slate-500">Individual agent metrics and performance tracking coming soon.</p>
      </div>
    </section>

    <section id="view-knowledge" class="view-content hidden">
      <div class="mb-8">
        <h1 class="text-3xl font-bold text-slate-900 mb-2">Knowledge Base</h1>
        <p class="text-slate-500">Quick reference guides and response templates for common scenarios.</p>
      </div>

      <div class="flex gap-3 mb-8 bg-white p-2 rounded-xl border border-slate-200 w-fit">
        <button onclick="scrollToSection('kb-retention')" class="px-4 py-2 rounded-lg text-sm font-semibold text-slate-600 hover:bg-slate-50 transition-all flex items-center gap-2">
          <i data-lucide="percent" class="w-4 h-4"></i> Retention
        </button>
        <button onclick="scrollToSection('kb-returns')" class="px-4 py-2 rounded-lg text-sm font-semibold text-slate-600 hover:bg-slate-50 transition-all flex items-center gap-2">
          <i data-lucide="rotate-ccw" class="w-4 h-4"></i> Returns
        </button>
        <button onclick="scrollToSection('kb-warranty')" class="px-4 py-2 rounded-lg text-sm font-semibold text-slate-600 hover:bg-slate-50 transition-all flex items-center gap-2">
          <i data-lucide="shield" class="w-4 h-4"></i> Warranty
        </button>
        <button onclick="scrollToSection('kb-escalation')" class="px-4 py-2 rounded-lg text-sm font-semibold text-slate-600 hover:bg-slate-50 transition-all flex items-center gap-2">
          <i data-lucide="alert-triangle" class="w-4 h-4"></i> Escalation
        </button>
      </div>

      <div id="kb-retention" class="glass-card p-10 mb-8">
        <h2 class="text-xl font-bold text-slate-900 mb-6 flex items-center gap-2">
          <i data-lucide="percent" class="w-5 h-5 text-blue-600"></i> Retention Offers
        </h2>
        
        <table class="kb-table">
          <thead>
            <tr>
              <th>Order Value</th>
              <th>Refund Option</th>
              <th>Credit Option</th>
              <th>Next Order Discount</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Under $100</strong></td>
              <td>20% refund</td>
              <td>$35 store credit</td>
              <td>Up to 30% off next order</td>
            </tr>
            <tr>
              <td><strong>$100 - $149</strong></td>
              <td>25% refund</td>
              <td>$50 store credit</td>
              <td>Up to 30% off next order</td>
            </tr>
            <tr>
              <td><strong>$150+</strong></td>
              <td>30% refund</td>
              <td>$60 store credit</td>
              <td>Up to 30% off next order</td>
            </tr>
          </tbody>
        </table>

        <div class="mt-8 space-y-4">
          <h3 class="text-sm font-bold text-slate-700 uppercase tracking-wider">Response Templates</h3>
          
          <div class="kb-template p-6 rounded-xl" onclick="copyTemplate(this)">
            <div class="copy-hint text-xs font-bold text-slate-400 uppercase tracking-wider">Click to Copy</div>
            <p class="text-xs font-bold text-blue-600 uppercase tracking-wider mb-2">Standard Retention Offer</p>
            <p class="text-sm text-slate-700">Hi [Name], I understand you'd like to cancel your order. We'd really love to keep you as a customer! I can offer you either a [X%] refund plus a discount code for your next purchase, or $[XX] in store credit with the same discount. Which would work better for you?</p>
          </div>

          <div class="kb-template p-6 rounded-xl" onclick="copyTemplate(this)">
            <div class="copy-hint text-xs font-bold text-slate-400 uppercase tracking-wider">Click to Copy</div>
            <p class="text-xs font-bold text-emerald-600 uppercase tracking-wider mb-2">Empathetic Approach</p>
            <p class="text-sm text-slate-700">I completely understand your frustration, [Name]. Before we process the cancellation, I'd like to make this right. Let me offer you [retention offer details]. Would either of these options help turn this experience around?</p>
          </div>
        </div>
      </div>

      <div id="kb-returns" class="glass-card p-10 mb-8">
        <h2 class="text-xl font-bold text-slate-900 mb-6 flex items-center gap-2">
          <i data-lucide="rotate-ccw" class="w-5 h-5 text-orange-600"></i> Return Process
        </h2>
        
        <table class="kb-table">
          <thead>
            <tr>
              <th>Timeframe</th>
              <th>Condition</th>
              <th>Process</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Within 30 Days</strong></td>
              <td>Unopened & unused</td>
              <td>Full refund via original payment method</td>
            </tr>
            <tr>
              <td><strong>31-60 Days</strong></td>
              <td>Unopened & unused</td>
              <td>Store credit only</td>
            </tr>
            <tr>
              <td><strong>After 60 Days</strong></td>
              <td>Any condition</td>
              <td>No returns accepted (warranty claims only)</td>
            </tr>
          </tbody>
        </table>

        <div class="mt-8 space-y-4">
          <h3 class="text-sm font-bold text-slate-700 uppercase tracking-wider">Return Templates</h3>
          
          <div class="kb-template p-6 rounded-xl" onclick="copyTemplate(this)">
            <div class="copy-hint text-xs font-bold text-slate-400 uppercase tracking-wider">Click to Copy</div>
            <p class="text-xs font-bold text-orange-600 uppercase tracking-wider mb-2">Return Authorization</p>
            <p class="text-sm text-slate-700">I've processed your return request. Your RMA number is [XXXXX]. Please ship the item back to us at [address]. Once we receive and inspect it, we'll process your refund within 3-5 business days.</p>
          </div>
        </div>
      </div>

      <div id="kb-warranty" class="glass-card p-10 mb-8">
        <h2 class="text-xl font-bold text-slate-900 mb-6 flex items-center gap-2">
          <i data-lucide="shield" class="w-5 h-5 text-purple-600"></i> Warranty Claims
        </h2>
        
        <table class="kb-table">
          <thead>
            <tr>
              <th>Issue Type</th>
              <th>Coverage Period</th>
              <th>Resolution</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Manufacturing Defect</strong></td>
              <td>Lifetime warranty</td>
              <td>Free replacement, no questions asked</td>
            </tr>
            <tr>
              <td><strong>Damage in Transit</strong></td>
              <td>Within 7 days of delivery</td>
              <td>Free replacement with photo proof</td>
            </tr>
            <tr>
              <td><strong>Normal Wear & Tear</strong></td>
              <td>Not covered</td>
              <td>Offer 20% discount on replacement</td>
            </tr>
          </tbody>
        </table>

        <div class="mt-8 space-y-4">
          <h3 class="text-sm font-bold text-slate-700 uppercase tracking-wider">Warranty Templates</h3>
          
          <div class="kb-template p-6 rounded-xl" onclick="copyTemplate(this)">
            <div class="copy-hint text-xs font-bold text-slate-400 uppercase tracking-wider">Click to Copy</div>
            <p class="text-xs font-bold text-purple-600 uppercase tracking-wider mb-2">Warranty Approval</p>
            <p class="text-sm text-slate-700">I'm sorry to hear about the issue with your product. This is definitely covered under our lifetime warranty. I'm sending you a replacement right away at no cost. You should receive tracking information within 24 hours.</p>
          </div>
        </div>
      </div>

      <div id="kb-escalation" class="glass-card p-10">
        <h2 class="text-xl font-bold text-slate-900 mb-6 flex items-center gap-2">
          <i data-lucide="alert-triangle" class="w-5 h-5 text-red-600"></i> Escalation Guidelines
        </h2>
        
        <table class="kb-table">
          <thead>
            <tr>
              <th>Scenario</th>
              <th>Action Required</th>
              <th>Escalate To</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Legal Threats</strong></td>
              <td>Do not engage further</td>
              <td>Team Lead immediately</td>
            </tr>
            <tr>
              <td><strong>Refund Over $500</strong></td>
              <td>Document case thoroughly</td>
              <td>Team Lead for approval</td>
            </tr>
            <tr>
              <td><strong>Abusive Language</strong></td>
              <td>Issue warning, then escalate</td>
              <td>Team Lead if continues</td>
            </tr>
            <tr>
              <td><strong>Technical Issue</strong></td>
              <td>Gather all error details</td>
              <td>Technical Support team</td>
            </tr>
          </tbody>
        </table>

        <div class="mt-8 space-y-4">
          <h3 class="text-sm font-bold text-slate-700 uppercase tracking-wider">Escalation Templates</h3>
          
          <div class="kb-template p-6 rounded-xl" onclick="copyTemplate(this)">
            <div class="copy-hint text-xs font-bold text-slate-400 uppercase tracking-wider">Click to Copy</div>
            <p class="text-xs font-bold text-red-600 uppercase tracking-wider mb-2">Escalation Notice</p>
            <p class="text-sm text-slate-700">I want to make sure you get the best resolution possible. Let me connect you with my team lead who has additional authority to help with your situation. They'll be with you shortly.</p>
          </div>
        </div>
      </div>
    </section>

    <section id="view-quality" class="view-content hidden">
      <h1 class="text-3xl font-bold text-slate-900 mb-8">Quality Assurance Metrics</h1>
      <div class="glass-card p-10">
        <p class="text-slate-500">QA scoring system and audit results coming soon.</p>
      </div>
    </section>

    <section id="view-schedule" class="view-content hidden">
      <div class="flex justify-between items-end mb-8">
        <div>
          <h1 class="text-3xl font-bold text-slate-900">Team Schedule</h1>
          <p class="text-slate-500 mt-1">Weekly coverage overview with automatic timezone conversion</p>
        </div>
        
        <div class="flex items-center gap-4">
          <!-- Week Range Selector -->
          <div class="flex items-center gap-2 bg-white border border-slate-200 rounded-xl px-4 py-2">
            <button onclick="previousWeek()" class="text-slate-600 hover:text-slate-900 transition-colors">
              <i data-lucide="chevron-left" class="w-5 h-5"></i>
            </button>
            <div class="text-center px-4">
              <p class="text-xs font-bold text-slate-400 uppercase tracking-wider">Week of</p>
              <p class="text-sm font-semibold text-slate-900" id="week-range">Loading...</p>
            </div>
            <button onclick="nextWeek()" class="text-slate-600 hover:text-slate-900 transition-colors">
              <i data-lucide="chevron-right" class="w-5 h-5"></i>
            </button>
          </div>

          <!-- Timezone Switcher -->
          <div class="timezone-switch">
            <button class="timezone-btn active" onclick="changeTimezone('Manila')" id="tz-manila">Manila (PHT)</button>
            <button class="timezone-btn" onclick="changeTimezone('Dubai')" id="tz-dubai">Dubai (GST)</button>
            <button class="timezone-btn" onclick="changeTimezone('CST')" id="tz-cst">CST</button>
            <button class="timezone-btn" onclick="changeTimezone('EST')" id="tz-est">EST</button>
          </div>
        </div>
      </div>

      <!-- Schedule Grid -->
      <div class="glass-card p-0 overflow-hidden mb-6">
        <div class="grid grid-cols-8 border-b border-slate-200 bg-slate-50">
          <div class="p-4 border-r border-slate-200">
            <p class="text-xs font-bold text-slate-600 uppercase tracking-wider">Team Member</p>
          </div>
          <div class="p-4 border-r border-slate-200 text-center" id="day-header-0">
            <p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">Day 1</p>
            <p class="text-xs font-semibold text-slate-900 mt-1">Date</p>
          </div>
          <div class="p-4 border-r border-slate-200 text-center" id="day-header-1">
            <p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">Day 2</p>
            <p class="text-xs font-semibold text-slate-900 mt-1">Date</p>
          </div>
          <div class="p-4 border-r border-slate-200 text-center" id="day-header-2">
            <p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">Day 3</p>
            <p class="text-xs font-semibold text-slate-900 mt-1">Date</p>
          </div>
          <div class="p-4 border-r border-slate-200 text-center" id="day-header-3">
            <p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">Day 4</p>
            <p class="text-xs font-semibold text-slate-900 mt-1">Date</p>
          </div>
          <div class="p-4 border-r border-slate-200 text-center" id="day-header-4">
            <p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">Day 5</p>
            <p class="text-xs font-semibold text-slate-900 mt-1">Date</p>
          </div>
          <div class="p-4 border-r border-slate-200 text-center" id="day-header-5">
            <p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">Day 6</p>
            <p class="text-xs font-semibold text-slate-900 mt-1">Date</p>
          </div>
          <div class="p-4 text-center" id="day-header-6">
            <p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">Day 7</p>
            <p class="text-xs font-semibold text-slate-900 mt-1">Date</p>
          </div>
        </div>

        <!-- Schedule Rows will be generated dynamically -->
        <div id="schedule-grid"></div>
      </div>

      <!-- Summary Stats -->
      <div class="grid grid-cols-4 gap-6 mt-6">
        <div class="glass-card p-6">
          <p class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">Total Scheduled Hours</p>
          <p class="text-3xl font-bold text-slate-900" id="total-hours">0</p>
          <p class="text-xs text-slate-500 mt-1">Per week</p>
        </div>
        <div class="glass-card p-6">
          <p class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">Coverage Rate</p>
          <p class="text-3xl font-bold text-emerald-600" id="coverage-rate">0%</p>
          <p class="text-xs text-slate-500 mt-1">All shifts covered</p>
        </div>
        <div class="glass-card p-6">
          <p class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">Active Employees</p>
          <p class="text-3xl font-bold text-slate-900" id="active-employees">0</p>
          <p class="text-xs text-slate-500 mt-1" id="employee-breakdown">-</p>
        </div>
        <div class="glass-card p-6">
          <p class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">Avg Hours/Employee</p>
          <p class="text-3xl font-bold text-blue-600" id="avg-hours">0</p>
          <p class="text-xs text-slate-500 mt-1">Per week</p>
        </div>
      </div>
    </section>

    <section id="view-settings" class="view-content hidden">
      <h1 class="text-3xl font-bold text-slate-900 mb-8">Portal Settings</h1>
      <div class="glass-card p-10 max-w-xl">
        <div class="space-y-6">
            <div>
                <label class="text-[11px] font-bold text-slate-400 uppercase tracking-widest block mb-2">Max Response Wait Time (sec)</label>
                <input type="number" value="45" class="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:border-slate-900 transition-all">
            </div>
            <div>
                <label class="text-[11px] font-bold text-slate-400 uppercase tracking-widest block mb-2">Notification Sound</label>
                <select class="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl text-sm">
                    <option>Subtle Ping</option>
                    <option>Digital Alert</option>
                    <option>None</option>
                </select>
            </div>
            <button class="bg-slate-900 text-white w-full py-4 rounded-2xl font-bold text-sm uppercase tracking-widest hover:bg-slate-800 transition-all shadow-lg shadow-slate-200">Update Configuration</button>
        </div>
      </div>
    </section>

  </main>

  <script>
    // Schedule Data Structure (Manila PHT times)
    const scheduleData = [
      {
        name: 'JOSH',
        role: 'CSR',
        color: 'emerald',
        avatar: 'J',
        shifts: [
          { start: 19, end: 28 }, // Day 0 - 7pm to 4am (next day)
          { start: 19, end: 28 }, // Day 1
          { start: 19, end: 28 }, // Day 2
          { start: 19, end: 28 }, // Day 3
          { start: 19, end: 28 }, // Day 4
          null, // Day 5 - OFF
          null  // Day 6 - OFF
        ]
      },
      {
        name: 'CYCY',
        role: 'CSR',
        color: 'blue',
        avatar: 'C',
        shifts: [
          null, // Day 0 - OFF
          null, // Day 1 - OFF
          { start: 4, end: 13 }, // Day 2 - 4am to 1pm
          { start: 4, end: 13 }, // Day 3
          { start: 4, end: 13 }, // Day 4
          { start: 4, end: 13 }, // Day 5
          { start: 4, end: 13 }  // Day 6
        ]
      },
      {
        name: 'BACKUP 1',
        role: 'Backup',
        color: 'slate',
        avatar: 'B1',
        shifts: [
          { start: 4, end: 13 },  // 4am to 1pm
          { start: 4, end: 13 },
          { start: 4, end: 13 },
          { start: 4, end: 13 },
          { start: 4, end: 13 },
          null,
          null
        ]
      },
      {
        name: 'BACKUP 2',
        role: 'Backup',
        color: 'slate',
        avatar: 'B2',
        shifts: [
          null,
          null,
          { start: 19, end: 28 }, // 7pm to 4am (next day)
          { start: 19, end: 28 },
          { start: 19, end: 28 },
          { start: 19, end: 28 },
          { start: 19, end: 28 }
        ]
      },
      {
        name: 'Project Mgr.',
        role: 'Management',
        color: 'purple',
        avatar: 'PM',
        shifts: [
          { start: 10, end: 18, flexible: true }, // Manila time
          { start: 10, end: 18, flexible: true },
          { start: 10, end: 18, flexible: true },
          { start: 10, end: 18, flexible: true },
          { start: 10, end: 18, flexible: true },
          null,
          null
        ]
      }
    ];

    // Timezone configurations (offset from Manila PHT)
    const timezones = {
      Manila: { offset: 0, abbr: 'PHT', name: 'Manila' },
      Dubai: { offset: -4, abbr: 'GST', name: 'Dubai' },
      CST: { offset: -14, abbr: 'CST', name: 'CST' },
      EST: { offset: -13, abbr: 'EST', name: 'EST' }
    };

    let currentTimezone = 'Manila';
    let weekOffset = 0; // 0 = current week, -1 = last week, +1 = next week

    // Get start of week (Monday) with offset
    function getWeekStart() {
      const now = new Date();
      const day = now.getDay();
      const diff = now.getDate() - day + (day === 0 ? -6 : 1); // Adjust to Monday
      const monday = new Date(now.setDate(diff));
      monday.setDate(monday.getDate() + (weekOffset * 7));
      monday.setHours(0, 0, 0, 0);
      return monday;
    }

    // Update week range display
    function updateWeekRange() {
      const weekStart = getWeekStart();
      const weekEnd = new Date(weekStart);
      weekEnd.setDate(weekStart.getDate() + 6);
      
      const formatDate = (date) => {
        const month = date.toLocaleDateString('en-US', { month: 'short' });
        const day = date.getDate();
        return `${month} ${day}`;
      };
      
      const rangeText = `${formatDate(weekStart)} - ${formatDate(weekEnd)}`;
      document.getElementById('week-range').textContent = rangeText;
    }

    // Navigate to previous week
    function previousWeek() {
      weekOffset--;
      updateWeekRange();
      renderSchedule();
    }

    // Navigate to next week
    function nextWeek() {
      weekOffset++;
      updateWeekRange();
      renderSchedule();
    }

    // Format time with timezone adjustment
    function formatTime(hour, timezone) {
      const tz = timezones[timezone];
      let adjustedHour = hour + tz.offset;
      
      // Handle day overflow/underflow
      while (adjustedHour < 0) adjustedHour += 24;
      while (adjustedHour >= 24) adjustedHour -= 24;
      
      const period = adjustedHour >= 12 ? 'PM' : 'AM';
      const displayHour = adjustedHour === 0 ? 12 : adjustedHour > 12 ? adjustedHour - 12 : adjustedHour;
      
      return `${displayHour}:00 ${period}`;
    }

    // Calculate if day shifts due to timezone
    function getDayShift(dayIndex, hour, timezone) {
      const tz = timezones[timezone];
      const adjustedHour = hour + tz.offset;
      
      if (adjustedHour < 0) return -1;
      if (adjustedHour >= 24) return 1;
      return 0;
    }

    // Render schedule grid
    function renderSchedule() {
      const grid = document.getElementById('schedule-grid');
      const weekStart = getWeekStart();
      const today = new Date();
      today.setHours(0, 0, 0, 0);

      // Update day headers
      for (let i = 0; i < 7; i++) {
        const date = new Date(weekStart);
        date.setDate(weekStart.getDate() + i);
        
        const dayShift = getDayShift(i, 12, currentTimezone); // Use noon as reference
        const adjustedDate = new Date(date);
        adjustedDate.setDate(date.getDate() + dayShift);
        
        const dayName = adjustedDate.toLocaleDateString('en-US', { weekday: 'short' });
        const dateStr = adjustedDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
        
        const header = document.getElementById(`day-header-${i}`);
        header.innerHTML = `
          <p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">${dayName}</p>
          <p class="text-xs font-semibold text-slate-900 mt-1">${dateStr}</p>
        `;

        // Check if this is today
        adjustedDate.setHours(0, 0, 0, 0);
        if (adjustedDate.getTime() === today.getTime()) {
          header.parentElement.classList.add('today-column');
        } else {
          header.parentElement.classList.remove('today-column');
        }
      }

      // Render schedule rows
      let html = '';
      scheduleData.forEach(employee => {
        html += `<div class="grid grid-cols-8 border-b border-slate-100">`;
        
        // Employee info
        html += `
          <div class="p-4 border-r border-slate-100 bg-white flex items-center gap-3">
            <div class="w-8 h-8 rounded-full bg-${employee.color}-500 flex items-center justify-center text-white font-bold text-sm">${employee.avatar}</div>
            <div>
              <p class="font-semibold text-slate-900 text-sm">${employee.name}</p>
              <p class="text-xs text-slate-500">${employee.role}</p>
            </div>
          </div>
        `;

        // Shifts for each day
        for (let dayIdx = 0; dayIdx < 7; dayIdx++) {
          const shift = employee.shifts[dayIdx];
          const date = new Date(weekStart);
          date.setDate(weekStart.getDate() + dayIdx);
          date.setHours(0, 0, 0, 0);
          
          const isToday = date.getTime() === today.getTime();
          const bgClass = isToday ? 'today-column' : 'bg-white';
          
          if (!shift) {
            html += `<div class="p-2 border-r border-slate-100 flex items-center justify-center ${bgClass}">
              <div class="bg-slate-100 text-slate-400 px-3 py-2 rounded text-xs font-semibold text-center w-full">OFF</div>
            </div>`;
          } else {
            const startTime = formatTime(shift.start, currentTimezone);
            const endTime = formatTime(shift.end >= 24 ? shift.end - 24 : shift.end, currentTimezone);
            const hours = shift.end - shift.start;
            
            if (shift.flexible) {
              html += `<div class="p-2 border-r border-slate-100 flex items-center justify-center ${bgClass}">
                <div class="bg-${employee.color}-500 text-white px-3 py-2 rounded text-xs font-semibold text-center w-full">
                  <div class="font-bold">FLEXIBLE</div>
                  <div class="text-[10px] opacity-90 mt-1">${hours}H</div>
                </div>
              </div>`;
            } else {
              html += `<div class="p-2 border-r border-slate-100 flex items-center justify-center ${bgClass}">
                <div class="bg-${employee.color}-500 text-white px-3 py-2 rounded text-xs font-semibold text-center w-full">
                  <div class="font-bold">${startTime}</div>
                  <div class="text-[10px] opacity-90 mt-1">to ${endTime}</div>
                  <div class="text-[10px] opacity-75 mt-0.5">${hours}H</div>
                </div>
              </div>`;
            }
          }
        }

        html += `</div>`;
      });

      grid.innerHTML = html;
      updateStats();
      lucide.createIcons();
    }

    // Update statistics
    function updateStats() {
      let totalHours = 0;
      let agentHours = 0; // Only CSR hours
      let activeEmployees = new Set();
      let roleCount = {};

      scheduleData.forEach(employee => {
        let employeeHours = 0;
        employee.shifts.forEach(shift => {
          if (shift) {
            const hours = shift.end - shift.start;
            totalHours += hours;
            employeeHours += hours;
            
            // Only count CSR role for agent hours
            if (employee.role === 'CSR') {
              agentHours += hours;
            }
          }
        });
        
        if (employeeHours > 0) {
          activeEmployees.add(employee.name);
          roleCount[employee.role] = (roleCount[employee.role] || 0) + 1;
        }
      });

      // Display only agent (CSR) hours in Total Scheduled Hours
      document.getElementById('total-hours').textContent = agentHours.toFixed(1);
      document.getElementById('active-employees').textContent = activeEmployees.size;
      
      const breakdown = Object.entries(roleCount).map(([role, count]) => {
        const shortRole = role === 'CSR' ? 'Agent' : role === 'Backup' ? 'Backup' : 'PM';
        return `${count} ${shortRole}${count > 1 ? 's' : ''}`;
      }).join(', ');
      document.getElementById('employee-breakdown').textContent = breakdown;

      const avgHours = activeEmployees.size > 0 ? (totalHours / activeEmployees.size).toFixed(1) : 0;
      document.getElementById('avg-hours').textContent = avgHours;

      // Calculate coverage rate (simplified - all shifts covered in this example)
      document.getElementById('coverage-rate').textContent = '100%';
    }

    // Change timezone
    function changeTimezone(tz) {
      currentTimezone = tz;
      
      // Update button states
      document.querySelectorAll('.timezone-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      document.getElementById(`tz-${tz.toLowerCase()}`).classList.add('active');
      
      updateWeekRange();
      renderSchedule();
    }

    function calculateRetention() {
      const amount = parseFloat(document.getElementById('orderAmount').value) || 0;
      const existingDiscount = parseFloat(document.getElementById('existingDiscount').value) || 0;
      const resultsDiv = document.getElementById('results');

      if (amount <= 0) {
        resultsDiv.classList.add('hidden');
        return;
      }

      let refundPercent, creditAmount, nextOrderDiscount;

      if (amount < 100) {
        refundPercent = 20; creditAmount = 35; nextOrderDiscount = 30;
      } else if (amount >= 100 && amount < 150) {
        refundPercent = 25; creditAmount = 50; nextOrderDiscount = 30;
      } else {
        refundPercent = 30; creditAmount = 60; nextOrderDiscount = 30;
      }

      const maxAdditional = Math.max(0, 20 - existingDiscount);
      const adjustedDiscount = Math.min(nextOrderDiscount, maxAdditional + 10);
      const refundVal = (amount * refundPercent / 100).toFixed(2);
      const netVal = (amount - refundVal).toFixed(2);

      document.getElementById('refundAmount').textContent = `$${refundVal}`;
      document.getElementById('refundDiscount').textContent = `${adjustedDiscount}%`;
      document.getElementById('refundNetAmount').textContent = `$${netVal}`;
      document.getElementById('creditAmount').textContent = `$${creditAmount}`;
      document.getElementById('creditDiscount').textContent = `${adjustedDiscount}%`;
      document.getElementById('creditTotalValue').textContent = `$${creditAmount} + ${adjustedDiscount}% Off`;

      document.getElementById('scriptTemplate').innerHTML = `Hi Customer, I understand you'd like to cancel. We'd love to keep you with us! <br><br><strong>Option A:</strong> A refund of $${refundVal} plus a ${adjustedDiscount}% code.<br><strong>Option B:</strong> $${creditAmount} in store credit plus a ${adjustedDiscount}% code.<br><br>Which do you prefer?`;

      resultsDiv.classList.remove('hidden');
      lucide.createIcons();
    }

    function setView(viewId) {
      document.querySelectorAll('.nav-item').forEach(btn => btn.classList.remove('nav-active'));
      document.getElementById('btn-' + viewId).classList.add('nav-active');
      document.querySelectorAll('.view-content').forEach(view => view.classList.add('hidden'));
      document.getElementById('view-' + viewId).classList.remove('hidden');
      window.scrollTo(0,0);
      
      // Render schedule when switching to schedule view
      if (viewId === 'schedule') {
        renderSchedule();
      }
    }

    function scrollToSection(id) {
        document.getElementById(id).scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    function copyTemplate(el) {
        const text = el.querySelector('p:last-child').innerText;
        navigator.clipboard.writeText(text);
        const hint = el.querySelector('.copy-hint');
        hint.innerText = 'COPIED!';
        hint.classList.add('text-emerald-500');
        setTimeout(() => {
            hint.innerText = 'CLICK TO COPY';
            hint.classList.remove('text-emerald-500');
        }, 2000);
    }

    // Initialize
    lucide.createIcons();
    updateWeekRange();
    renderSchedule();
  </script>
</body>
</html>
