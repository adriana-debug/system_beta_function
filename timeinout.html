<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Employee Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/feather-icons"></script>
</head>
<body class="bg-gray-100 text-gray-800">

  <!-- Sidebar -->
  <div class="flex h-screen">
    <aside class="w-64 bg-white shadow-md flex flex-col">
      <div class="px-6 py-6 text-2xl font-bold border-b flex items-center gap-2">
        <i data-feather="users"></i>
        Dashboard
      </div>
      <nav class="flex-1 px-4 py-6 space-y-2">
        <a href="#" class="flex items-center p-2 rounded hover:bg-gray-200">
          <i data-feather="home" class="mr-2"></i> Overview
        </a>
        <a href="#" class="flex items-center p-2 rounded hover:bg-gray-200">
          <i data-feather="user-check" class="mr-2"></i> Timecard
        </a>
        <a href="#" class="flex items-center p-2 rounded hover:bg-gray-200">
          <i data-feather="file-text" class="mr-2"></i> Reports
        </a>
        <a href="#" class="flex items-center p-2 rounded hover:bg-gray-200">
          <i data-feather="settings" class="mr-2"></i> Settings
        </a>
      </nav>
      <div class="p-4 border-t">
        <button class="w-full flex items-center justify-center gap-2 p-2 bg-red-500 text-white rounded hover:bg-red-600">
          <i data-feather="log-out"></i> Logout
        </button>
      </div>
    </aside>

    <!-- Main Content -->
    <div class="flex-1 flex flex-col">
      <!-- Topbar -->
      <header class="bg-white shadow-md p-4 flex justify-between items-center">
        <h1 class="text-xl font-bold">Employee Timecard</h1>
        <span id="currentDateTime" class="text-gray-600"></span>
      </header>

      <!-- Content Area -->
      <main class="flex-1 p-6 overflow-y-auto">
        <!-- Placeholder for Next Pages -->
        <section class="mb-8">
          <h2 class="text-2xl font-semibold mb-4">Placeholder for Next Pages</h2>
          <div class="bg-white p-6 rounded shadow text-center text-gray-500">
            This section is reserved for the next pages.
          </div>
        </section>

        <!-- Time In/Out Records Section -->
        <section>
          <h2 class="text-2xl font-semibold mb-4">Employee Time In/Out</h2>
          <div class="bg-white p-6 rounded shadow">
            <!-- Time In/Out Buttons -->
            <div class="flex flex-wrap gap-4 mb-6">
              <button id="timeInBtn" class="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600">
                Time In
              </button>
              <button id="timeOutBtn" class="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600">
                Time Out
              </button>
            </div>

            <!-- Records Table -->
            <table class="w-full border-collapse">
              <thead>
                <tr class="bg-gray-200 text-left">
                  <th class="p-2 border">Employee Name</th>
                  <th class="p-2 border">Time In</th>
                  <th class="p-2 border">Time Out</th>
                  <th class="p-2 border">Duration</th>
                </tr>
              </thead>
              <tbody id="timeRecords">
                <!-- Dynamic Rows Will Appear Here -->
              </tbody>
            </table>
          </div>
        </section>
      </main>
    </div>
  </div>

  <script>
    feather.replace();

    // Show current date/time in header
    setInterval(() => {
      document.getElementById('currentDateTime').textContent =
        new Date().toLocaleString();
    }, 1000);

    // Timecard logic
    const recordsBody = document.getElementById('timeRecords');
    let timeIn = null;
    let interval = null;

    const employeeName = "John Doe"; // Placeholder name

    document.getElementById('timeInBtn').addEventListener('click', () => {
      timeIn = new Date();
      addRecordRow(employeeName, timeIn, null, "Running...");
      startDurationUpdate();
    });

    document.getElementById('timeOutBtn').addEventListener('click', () => {
      if (timeIn) {
        const timeOut = new Date();
        stopDurationUpdate(timeOut);
        timeIn = null;
      }
    });

    function addRecordRow(name, timeIn, timeOut, duration) {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td class="border p-2">${name}</td>
        <td class="border p-2">${timeIn.toLocaleTimeString()}</td>
        <td class="border p-2">${timeOut ? timeOut.toLocaleTimeString() : '-'}</td>
        <td class="border p-2 duration-cell">${duration}</td>
      `;
      recordsBody.appendChild(row);
    }

    function startDurationUpdate() {
      if (interval) clearInterval(interval);
      interval = setInterval(() => {
        const lastRow = recordsBody.lastElementChild;
        if (lastRow) {
          const durationCell = lastRow.querySelector('.duration-cell');
          const diff = Math.floor((new Date() - timeIn) / 1000);
          const hrs = Math.floor(diff / 3600);
          const mins = Math.floor((diff % 3600) / 60);
          const secs = diff % 60;
          durationCell.textContent = `${hrs}h ${mins}m ${secs}s`;
        }
      }, 1000);
    }

    function stopDurationUpdate(timeOut) {
      clearInterval(interval);
      const lastRow = recordsBody.lastElementChild;
      if (lastRow) {
        lastRow.cells[2].textContent = timeOut.toLocaleTimeString();
      }
    }
  </script>
</body>
</html>
