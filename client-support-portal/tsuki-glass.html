<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support Admin | DiamondAssets</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-main: #ffffff;
            --bg-sidebar: #fbfbfb; /* subtle off-white sidebar */
            --border-color: #e6e9ec;
            --text-primary: #0f1724; /* darker, crisp text */
            --text-secondary: #5b6570; /* muted secondary */
            --accent: #7b4123; /* brand color used as accent only */
            --saddle-brown: #7b4123;
            --coffee-bean: #1f1513;
            --porcelain: #fbfaf7;
            --rosy-granite: #9b908f;
            --muted: #6b7280;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { 
            font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; 
            background: var(--bg-main); 
            color: var(--text-primary);
                font-size: 13px; /* compact base size */
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
        }

        .wrapper { display: flex; min-height: 100vh; }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: var(--bg-sidebar);
            border-right: 1px solid var(--border-color);
            padding: 32px 24px;
            display: flex;
            flex-direction: column;
            position: fixed;
            height: 100vh;
        }

        .brand-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 40px;
        }

        .logo-dm { height: 35px; width: auto; }
        .logo-divider { width: 1px; height: 30px; background: var(--border-color); }
        .logo-tg { height: 66px; width: auto; opacity: 0.9; }

        .sidebar nav a {
            display: block;
            color: var(--text-secondary);
            text-decoration: none;
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 4px;
            transition: 0.2s;
            font-weight: 500;
            cursor: pointer;
        }

        .sidebar nav a:hover { background: #f8fafc; color: var(--saddle-brown); }
        .sidebar nav a.active { background: var(--porcelain); color: var(--saddle-brown); font-weight: 600; }

        .sidebar-footer {
            margin-top: auto;
            font-size: 10px;
            color: var(--text-secondary);
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }

        /* Main Content */
        .main { flex: 1; margin-left: 280px; padding: 60px; max-width: 1400px; }
        .view-section { display: none; }
        .view-section.active { display: block; }

        /* Titles */
        h1, h2, h3, h4, h5, h6 { margin: 0 0 0.5rem 0; font-family: 'Playfair Display', serif; color: var(--coffee-bean); }
        .clean-title {
            font-size: 2rem;
            font-weight: 700;
            letter-spacing: -0.02em;
            margin-bottom: 8px;
        }
        .clean-subtitle {
            color: var(--accent);
                font-size: 1.1rem; /* very compact heading */
            font-weight: 700;
            margin-bottom: 32px;
        }

        /* Grid & Cards */
        .quality-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
        }

        .chart-card {
            background: #fff;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 6px 18px rgba(15,23,42,0.04);
        }

        .chart-card h3 {
            font-size: 12px;
            text-transform: uppercase;
            color: var(--muted);
            margin-bottom: 18px;
            letter-spacing: 1px;
            border-bottom: 1px solid var(--porcelain);
            padding-bottom: 10px;
        }

        /* Table */
        .full-width { grid-column: span 2; }
        .table-wrapper { border: 1px solid var(--border-color); border-radius: 8px; overflow: hidden; margin-top: 10px; }
        .brand-table { width: 100%; border-collapse: collapse; }
        .brand-table th { 
            text-align: left; padding: 15px 20px; background: var(--porcelain);
            font-size: 10px; color: var(--text-secondary); text-transform: uppercase;
        }
        .brand-table td { padding: 18px 20px; border-top: 1px solid var(--border-color); font-size: 14px; }
        .status-tag { font-size: 11px; font-weight: 700; color: var(--saddle-brown); }

        /* KB article style */
        .kb-article { background: #fff; border: 1px solid var(--border-color); border-radius: 10px; padding: 20px; margin-top: 16px; }
        .kb-article p { color: var(--text-secondary); margin-bottom: 12px; }
        .kb-article ol { margin-left: 18px; color: var(--text-secondary); }

        /* Two-column Knowledge Base layout: left nav, right content */
        .kb-layout {
            display: grid;
            grid-template-columns: 260px 1fr;
            gap: 20px;
            width: 100%;
            align-items: start;
        }

        .kb-nav {
            background: transparent;
            border: 1px solid transparent;
            padding: 8px 0 0 0;
        }

        .kb-nav .kb-tree { padding-left: 0; }
        .kb-nav .parent { margin-bottom: 8px; }
        .kb-nav a { display: block; padding: 6px 10px; border-radius: 6px; font-size: 13px; }
        .kb-nav a.active { background: #f1f5f9; color: var(--accent); font-weight: 700; }

        .kb-content { min-width: 0; }
        .kb-content .kb-article { margin-top: 0; }

        @media (max-width: 900px) {
            .kb-layout { grid-template-columns: 1fr; }
            .kb-nav { order: 2; }
            .kb-content { order: 1; }
        }

        /* Compact agent-specific styles: show a subtle card border and tighten spacing */
        #view-agents .chart-card { border: 1px solid var(--border-color); box-shadow: 0 2px 6px rgba(15,23,42,0.03); background: #fff; padding: 10px; border-radius: 8px; }
        #view-agents .table-wrapper { border: none; box-shadow: none; margin-top: 6px; }
        #view-agents .brand-table { width: 100%; border-collapse: collapse; }
        #view-agents .brand-table th { padding: 6px 8px; font-size: 11px; background: transparent; color: var(--text-secondary); border-bottom: 1px solid var(--border-color); }
        #view-agents .brand-table td { padding: 6px 8px; font-size: 12px; border-top: none; border-bottom: 1px solid rgba(0,0,0,0.04); }
        #view-agents .brand-table td ul { margin: 0; padding-left: 14px; }
        #view-agents .chart-card h3 { font-size: 11px; margin-bottom: 8px; }
        #view-agents .clean-subtitle { margin-bottom: 12px; font-size: 11px; }

        /* Knowledge Base Tree */
        .kb-tree { list-style: none; padding-left: 0; }
        .kb-tree li { margin: 10px 0; border-left: 2px solid var(--border-color); padding-left: 15px; }
        .kb-tree .parent { font-weight: 700; color: var(--coffee-bean); margin-bottom: 12px; font-size: 16px; border-left: none; padding-left: 0;}
        .kb-tree ul { list-style: none; padding-left: 10px; }
        .kb-tree a { text-decoration: none; color: var(--text-secondary); font-size: 14px; transition: 0.2s; }
        .kb-tree a:hover { color: var(--saddle-brown); }

        .placeholder-content { padding: 40px; border: 1px solid var(--border-color); border-radius: 12px; color: var(--text-secondary); }
    </style>
</head>

<body>
    <div class="wrapper">
        <aside class="sidebar">
            <div class="brand-header">
                <img src="https://digitalmindsbpo.com/storage/2018/11/cropped-dm-favicon.png" alt="Digital Minds" class="logo-dm">
                <div class="logo-divider"></div>
                <img src="https://s3-eu-west-1.amazonaws.com/tpd/logos/667c9d27460fbc92b66d3475/0x0.png" alt="tsukiglass" class="logo-tg">
            </div>

            <nav id="sidebar-nav">
                <a onclick="switchView('dashboard')" class="active" id="link-dashboard">Dashboard</a>
                <a onclick="switchView('tickets')" id="link-tickets">Tickets</a>
                <a onclick="switchView('agents')" id="link-agents">Agents</a>
                <a onclick="switchView('quality')" id="link-quality">Quality</a>
                <a onclick="switchView('knowledge')" id="link-knowledge">Knowledge Base</a>
                <a onclick="switchView('settings')" id="link-settings">Settings</a>
            </nav>

            <div class="sidebar-footer">
                &copy; 2025 DMI — Internal Use Only
            </div>
        </aside>

        <main class="main">
            <div id="view-dashboard" class="view-section active">
                <h1 class="clean-title">Operational Overview</h1>
                <p class="clean-subtitle">Key Performance Indicators</p>
                <div class="placeholder-content">General analytics dashboard summary.</div>
            </div>

            <div id="view-quality" class="view-section">
                <h1 class="clean-title">Quality Assurance</h1>
                <p class="clean-subtitle">Compliance & Accuracy Tracking</p>

                <div class="quality-grid">
                    <div class="chart-card">
                        <h3>Defect Pareto Analysis</h3>
                        <div id="pareto_chart" style="height: 300px;"></div>
                    </div>
                    <div class="chart-card">
                        <h3>Error Rate Trend</h3>
                        <div id="trend_chart" style="height: 300px;"></div>
                    </div>
                    <div class="chart-card">
                        <h3>Shipping Integrity</h3>
                        <div id="pie_chart" style="height: 300px;"></div>
                    </div>
                    <div class="chart-card">
                        <h3>Department Returns</h3>
                        <div id="bar_chart" style="height: 300px;"></div>
                    </div>

                    <div class="full-width chart-card">
                        <h3>Operational Log</h3>
                        <div class="table-wrapper">
                            <table class="brand-table">
                                <thead>
                                    <tr>
                                        <th>Defect Profile</th>
                                        <th>Volume</th>
                                        <th>Cost Impact</th>
                                        <th>Escalation</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr><td><b>Expedited Delay</b></td><td>214</td><td>$8,560</td><td class="status-tag">HIGH</td></tr>
                                    <tr><td><b>Item Damage</b></td><td>42</td><td>$12,100</td><td class="status-tag">CRITICAL</td></tr>
                                    <tr><td><b>SKU Mismatch</b></td><td>124</td><td>$6,820</td><td class="status-tag">MEDIUM</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <div id="view-knowledge" class="view-section">
                <h1 class="clean-title">Knowledge Base</h1>
                <p class="clean-subtitle">Internal SOPs & Documentation</p>
                
                <div class="kb-layout">
                    <aside class="kb-nav">
                        <h3 class="parent">Contents</h3>
                        <ul class="kb-tree">
                            <li class="parent">Standard Operating Procedures</li>
                            <li>
                                <ul>
                                    <li><a href="#" data-target="order-fulfillment" onclick="showKbArticle('order-fulfillment', this);return false;">Order Fulfillment Process</a></li>
                                    <li><a href="#" data-target="returns-policy" onclick="showKbArticle('returns-policy', this);return false;">Returns & Exchanges Handling</a></li>
                                    <li><a href="#" data-target="escalation-protocol" onclick="showKbArticle('escalation-protocol', this);return false;">Escalation Protocol</a></li>
                                </ul>
                            </li>
                            <li class="parent">Technical Guides</li>
                            <li>
                                <ul>
                                    <li><a href="#" data-target="inventory-tool" onclick="showKbArticle('inventory-tool', this);return false;">Inventory Management Tool</a></li>
                                    <li><a href="#" data-target="shipping-labels" onclick="showKbArticle('shipping-labels', this);return false;">Shipping Label Integration</a></li>
                                    <li><a href="#" data-target="crm-basics" onclick="showKbArticle('crm-basics', this);return false;">CRM Usage Basics</a></li>
                                </ul>
                            </li>
                            <li class="parent">Agent SOPs</li>
                            <li>
                                <ul>
                                    <li><a href="#" data-target="call-handling" onclick="showKbArticle('call-handling', this);return false;">Call Handling Best Practices</a></li>
                                    <li><a href="#" data-target="high-value-shipping" onclick="showKbArticle('high-value-shipping', this);return false;">High-Value Shipping</a></li>
                                </ul>
                            </li>
                        </ul>
                    </aside>

                    <section class="kb-content">
                        <div id="order-fulfillment" class="kb-article chart-card" style="display:none;">
                            <h3>Order Fulfillment Process</h3>
                            <p>Overview of order picking, packing, and dispatch steps to ensure timely fulfillment.</p>
                            <ol>
                                <li>Verify order details and payment status.</li>
                                <li>Pick items using the warehouse picklist and confirm SKU match.</li>
                                <li>Pack securely and generate shipping label.</li>
                                <li>Mark order as dispatched and notify customer.</li>
                            </ol>
                        </div>

                        <div id="returns-policy" class="kb-article chart-card" style="display:none;">
                            <h3>Returns & Exchanges Handling</h3>
                            <p>Policy summary and step-by-step handling instructions for returned items.</p>
                            <ol>
                                <li>Confirm return eligibility and RMA.</li>
                                <li>Inspect and record condition; process refund or replacement.</li>
                                <li>Update internal trackers and marketplace cases if applicable.</li>
                            </ol>
                        </div>

                        <div id="escalation-protocol" class="kb-article chart-card" style="display:none;">
                            <h3>Escalation Protocol</h3>
                            <p>When and how to escalate cases to supervisors or external teams.</p>
                            <ol>
                                <li>Gather order, tracking, and communication logs.</li>
                                <li>Document the reason for escalation clearly.</li>
                                <li>Contact supervisor and attach supporting evidence.</li>
                            </ol>
                        </div>

                        <div id="inventory-tool" class="kb-article chart-card" style="display:none;">
                            <h3>Inventory Management Tool</h3>
                            <p>Quick guide to common inventory operations and troubleshooting tips.</p>
                        </div>

                        <div id="shipping-labels" class="kb-article chart-card" style="display:none;">
                            <h3>Shipping Label Integration</h3>
                            <p>Steps to generate and verify carrier labels and tracking information.</p>
                        </div>

                        <div id="crm-basics" class="kb-article chart-card" style="display:none;">
                            <h3>CRM Usage Basics</h3>
                            <p>How to search contacts, log interactions, and attach order notes.</p>
                        </div>

                        <div id="call-handling" class="kb-article chart-card" style="display:none;">
                            <h3>Call Handling Best Practices</h3>
                            <p>Opening scripts, hold etiquette, and wrap-up checklist for agents.</p>
                        </div>

                        <div id="high-value-shipping" class="kb-article chart-card" style="display:none;">
                            <h3>High-Value Shipping</h3>
                            <p>Requirements for signature, insurance, and special packaging for high-value items.</p>
                        </div>

                        <!-- default visible sample article -->
                        <div id="sample-article" class="kb-article chart-card">
                            <h3>Sample Article — Processing Returns</h3>
                            <p>This article provides a concise, step-by-step guide for receiving and processing customer returns efficiently.</p>
                            <h4>Steps</h4>
                            <ol>
                                <li>Confirm return authorization (RMA) exists and matches the order.</li>
                                <li>Inspect returned item for damage; take photos and record condition.</li>
                                <li>Update order status in the Returns Tracker and attach evidence.</li>
                                <li>Issue refund or replacement within 3 business days according to policy.</li>
                            </ol>
                            <p><strong>Notes:</strong> For marketplace orders, also update the platform case (Seller Central / eBay) and keep communication logs attached to the order.</p>
                        </div>
                    </section>
                </div>
            </div>

            <div id="view-tickets" class="view-section">
                <h1 class="clean-title">Support Tickets</h1>
                <p class="clean-subtitle">Queue Management</p>
                <div class="placeholder-content">Ticket management system placeholder.</div>
            </div>
            <div id="view-agents" class="view-section">
                <h1 class="clean-title">Agent Performance Criteria</h1>
                <p class="clean-subtitle">Metrics and scoring guidance for agents</p>

                <div class="chart-card">
                    <div class="table-wrapper">
                        <table class="brand-table">
                            <thead>
                                <tr>
                                    <th>Criteria</th>
                                    <th>Description</th>
                                    <th>Guidelines</th>
                                    <th>Score</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Average wait time</td>
                                    <td>The average time it takes for an agent to accept or respond to an incoming calls.</td>
                                    <td>
                                        <ul>
                                            <li>30 seconds and below</li>
                                            <li>45 seconds</li>
                                            <li>60 seconds</li>
                                            <li>90 seconds</li>
                                            <li>120 seconds and above</li>
                                        </ul>
                                    </td>
                                    <td>
                                        <ul>
                                            <li>10 - Excellent</li>
                                            <li>8 - Good</li>
                                            <li>6 - Satisfactory</li>
                                            <li>4 - Needs Improvement</li>
                                            <li>2 - Poor</li>
                                        </ul>
                                    </td>
                                </tr>

                                <tr>
                                    <td>Average handling time</td>
                                    <td>The average duration an agent spends talking to a customer on a call, from answer to end (excluding hold unless actively talking).</td>
                                    <td>
                                        <ul>
                                            <li>6 minutes and below</li>
                                            <li>10 minutes</li>
                                            <li>12 minutes</li>
                                            <li>15 minutes</li>
                                            <li>30 minutes</li>
                                        </ul>
                                    </td>
                                    <td>
                                        <ul>
                                            <li>10 - Excellent</li>
                                            <li>8 - Good</li>
                                            <li>6 - Satisfactory</li>
                                            <li>4 - Needs Improvement</li>
                                            <li>2 - Poor</li>
                                        </ul>
                                    </td>
                                </tr>

                                <tr>
                                    <td>Missed Call</td>
                                    <td>The percentage of incoming calls that were not answered by any agent. This metric measures staffing effectiveness and agent availability.
                                        <p style="margin-top:8px;font-style:italic;">Missed Call (%) = (Number of Missed Calls ÷ Total Incoming Calls) × 100</p>
                                    </td>
                                    <td>
                                        <ul>
                                            <li>5% and below</li>
                                            <li>10%</li>
                                            <li>15%</li>
                                            <li>20%</li>
                                            <li>25% and above</li>
                                        </ul>
                                    </td>
                                    <td>
                                        <ul>
                                            <li>10 - Excellent</li>
                                            <li>8 - Good</li>
                                            <li>6 - Satisfactory</li>
                                            <li>4 - Needs Improvement</li>
                                            <li>2 - Poor</li>
                                        </ul>
                                    </td>
                                </tr>

                                <tr>
                                    <td>Recovery Rate (%)</td>
                                    <td>Number of abandoned carts that were converted into orders after the call.
                                        <p style="margin-top:8px;font-style:italic;">Recovery Rate (%) = (Total Abandoned Carts Called ÷ Recovered Orders) × 100</p>
                                    </td>
                                    <td>
                                        <ul>
                                            <li>20% and above</li>
                                            <li>15%</li>
                                            <li>10%</li>
                                            <li>5%</li>
                                            <li>0%</li>
                                        </ul>
                                    </td>
                                    <td>
                                        <ul>
                                            <li>10 - Excellent</li>
                                            <li>8 - Good</li>
                                            <li>6 - Satisfactory</li>
                                            <li>4 - Needs Improvement</li>
                                            <li>2 - Poor</li>
                                        </ul>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div id="view-settings" class="view-section">
                <h1 class="clean-title">Settings</h1>
                <p class="clean-subtitle">Configurations</p>
                <div class="placeholder-content">Admin settings placeholder.</div>
            </div>
        </main>
    </div>

    <script src="https://www.gstatic.com/charts/loader.js"></script>
    <script>
        function switchView(viewName) {
            document.querySelectorAll('.view-section').forEach(v => v.classList.remove('active'));
            document.getElementById('view-' + viewName).classList.add('active');
            document.querySelectorAll('#sidebar-nav a').forEach(l => l.classList.remove('active'));
            document.getElementById('link-' + viewName).classList.add('active');
            if (viewName === 'quality') setTimeout(drawCharts, 100);
        }

        google.charts.load('current', { packages: ['corechart'] });
        google.charts.setOnLoadCallback(drawCharts);

        function drawCharts() {
            const b = { brown: '#7b4123', mocha: '#4e4343', coffee: '#1f1513', granite: '#9b908f' };
            
            // Pareto
            var d1 = google.visualization.arrayToDataTable([['Issue', 'Freq', 'Cum'], ['Delay', 214, 52], ['SKU', 124, 78], ['Break', 42, 100]]);
            new google.visualization.ComboChart(document.getElementById('pareto_chart')).draw(d1, {
                series: { 0: {type: 'bars', color: b.brown}, 1: {type: 'line', color: b.mocha, targetAxisIndex: 1} },
                chartArea: {width: '85%', height: '75%'}, legend: 'none', backgroundColor: 'transparent'
            });

            // Trend
            var d2 = google.visualization.arrayToDataTable([['W', 'R'], ['W1', 4.5], ['W2', 3.8], ['W3', 3.2], ['W4', 2.9]]);
            new google.visualization.LineChart(document.getElementById('trend_chart')).draw(d2, {
                colors: [b.brown], curveType: 'function', chartArea: {width: '85%'}, legend: 'none'
            });

            // Pie
            var d3 = google.visualization.arrayToDataTable([['S', 'V'], ['Perfect', 85], ['Minor', 10], ['Major', 5]]);
            new google.visualization.PieChart(document.getElementById('pie_chart')).draw(d3, {
                pieHole: 0.6, colors: [b.coffee, b.brown, b.granite], chartArea: {width: '85%'}, legend: {position: 'bottom'}
            });

            // Bar
            var d4 = google.visualization.arrayToDataTable([['D', 'V'], ['Whse', 120], ['Log', 85], ['Ret', 34]]);
            new google.visualization.BarChart(document.getElementById('bar_chart')).draw(d4, {
                colors: [b.brown], chartArea: {width: '70%'}, legend: 'none'
            });
        }
        window.addEventListener('resize', drawCharts);
        
        // Knowledge Base article navigation
        function showKbArticle(id, linkEl) {
            document.querySelectorAll('.kb-article').forEach(a => a.style.display = 'none');
            const el = document.getElementById(id);
            if (el) el.style.display = 'block';
            document.querySelectorAll('.kb-nav a').forEach(a => a.classList.remove('active'));
            if (linkEl) linkEl.classList.add('active');
            if (el) el.scrollIntoView({behavior: 'smooth', block: 'start'});
        }

        document.addEventListener('DOMContentLoaded', function() {
            // activate first KB link if present
            const firstLink = document.querySelector('.kb-nav a');
            if (firstLink) { showKbArticle(firstLink.dataset.target || 'sample-article', firstLink); }
        });
    </script>
</body>
</html>