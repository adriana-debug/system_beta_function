<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>KPI Dashboard</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <!-- Feather Icons for dynamic icons -->
    <script src="https://unpkg.com/feather-icons"></script>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        /* Custom Tailwind Configuration */
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Roboto', 'sans-serif'],
                    },
                    colors: {
                        // Google-inspired colors
                        'google-blue': '#4285F4',
                        'google-green': '#34A853',
                        'google-red': '#EA4335',
                        'google-yellow': '#FBBC05',
                        // Base colors
                        'base-light': '#F5F5F5',
                        'base-dark': '#121212',
                        'card-light': '#FFFFFF',
                        'card-dark': '#1E1E1E',
                        'text-light': '#333333',
                        'text-dark': '#E0E0E0',
                        'border-light': '#E0E0E0',
                        'border-dark': '#333333',
                    },
                },
            },
        };

        /* Base styles */
        html {
            scroll-behavior: smooth;
        }

        body {
            /* Fallback background color */
            background-color: var(--tw-colors-base-light);
            color: var(--tw-colors-text-light);
            transition: background-color 0.3s, color 0.3s;
        }

        /* Dark Mode styles using the 'dark' class on body */
        body.dark {
            background-color: var(--tw-colors-base-dark);
            color: var(--tw-colors-text-dark);
        }

        /* Card styles (light mode) */
        .card {
            background-color: var(--tw-colors-card-light);
            border: 1px solid var(--tw-colors-border-light);
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06);
        }

        /* Card styles (dark mode) */
        body.dark .card {
            background-color: var(--tw-colors-card-dark);
            border: 1px solid var(--tw-colors-border-dark);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -4px rgba(0, 0, 0, 0.15);
        }

        /* Specific styles for the tab system */
        .tab-content {
            display: none;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .tab-content.active-tab-content {
            display: block;
            opacity: 1;
        }

        .tab-button {
            border-bottom: 3px solid transparent;
            transition: all 0.2s ease;
            padding: 0.5rem 0;
            margin: 0 1.5rem;
            cursor: pointer;
            color: #777;
        }

        .tab-button.active-tab {
            border-bottom-color: #4285F4;
            color: #4285F4;
            font-weight: 500;
        }

        /* Icon colors */
        .icon-metric-blue {
            color: #4285F4;
        }

        .icon-metric-green {
            color: #34A853;
        }

        .icon-metric-red {
            color: #EA4335;
        }

        /* Small screen adjustments */
        @media (max-width: 768px) {
            .tab-button {
                margin: 0 0.5rem;
                font-size: 0.875rem;
            }

            .tab-container {
                overflow-x: auto;
                white-space: nowrap;
                padding-bottom: 5px; /* space for scrollbar */
            }

            .tab-container::-webkit-scrollbar {
                height: 4px;
            }

            .tab-container::-webkit-scrollbar-thumb {
                background: #ccc;
                border-radius: 2px;
            }
        }
    </style>
</head>

<body class="font-sans min-h-screen p-4 md:p-8">

    <!-- Header / Navigation -->
    <header class="flex flex-col md:flex-row justify-between items-center mb-8 p-4 card rounded-xl">
        <!-- Logo -->
        <div class="flex items-center space-x-3 mb-4 md:mb-0">
            <!-- Logo will be updated by JS based on theme -->
            <img id="siteLogo" src="" alt="Company Logo" class="h-10 w-auto rounded-md" />
            <h1 class="text-2xl font-bold text-gray-800 dark:text-text-dark">KPI Dashboard</h1>
        </div>

        <!-- Utility Bar -->
        <div class="flex items-center space-x-4">
            <!-- Search Bar -->
            <div class="hidden sm:block relative">
                <input type="text" placeholder="Search..."
                    class="p-2 pl-10 rounded-full border border-border-light dark:border-border-dark bg-base-light dark:bg-card-dark focus:outline-none focus:ring-2 focus:ring-google-blue transition-colors text-sm w-48" />
                <i data-feather="search"
                    class="absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"></i>
            </div>

            <!-- Notifications -->
            <button
                class="p-2 rounded-full hover:bg-base-light dark:hover:bg-border-dark transition-colors text-gray-600 dark:text-text-dark">
                <i data-feather="bell" class="h-6 w-6"></i>
            </button>

            <!-- Theme Toggle -->
            <button id="themeToggle"
                class="p-2 rounded-full hover:bg-base-light dark:hover:bg-border-dark transition-colors text-gray-600 dark:text-text-dark">
                <!-- Icon will be set by JavaScript -->
            </button>

            <!-- User Avatar -->
            <div class="w-10 h-10 bg-google-blue rounded-full flex items-center justify-center text-white font-semibold cursor-pointer">
                JS
            </div>
        </div>
    </header>

    <!-- Main Content Area -->
    <main>
        <!-- Tab Navigation -->
        <div class="flex border-b border-border-light dark:border-border-dark mb-6 tab-container justify-center">
            <button class="tab-button active-tab" data-target="tab1">Overview</button>
            <button class="tab-button" data-target="tab2">Sales</button>
            <button class="tab-button" data-target="tab3">Marketing</button>
            <button class="tab-button" data-target="tab4">Operations</button>
        </div>

        <!-- Tab Content 1: Overview -->
        <div id="tab1" class="tab-content active-tab-content">
            <h2 class="text-xl font-semibold mb-4 text-google-blue dark:text-text-dark">Quarterly Overview</h2>

            <!-- Metrics Grid -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <!-- Metric Card 1: Revenue -->
                <div class="card p-6 rounded-xl flex items-center justify-between">
                    <div>
                        <p class="text-sm text-gray-500 dark:text-gray-400">Total Revenue</p>
                        <p class="text-3xl font-bold mt-1">$4.2M</p>
                        <p class="text-sm mt-1 text-google-green font-medium flex items-center">
                            <i data-feather="trending-up" class="h-4 w-4 mr-1"></i>
                            +12.5% vs Last Q
                        </p>
                    </div>
                    <div class="p-3 bg-google-blue/10 rounded-full icon-metric-blue">
                        <i data-feather="dollar-sign" class="h-6 w-6"></i>
                    </div>
                </div>

                <!-- Metric Card 2: New Users -->
                <div class="card p-6 rounded-xl flex items-center justify-between">
                    <div>
                        <p class="text-sm text-gray-500 dark:text-gray-400">New Signups</p>
                        <p class="text-3xl font-bold mt-1">1,890</p>
                        <p class="text-sm mt-1 text-google-yellow font-medium flex items-center">
                            <i data-feather="users" class="h-4 w-4 mr-1"></i>
                            +5.1% vs Last Q
                        </p>
                    </div>
                    <div class="p-3 bg-google-yellow/10 rounded-full text-google-yellow">
                        <i data-feather="user-plus" class="h-6 w-6"></i>
                    </div>
                </div>

                <!-- Metric Card 3: Conversion Rate -->
                <div class="card p-6 rounded-xl flex items-center justify-between">
                    <div>
                        <p class="text-sm text-gray-500 dark:text-gray-400">Conversion Rate</p>
                        <p class="text-3xl font-bold mt-1">4.7%</p>
                        <p class="text-sm mt-1 text-google-red font-medium flex items-center">
                            <i data-feather="trending-down" class="h-4 w-4 mr-1"></i>
                            -1.3% vs Last Q
                        </p>
                    </div>
                    <div class="p-3 bg-google-red/10 rounded-full icon-metric-red">
                        <i data-feather="zap" class="h-6 w-6"></i>
                    </div>
                </div>

                <!-- Metric Card 4: Active Projects -->
                <div class="card p-6 rounded-xl flex items-center justify-between">
                    <div>
                        <p class="text-sm text-gray-500 dark:text-gray-400">Active Projects</p>
                        <p class="text-3xl font-bold mt-1">34</p>
                        <p class="text-sm mt-1 text-google-green font-medium flex items-center">
                            <i data-feather="check-circle" class="h-4 w-4 mr-1"></i>
                            On Target
                        </p>
                    </div>
                    <div class="p-3 bg-google-green/10 rounded-full icon-metric-green">
                        <i data-feather="folder" class="h-6 w-6"></i>
                    </div>
                </div>
            </div>

            <!-- Charts and Data Tables -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Chart 1: Revenue by Month (Placeholder) -->
                <div class="lg:col-span-2 card p-6 rounded-xl">
                    <h3 class="text-lg font-medium mb-4 text-text-light dark:text-text-dark">Revenue Trend (Q3)</h3>
                    <div class="h-64 flex items-center justify-center bg-base-light dark:bg-border-dark rounded-lg border border-border-light dark:border-border-dark text-gray-500">
                        Chart Placeholder (Line/Bar Chart)
                    </div>
                </div>

                <!-- Chart 2: Goal Completion (Placeholder) -->
                <div class="card p-6 rounded-xl">
                    <h3 class="text-lg font-medium mb-4 text-text-light dark:text-text-dark">Goal Completion</h3>
                    <div class="h-64 flex items-center justify-center bg-base-light dark:bg-border-dark rounded-lg border border-border-light dark:border-border-dark text-gray-500">
                        Chart Placeholder (Donut Chart)
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab Content 2: Sales -->
        <div id="tab2" class="tab-content">
            <h2 class="text-xl font-semibold mb-4 text-google-red dark:text-text-dark">Sales Performance</h2>
            <div class="card p-6 rounded-xl h-96 flex items-center justify-center">
                Sales Data and Pipeline Placeholder
            </div>
        </div>

        <!-- Tab Content 3: Marketing -->
        <div id="tab3" class="tab-content">
            <h2 class="text-xl font-semibold mb-4 text-google-green dark:text-text-dark">Marketing Campaigns</h2>
            <div class="card p-6 rounded-xl h-96 flex items-center justify-center">
                Marketing KPIs and Campaign Results Placeholder
            </div>
        </div>

        <!-- Tab Content 4: Operations -->
        <div id="tab4" class="tab-content">
            <h2 class="text-xl font-semibold mb-4 text-google-yellow dark:text-text-dark">Operations Efficiency</h2>
            <div class="card p-6 rounded-xl h-96 flex items-center justify-center">
                Operations Metrics and Latency Data Placeholder
            </div>
        </div>
    </main>

    <!-- JavaScript Refactor -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- CONSTANTS ---
            // Placeholder URLs for the logo to demonstrate dynamic change
            const LIGHT_LOGO_URL = 'https://placehold.co/150x40/000000/FFFFFF?text=Light+Logo';
            const DARK_LOGO_URL = 'https://placehold.co/150x40/FFFFFF/000000?text=Dark+Logo';

            // --- DOM Elements ---
            const body = document.body;
            const themeToggleBtn = document.getElementById('themeToggle');
            const siteLogo = document.getElementById('siteLogo');
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');

            // Initialize feather icons for static icons
            feather.replace();

            /* ------------------ THEME TOGGLE LOGIC ------------------ */

            /**
             * Sets the theme (light or dark) and updates localStorage, button icon, and logo.
             * @param {boolean} isDark - True for dark mode, false for light mode.
             */
            function setTheme(isDark) {
                if (isDark) {
                    body.classList.add('dark');
                    localStorage.setItem('theme', 'dark');
                    // Change icon to Sun and logo to dark version
                    themeToggleBtn.innerHTML = feather.icons.sun.toSvg();
                    siteLogo.src = DARK_LOGO_URL;
                } else {
                    body.classList.remove('dark');
                    localStorage.setItem('theme', 'light');
                    // Change icon to Moon and logo to light version
                    themeToggleBtn.innerHTML = feather.icons.moon.toSvg();
                    siteLogo.src = LIGHT_LOGO_URL;
                }
            }

            // 1. Apply saved theme on initial load
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            // Determine initial state: saved theme, or system preference fallback
            const initialIsDark = savedTheme ? (savedTheme === 'dark') : prefersDark;
            setTheme(initialIsDark);

            // 2. Toggle theme on button click
            themeToggleBtn.addEventListener('click', () => {
                const isCurrentlyDark = body.classList.contains('dark');
                setTheme(!isCurrentlyDark); // Toggle the theme
            });


            /* ------------------ TAB SWITCHING LOGIC ------------------ */

            tabButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    // Remove active class from all buttons
                    tabButtons.forEach(b => b.classList.remove('active-tab'));
                    // Add active class to the clicked button
                    btn.classList.add('active-tab');

                    // Remove active class from all tab contents
                    tabContents.forEach(tab => tab.classList.remove('active-tab-content'));
                    
                    // Find and show the target tab content
                    const targetId = btn.dataset.target;
                    const targetContent = document.getElementById(targetId);
                    if (targetContent) {
                        targetContent.classList.add('active-tab-content');
                    }
                });
            });

            // Re-render feather icons that might have been added dynamically by tab switching logic
            // (though in this specific structure, only the header icons are initialized)
            feather.replace(); 
        });
    </script>
</body>

</html>
