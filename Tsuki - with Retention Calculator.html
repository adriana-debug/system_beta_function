<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <meta charset="UTF-8">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>
  
  <style>
    body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #1e293b; }
    .nav-active { background-color: #f1f5f9; color: #0f172a; border-right: 3px solid #0f172a; }
    .glass-card { background: white; border: 1px solid #e2e8f0; border-radius: 12px; transition: all 0.2s ease; }
    .glass-card:hover { border-color: #cbd5e1; box-shadow: 0 4px 12px rgba(0,0,0,0.03); }
    .hidden { display: none; }
    ::-webkit-scrollbar { width: 5px; }
    ::-webkit-scrollbar-track { background: #f1f5f9; }
    ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
    
    .kb-table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
    .kb-table th { background: #f1f5f9; color: #64748b; font-size: 10px; text-transform: uppercase; letter-spacing: 0.05em; padding: 12px; text-align: left; border: 1px solid #e2e8f0; }
    .kb-table td { padding: 16px; font-size: 13px; border: 1px solid #e2e8f0; vertical-align: top; line-height: 1.6; }
    .highlight-cell { background-color: #fffbeb; font-weight: 600; color: #92400e; }
    .action-cell { background-color: #eff6ff; color: #1e40af; }
    .success-cell { background-color: #ecfdf5; color: #065f46; }
    .warning-cell { background-color: #fef2f2; color: #991b1b; }
  </style>
</head>
<body class="flex">

  <aside class="w-64 h-screen bg-white border-r border-slate-200 fixed flex flex-col">
    <div class="p-6 border-b border-slate-100 mb-4">
      <div class="flex items-center gap-2">
        <div class="flex items-center">
          <img src="https://digitalmindsbpo.com/storage/2018/11/cropped-dm-favicon.png" alt="DMI Logo" class="h-16 w-auto">
        </div>
        <span class="mx-2 text-slate-400 font-bold">x</span> 
        <div class="flex items-center">
          <img src="https://cdn.faire.com/fastly/6ad8edf8d35066195c6f65e201910c54dfdd46da4b15faafb830b6ef9465bc83.png" alt="TsukiGlass Logo" class="h-24 w-auto">
        </div>
      </div>
    </div>
    
    <nav class="flex-1 px-3 space-y-1">
      <button onclick="setView('dashboard')" id="btn-dashboard" class="nav-item w-full flex items-center gap-3 px-4 py-3 text-sm font-medium text-slate-500 hover:bg-slate-50 rounded-lg transition-all nav-active">
        <i data-lucide="layout-dashboard" class="w-4 h-4"></i> Dashboard
      </button>
      <button onclick="setView('agents')" id="btn-agents" class="nav-item w-full flex items-center gap-3 px-4 py-3 text-sm font-medium text-slate-500 hover:bg-slate-50 rounded-lg transition-all">
        <i data-lucide="users" class="w-4 h-4"></i> Agent Performance
      </button>
      <button onclick="setView('quality')" id="btn-quality" class="nav-item w-full flex items-center gap-3 px-4 py-3 text-sm font-medium text-slate-500 hover:bg-slate-50 rounded-lg transition-all">
        <i data-lucide="shield-check" class="w-4 h-4"></i> Quality Metrics
      </button>
      <button onclick="setView('knowledge')" id="btn-knowledge" class="nav-item w-full flex items-center gap-3 px-4 py-3 text-sm font-medium text-slate-500 hover:bg-slate-50 rounded-lg transition-all">
        <i data-lucide="book-open" class="w-4 h-4"></i> Knowledge Base
      </button>
      <button onclick="setView('settings')" id="btn-settings" class="nav-item w-full flex items-center gap-3 px-4 py-3 text-sm font-medium text-slate-500 hover:bg-slate-50 rounded-lg transition-all">
        <i data-lucide="settings" class="w-4 h-4"></i> Settings
      </button>
    </nav>

    <div class="p-4 border-t border-slate-100">
      <div class="bg-slate-50 p-3 rounded-lg flex items-center gap-3">
        <div class="w-8 h-8 bg-slate-200 rounded-full flex items-center justify-center text-slate-600 text-xs font-bold">JD</div>
        <div class="overflow-hidden">
          <p class="text-xs font-bold text-slate-900 truncate">Gevene Tamon</p>
          <p class="text-[10px] text-slate-500 truncate font-medium">Project Manager</p>
        </div>
      </div>
    </div>
  </aside>

  <main class="ml-64 flex-1 p-10 min-h-screen">
    
    <section id="view-dashboard" class="view-content animate-in fade-in">
      <div class="mb-8">
        <h1 class="text-2xl font-bold text-slate-900">Operational Overview</h1>
        <p class="text-slate-500 text-sm">System-wide performance for the current billing cycle.</p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
        <div class="glass-card p-6">
          <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1">Total Inbound</p>
          <div class="flex items-end justify-between">
            <h2 class="text-2xl font-bold text-slate-900">1,000</h2>
            <span class="text-emerald-600 text-xs font-bold flex items-center"><i data-lucide="arrow-up-right" class="w-3 h-3"></i> 12%</span>
          </div>
        </div>
        <div class="glass-card p-6">
          <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1">Avg Handling Time</p>
          <div class="flex items-end justify-between">
            <h2 class="text-2xl font-bold text-slate-900">4m 12s</h2>
            <span class="text-rose-500 text-xs font-bold flex items-center"><i data-lucide="arrow-down-right" class="w-3 h-3"></i> 2%</span>
          </div>
        </div>
        <div class="glass-card p-6">
          <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1">CSAT Score</p>
          <div class="flex items-end justify-between">
            <h2 class="text-2xl font-bold text-slate-900">100.0%</h2>
            <span class="text-emerald-600 text-xs font-bold flex items-center"><i data-lucide="arrow-up-right" class="w-3 h-3"></i> 0.0%</span>
          </div>
        </div>
        <div class="glass-card p-6 bg-slate-900 text-white border-none">
          <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1">Active Agents</p>
          <div class="flex items-end justify-between">
            <h2 class="text-2xl font-bold">2</h2>
            <div class="w-2 h-2 bg-emerald-500 rounded-full animate-pulse mb-2"></div>
          </div>
        </div>
      </div>
      <div class="glass-card p-8 h-80 flex flex-col items-center justify-center text-slate-400 border-dashed border-2">
        <i data-lucide="bar-chart-3" class="w-12 h-12 mb-4 opacity-20"></i>
        <p class="text-sm font-medium">Analytics Visualization Placeholder</p>
      </div>
    </section>

    <section id="view-agents" class="view-content hidden animate-in">
        <h1 class="text-2xl font-bold text-slate-900 mb-8">Agent Performance</h1>
        <div class="glass-card overflow-hidden">
            <table class="w-full text-left">
              <thead class="bg-slate-50 border-b border-slate-200">
                <tr>
                  <th class="px-6 py-4 text-[10px] font-bold text-slate-400 uppercase">Agent Name</th>
                  <th class="px-6 py-4 text-[10px] font-bold text-slate-400 uppercase">Status</th>
                </tr>
              </thead>
              <tbody class="divide-y divide-slate-100">
                <tr>
                  <td class="px-6 py-4 text-sm font-semibold">Josh Reymill Tabilon</td>
                  <td class="px-6 py-4"><span class="px-2 py-1 bg-emerald-50 text-emerald-700 text-[10px] font-bold rounded">ONLINE</span></td>
                </tr>
               <tr>
                  <td class="px-6 py-4 text-sm font-semibold">Cynthia Philisse Ciruelos</td>
                  <td class="px-6 py-4"><span class="px-2 py-1 bg-emerald-50 text-emerald-700 text-[10px] font-bold rounded">OFFLINE</span></td>
                </tr>
              </tbody>
            </table>
          </div>
    </section>

    <section id="view-knowledge" class="view-content hidden">
      <div class="flex gap-8">
        <div class="w-1/4 space-y-4">
          <div class="relative">
            <i data-lucide="search" class="w-4 h-4 absolute left-3 top-3 text-slate-400"></i>
            <input type="text" placeholder="Search SOPs..." class="w-full pl-10 pr-4 py-2 bg-white border border-slate-200 rounded-lg text-sm outline-none focus:ring-2 focus:ring-slate-900/5">
          </div>
          <div class="space-y-2">
            <div class="p-4 bg-slate-900 text-white rounded-xl shadow-lg cursor-pointer" onclick="document.getElementById('shipping-matrix').scrollIntoView({behavior: 'smooth'})">
              <p class="text-xs font-bold">Shipping Address Modification</p>
              <p class="text-[10px] opacity-60">Customer Logistics</p>
            </div>
            <div class="p-4 border border-slate-200 rounded-xl hover:bg-slate-50 cursor-pointer transition-colors" onclick="document.getElementById('mod-unfulfilled').scrollIntoView({behavior: 'smooth'})">
              <p class="text-xs font-bold text-slate-900">Order Modification Unfulfilled</p>
              <p class="text-[10px] text-slate-500">Adding/Removing Items</p>
            </div>
            <div class="p-4 border border-slate-200 rounded-xl hover:bg-slate-50 cursor-pointer transition-colors" onclick="document.getElementById('order-status').scrollIntoView({behavior: 'smooth'})">
              <p class="text-xs font-bold text-slate-900">Order Status</p>
              <p class="text-[10px] text-slate-500">Customer Inquiries</p>
            </div>
            <div class="p-4 border border-slate-200 rounded-xl hover:bg-slate-50 cursor-pointer transition-colors" onclick="document.getElementById('cancellation').scrollIntoView({behavior: 'smooth'})">
              <p class="text-xs font-bold text-slate-900">Cancellation</p>
              <p class="text-[10px] text-slate-500">Order Cancellation Process</p>
            </div>
            <div class="p-4 border border-slate-200 rounded-xl hover:bg-slate-50 cursor-pointer transition-colors" onclick="document.getElementById('refund-returns').scrollIntoView({behavior: 'smooth'})">
              <p class="text-xs font-bold text-slate-900">Refund for Returns</p>
              <p class="text-[10px] text-slate-500">Return & Refund Policy</p>
            </div>
            <div class="p-4 border border-slate-200 rounded-xl hover:bg-slate-50 cursor-pointer transition-colors" onclick="document.getElementById('retention-calculator').scrollIntoView({behavior: 'smooth'})">
              <p class="text-xs font-bold text-slate-900">Retention Offer Calculator</p>
              <p class="text-[10px] text-slate-500">Interactive Tool</p>
            </div>
          </div>
        </div>

        <div class="flex-1 glass-card p-10 overflow-y-auto max-h-[85vh]">
          <!-- Shipping Address Modification -->
          <div id="shipping-matrix" class="mb-12">
            <div class="mb-6">
              <span class="px-2 py-1 bg-slate-100 text-slate-500 text-[10px] font-bold rounded uppercase tracking-widest mb-4 inline-block">Support Protocol</span>
              <h2 class="text-3xl font-bold text-slate-900 tracking-tight">Shipping Address Change Decision Matrix</h2>
            </div>
            <table class="kb-table">
              <thead>
                <tr><th>Decision / Status</th><th>Action / Next Step</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td>Customer requests a shipping address change</td>
                  <td class="highlight-cell">Check order status in Shopify</td>
                </tr>
                <tr>
                  <td>Is the order Fulfilled? ‚Üí <span class="text-rose-600 font-bold">Yes</span></td>
                  <td><div class="flex items-start gap-2"><i data-lucide="x-circle" class="w-4 h-4 text-rose-500 mt-1 shrink-0"></i><div><strong>Address modification not possible.</strong><br>Inform customer the order has shipped and provide tracking number.<br>Advise customer to contact the courier for address update.</div></div></td>
                </tr>
                <tr>
                  <td>Is the order Fulfilled? ‚Üí <span class="text-emerald-600 font-bold">No</span></td>
                  <td class="highlight-cell">Proceed ‚Äî order is Unfulfilled</td>
                </tr>
                <tr>
                  <td class="highlight-cell">Unfulfilled ‚Äî Request Address</td>
                  <td class="action-cell"><p class="text-[11px] font-bold uppercase mb-2 opacity-70">Internal Response Template:</p><div class="italic border-l-2 border-blue-200 pl-4 py-1">Hi [Customer Name],<br><br>Thank you for reaching out to Tsuki Glass Support!<br>We understand that you'd like to update your shipping address. Could you please provide us with your complete and correct address? Once we receive it, we'll coordinate with our warehouse team to check if the change can still be made before your order ships.</div></td>
                </tr>
                <tr>
                  <td>Customer responded with address?</td>
                  <td>Verify address via Google to ensure accuracy</td>
                </tr>
                <tr>
                  <td class="highlight-cell">Path A: Change is still possible</td>
                  <td class="action-cell">Proceed with address update based on order location</td>
                </tr>
                <tr>
                  <td>Is the order <strong>US-based</strong>?</td>
                  <td class="action-cell"><strong>Use OMS Modification:</strong><br>1. Place order on HOLD<br>2. Confirm old/new address<br>3. Edit address in OMS<br>4. Release HOLD and notify K&S via Slack</td>
                </tr>
                <tr>
                  <td>Is the order <strong>Non-US</strong>?</td>
                  <td class="action-cell"><strong>Use ERP Modification:</strong><br>1. Place order on HOLD<br>2. Confirm old/new address<br>3. Escalate to K&S team to verify sync</td>
                </tr>
                <tr>
                  <td>Has change been submitted?</td>
                  <td class="success-cell">K&S team confirms address modification synced successfully</td>
                </tr>
                <tr>
                  <td class="font-bold">Confirmation Phase</td>
                  <td class="success-cell"><p class="text-[11px] font-bold uppercase mb-2 opacity-70">Success Message Template:</p><div class="italic border-l-2 border-emerald-200 pl-4 py-1">Great news! We were able to update your shipping address to [NEW ADDRESS]. As soon as your order has been shipped, you will receive the tracking number.</div></td>
                </tr>
                <tr>
                  <td class="highlight-cell text-rose-700">Path B: Change no longer possible</td>
                  <td class="warning-cell"><p class="text-[11px] font-bold uppercase mb-2 opacity-70">Notification Template:</p><div class="italic border-l-2 border-rose-200 pl-4 py-1">While we can't guarantee that the shipping address can still be modified, I've already forwarded your request to our warehouse team.</div></td>
                </tr>
                <tr>
                  <td class="highlight-cell text-slate-700">Final Step</td>
                  <td class="font-bold flex items-center gap-2"><i data-lucide="check-square" class="w-4 h-4 text-slate-400"></i>Close the ticket</td>
                </tr>
              </tbody>
            </table>
          </div>

          <hr class="my-10 border-slate-100">

          <!-- Order Modification Unfulfilled -->
          <div id="mod-unfulfilled" class="mb-12">
            <div class="mb-6">
              <span class="px-2 py-1 bg-blue-100 text-blue-600 text-[10px] font-bold rounded uppercase tracking-widest mb-4 inline-block">Order Management</span>
              <h2 class="text-3xl font-bold text-slate-900 tracking-tight">Order Modification - Unfulfilled</h2>
            </div>
            <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2"><i data-lucide="plus-circle" class="w-5 h-5 text-emerald-500"></i> Adding Item(s)</h3>
            <table class="kb-table mb-8">
              <thead>
                <tr><th>Region / Scenario</th><th>Action Protocol</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td class="font-bold">Information Request</td>
                  <td class="action-cell"><p class="text-[10px] font-bold uppercase opacity-70">Initial Template:</p><div class="italic border-l-2 border-blue-200 pl-4 py-1 text-[12px]">"Hi Customer! üòä We've received your request to add a product... Name of product: / Quantity: [Link]"</div></td>
                </tr>
                <tr>
                  <td><strong>US-Based Orders</strong></td>
                  <td>1. Add items in <strong>OMS</strong><br>2. Edit order in <strong>Shopify</strong> (trigger "Amount to Collect" invoice)<br>3. Place order on <strong>HOLD</strong></td>
                </tr>
                <tr>
                  <td><strong>Non-US / All Other Regions</strong></td>
                  <td>1. Update on <strong>Shopify</strong><br>2. <strong>Escalate to K&S</strong> (Required as ERP cannot be updated directly)</td>
                </tr>
                <tr>
                  <td class="highlight-cell">Payment Confirmation</td>
                  <td class="success-cell"><p class="text-[10px] font-bold uppercase opacity-70">Payment Received Template:</p><div class="italic border-l-2 border-emerald-200 pl-4 py-1 text-[12px]">"We have received your payment and have proceeded with your order. Thank you!"</div></td>
                </tr>
              </tbody>
            </table>
            <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2"><i data-lucide="minus-circle" class="w-5 h-5 text-rose-500"></i> Removing Item(s)</h3>
            <table class="kb-table">
              <thead>
                <tr><th>Step</th><th>Workflow & Templates</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td class="font-bold">1. Request Confirmation</td>
                  <td class="action-cell"><p class="text-[10px] font-bold uppercase opacity-70">Removal Details Template:</p><div class="italic border-l-2 border-blue-200 pl-4 py-1 text-[12px]">"Please provide: Product name / Reason / Quantity / Paypal account (For Refund)."</div></td>
                </tr>
                <tr>
                  <td class="font-bold">2. System Processing</td>
                  <td>1. Process removal in <strong>ERP/OMS</strong> and <strong>Shopify</strong>.<br>2. <strong>Manual Refund:</strong> Process the refund manually on Shopify.</td>
                </tr>
                <tr>
                  <td class="highlight-cell">3. Completion</td>
                  <td class="success-cell"><p class="text-[10px] font-bold uppercase opacity-70">Refund Notification Template:</p><div class="italic border-l-2 border-emerald-200 pl-4 py-1 text-[12px]">"Successfully removed (Product) from #(Order). Refund initiated (5-7 business days)."</div></td>
                </tr>
              </tbody>
            </table>
          </div>

          <hr class="my-10 border-slate-100">

          <!-- Order Status -->
          <div id="order-status" class="mb-12">
            <div class="mb-6">
              <span class="px-2 py-1 bg-purple-100 text-purple-600 text-[10px] font-bold rounded uppercase tracking-widest mb-4 inline-block">Customer Communication</span>
              <h2 class="text-3xl font-bold text-slate-900 tracking-tight">Order Status</h2>
            </div>
            <table class="kb-table">
              <thead>
                <tr><th>Scenario</th><th>Response Template</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td class="font-bold">With Tracking Number</td>
                  <td class="action-cell"><div class="italic border-l-2 border-blue-200 pl-4 py-1 text-[12px]">Hi Customer,<br><br>Thank you so much for your recent purchase!<br><br>We're excited to let you know that your order #(order number) has been shipped. Your tracking number is #XXXXXXXXXX.<br><br>Your order is on its way, so there's nothing to worry about. If you have any questions, please don't hesitate to reach out and we're happy to help!</div></td>
                </tr>
                <tr>
                  <td class="font-bold">Without Tracking Number</td>
                  <td class="action-cell"><div class="italic border-l-2 border-blue-200 pl-4 py-1 text-[12px]">Hi Customer,<br><br>Thank you so much for your recent purchase!<br><br>We've checked your order #(order number), and it is currently being processed. Once our warehouse team dispatches your package, we'll send the tracking number to your email.<br><br>If you have any questions in the meantime, please don't hesitate to reach out and we're happy to help!</div></td>
                </tr>
                <tr>
                  <td class="font-bold">Without Tracking Number<br><span class="text-[10px] text-slate-500 font-normal">(Detailed Version)</span></td>
                  <td class="action-cell"><div class="italic border-l-2 border-blue-200 pl-4 py-1 text-[12px]">Hi Customer,<br><br>Thank you so much for your recent purchase!<br><br>We've checked your order #(order number), and it is currently being processed. Our processing time is 1 to 3 business days, and shipping typically takes around (check the country) business days.<br><br>Once our warehouse team dispatches your package, we'll send the tracking number directly to your email.<br><br>If you have any questions in the meantime, please don't hesitate to reach out and we're happy to help!</div></td>
                </tr>
              </tbody>
            </table>
          </div>

          <hr class="my-10 border-slate-100">

          <!-- Cancellation -->
          <div id="cancellation" class="mb-12">
            <div class="mb-6">
              <span class="px-2 py-1 bg-rose-100 text-rose-600 text-[10px] font-bold rounded uppercase tracking-widest mb-4 inline-block">Order Cancellation</span>
              <h2 class="text-3xl font-bold text-slate-900 tracking-tight">Cancellation</h2>
            </div>
            <table class="kb-table">
              <thead>
                <tr><th>Scenario</th><th>Process & Templates</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td class="font-bold">With Tracking Number</td>
                  <td class="warning-cell"><p class="text-[10px] font-bold uppercase mb-2 opacity-70">Already Shipped - Cannot Cancel:</p><div class="italic border-l-2 border-rose-200 pl-4 py-1 text-[12px]">Hi Customer,<br><br>Thank you so much for your recent purchase!<br><br>We're sorry to inform you that we can no longer cancel your order as it has already been shipped. Your tracking number is #XXXXXXXXXX.<br><br>Our suggestion is to receive the package first. Once you have received it, please send us a message, and we'll gladly assist you with the return process.</div></td>
                </tr>
                <tr>
                  <td class="font-bold">Without Tracking Number<br><span class="text-emerald-600 text-[11px]">Within 24 Hours</span></td>
                  <td class="action-cell"><p class="text-[10px] font-bold uppercase mb-2 opacity-70">IF US - Process Immediately:</p><div class="bg-yellow-50 border border-yellow-200 rounded p-3 mb-3 text-[11px]"><strong>‚ö†Ô∏è Agent Action Required:</strong><br>Hold the order in Shopify immediately</div><p class="text-[10px] font-bold uppercase mb-2 opacity-70">Initial Response:</p><div class="italic border-l-2 border-blue-200 pl-4 py-1 text-[12px] mb-3">Hi Customer,<br><br>Thank you so much for your recent purchase!<br><br>We're sorry to hear that you'd like to cancel your order. Could you please let us know the reason for the cancellation?<br><br>We'll check with our warehouse team to see if it's still possible to cancel your order and will get back to you as soon as possible.</div><div class="bg-blue-50 border border-blue-200 rounded p-3 mb-3 text-[11px]"><strong>üìã Check the reason:</strong> Maybe we can still find a way to retain the order.</div><p class="text-[10px] font-bold uppercase mb-2 opacity-70">Cancellation Steps:</p><ol class="list-decimal list-inside space-y-1 text-[12px] mb-3"><li>Cancel order in <strong>Shopify</strong> and process a refund</li><li>Cancel the order in <strong>OMS or ERP</strong></li></ol><div class="bg-emerald-50 border border-emerald-200 rounded p-3 mb-3 text-[11px]"><strong>üí∞ Retention Offers:</strong><br>‚Ä¢ $30 - In-store credit<br>‚Ä¢ $40 to $50 - In-store credit<br>‚Ä¢ 10% discount</div><p class="text-[10px] font-bold uppercase mb-2 opacity-70">Success Template:</p><div class="italic border-l-2 border-emerald-200 pl-4 py-1 text-[12px]">Hi Customer,<br><br>We've successfully canceled your order and processed the refund.<br><br>We hope you'll consider our product again in the future.</div></td>
                </tr>
                <tr>
                  <td class="font-bold">Without Tracking Number<br><span class="text-rose-600 text-[11px]">Outside 24 Hours</span></td>
                  <td class="warning-cell"><p class="text-[10px] font-bold uppercase mb-2 opacity-70">Already Processed - Cannot Cancel:</p><div class="italic border-l-2 border-rose-200 pl-4 py-1 text-[12px]">Hi Customer,<br><br>Thank you so much for your recent purchase!<br><br>We're sorry to inform you that we can no longer cancel your order, as our warehouse team has already processed it.<br><br>Our suggestion is to receive the package first. Once you have received it, please send us a message, and we'll be happy to assist you with the return process.</div></td>
                </tr>
              </tbody>
            </table>
          </div>

          <hr class="my-10 border-slate-100">

          <!-- Refund for Returns -->
          <div id="refund-returns" class="mb-12">
            <div class="mb-6">
              <span class="px-2 py-1 bg-indigo-100 text-indigo-600 text-[10px] font-bold rounded uppercase tracking-widest mb-4 inline-block">Returns & Refunds</span>
              <h2 class="text-3xl font-bold text-slate-900 tracking-tight">Refund for Returns</h2>
            </div>
            <table class="kb-table">
              <thead>
                <tr><th>Step / Scenario</th><th>Action & Templates</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td class="font-bold highlight-cell">Step 1: Check Return Eligibility</td>
                  <td class="action-cell"><p class="text-[11px] font-semibold mb-2">‚úì Verify in Shopify:</p><div class="bg-blue-50 border border-blue-200 rounded p-3 text-[11px]">Check order date - counting is <strong>90 days from the moment the customer received the item</strong></div></td>
                </tr>
                <tr>
                  <td class="font-bold">Step 2A: Within Return Policy<br><span class="text-emerald-600 text-[11px]">(Within 90 Days)</span></td>
                  <td class="action-cell"><p class="text-[10px] font-bold uppercase mb-2 opacity-70">Return Request Template:</p><div class="italic border-l-2 border-blue-200 pl-4 py-1 text-[12px] mb-3">Hi Customer,<br><br>Thank you for reaching out! Here's a quick summary of our return policy:<br><br>‚Ä¢ Returns must be initiated within 90 days from the moment the customer receive the item.<br>‚Ä¢ The product must be in its original packaging.<br>‚Ä¢ The item must be unused and in the same condition as received.<br>‚Ä¢ The shipping cost charged on your order is non-refundable. Buyer will be responsible for the shipment of returned goods and for ensuring that goods are packed properly for transport with proper insurance coverage.<br><br>Please note that the shipping cost to return the item is the customer's responsibility.<br><br><strong>To help us process your return, could you please provide the following photos:</strong><br>‚Ä¢ Photo of the item in its original box (outside view)<br>‚Ä¢ Photo of the item itself<br>‚Ä¢ Reason<br><br>Once we receive these, we'll review your return request and get back to you promptly.</div></td>
                </tr>
                <tr>
                  <td class="font-bold">Step 2B: Beyond Return Policy<br><span class="text-rose-600 text-[11px]">(Beyond 90 Days)</span></td>
                  <td class="warning-cell"><p class="text-[10px] font-bold uppercase mb-2 opacity-70">Policy Decline Template:</p><div class="italic border-l-2 border-rose-200 pl-4 py-1 text-[12px]">Hi Customer,<br><br>Thank you for reaching out! Here's a quick summary of our return policy:<br><br>‚Ä¢ Returns must be initiated within 90 days from the moment the customer receive the item.<br>‚Ä¢ The product must be in its original packaging.<br>‚Ä¢ The item must be unused and in the same condition as received.<br><br>According to our policy, we can only accept returns that are initiated within 90 days of purchase. Unfortunately, your order is beyond this timeframe, so we're unable to process the return. I know this is unfortunate, but this is the best response we can provide in this situation.<br><br>Thank you for your understanding! If you have any other questions or need assistance, feel free to reach out.</div></td>
                </tr>
                <tr>
                  <td class="font-bold highlight-cell">Step 3: Customer is Unhappy<br><span class="text-[11px] text-slate-500">(Escalation Response)</span></td>
                  <td class="action-cell"><p class="text-[10px] font-bold uppercase mb-2 opacity-70">Retention Offer Template:</p><div class="italic border-l-2 border-blue-200 pl-4 py-1 text-[12px]">Hi [Customer],<br><br>I truly understand your frustration, and I'm sorry for any inconvenience. Unfortunately, we can no longer accept your return as it is past our 90-day return policy.<br><br>We can offer you a coupon code that you can use on your next order.</div></td>
                </tr>
              </tbody>
            </table>
          </div>

          <hr class="my-10 border-slate-100">

          <!-- Retention Offer Calculator -->
          <div id="retention-calculator" class="mb-12">
            <div class="mb-6">
              <span class="px-2 py-1 bg-amber-100 text-amber-600 text-[10px] font-bold rounded uppercase tracking-widest mb-4 inline-block">Interactive Tool</span>
              <h2 class="text-3xl font-bold text-slate-900 tracking-tight">Retention Offer Calculator</h2>
              <p class="text-sm text-slate-600 mt-2">Calculate personalized retention offers based on order value and existing discounts.</p>
            </div>

            <div class="bg-gradient-to-br from-slate-50 to-blue-50 border-2 border-slate-200 rounded-2xl p-8 mb-6">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <div>
                  <label class="text-xs font-bold text-slate-700 uppercase tracking-wider mb-2 block">Order Total Amount ($)</label>
                  <input type="number" id="orderAmount" placeholder="Enter order total" class="w-full px-4 py-3 border-2 border-slate-300 rounded-lg text-lg font-semibold focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" oninput="calculateRetention()">
                </div>
                <div>
                  <label class="text-xs font-bold text-slate-700 uppercase tracking-wider mb-2 block">Existing Discount (%)</label>
                  <input type="number" id="existingDiscount" placeholder="0" value="0" min="0" max="20" class="w-full px-4 py-3 border-2 border-slate-300 rounded-lg text-lg font-semibold focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" oninput="calculateRetention()">
                </div>
              </div>

              <div id="warningMessage" class="hidden bg-rose-100 border-2 border-rose-300 rounded-lg p-4 mb-6">
                <div class="flex items-start gap-3">
                  <i data-lucide="alert-triangle" class="w-5 h-5 text-rose-600 shrink-0 mt-0.5"></i>
                  <div>
                    <p class="font-bold text-rose-900 text-sm">Maximum Discount Limit Reached</p>
                    <p class="text-rose-800 text-xs mt-1">This order already has a <span id="existingDiscountDisplay"></span>% discount. You may only offer an additional <span id="maxAdditionalDiscount"></span>% so the total discount does not exceed 20%.</p>
                  </div>
                </div>
              </div>

              <div id="results" class="hidden">
                <div class="bg-white rounded-xl border-2 border-slate-300 p-6 mb-4">
                  <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-bold text-slate-900">Recommended Retention Offers</h3>
                    <span id="orderCategory" class="px-3 py-1 bg-blue-600 text-white text-xs font-bold rounded-full"></span>
                  </div>
                  
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Option 1 -->
                    <div class="bg-gradient-to-br from-emerald-50 to-emerald-100 border-2 border-emerald-300 rounded-xl p-5">
                      <div class="flex items-center gap-2 mb-3">
                        <div class="w-8 h-8 bg-emerald-600 rounded-full flex items-center justify-center text-white font-bold text-sm">1</div>
                        <h4 class="font-bold text-emerald-900">Refund Option</h4>
                      </div>
                      <div class="space-y-2">
                        <div class="flex justify-between items-center">
                          <span class="text-xs text-emerald-700 font-semibold">Refund Amount:</span>
                          <span class="text-lg font-bold text-emerald-900" id="refundAmount"></span>
                        </div>
                        <div class="flex justify-between items-center">
                          <span class="text-xs text-emerald-700 font-semibold">Next Order Discount:</span>
                          <span class="text-lg font-bold text-emerald-900" id="refundDiscount"></span>
                        </div>
                      </div>
                      <div class="mt-4 pt-4 border-t-2 border-emerald-200">
                        <p class="text-xs text-emerald-800 font-medium">Customer Pays: <span class="text-base font-bold" id="refundNetAmount"></span></p>
                      </div>
                    </div>

                    <!-- Option 2 -->
                    <div class="bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-300 rounded-xl p-5">
                      <div class="flex items-center gap-2 mb-3">
                        <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-sm">2</div>
                        <h4 class="font-bold text-blue-900">Store Credit Option</h4>
                      </div>
                      <div class="space-y-2">
                        <div class="flex justify-between items-center">
                          <span class="text-xs text-blue-700 font-semibold">Store Credit:</span>
                          <span class="text-lg font-bold text-blue-900" id="creditAmount"></span>
                        </div>
                        <div class="flex justify-between items-center">
                          <span class="text-xs text-blue-700 font-semibold">Next Order Discount:</span>
                          <span class="text-lg font-bold text-blue-900" id="creditDiscount"></span>
                        </div>
                      </div>
                      <div class="mt-4 pt-4 border-t-2 border-blue-200">
                        <p class="text-xs text-blue-800 font-medium">Total Value: <span class="text-base font-bold" id="creditTotalValue"></span></p>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Script Template -->
                <div class="bg-slate-900 text-white rounded-xl p-6">
                  <div class="flex items-center gap-2 mb-4">
                    <i data-lucide="message-square" class="w-5 h-5"></i>
                    <h4 class="font-bold">Customer Response Template</h4>
                  </div>
                  <div class="bg-slate-800 rounded-lg p-4 font-mono text-sm leading-relaxed" id="scriptTemplate"></div>
                </div>
              </div>
            </div>

            <!-- Guidelines Reference -->
            <div class="bg-amber-50 border-2 border-amber-200 rounded-xl p-6">
              <h4 class="font-bold text-amber-900 mb-3 flex items-center gap-2">
                <i data-lucide="info" class="w-4 h-4"></i>
                Retention Offer Guidelines
              </h4>
              <div class="space-y-2 text-xs text-amber-900">
                <p class="font-semibold">‚ö†Ô∏è Important Note:</p>
                <p>If the customer requests a cancellation, always check and note any existing discount applied to the order. If the order already has a 10% discount, you may only offer an additional 10% so the maximum total discount does not exceed 20%.</p>
                <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-3">
                  <div class="bg-white rounded-lg p-3 border border-amber-300">
                    <p class="font-bold text-amber-800 mb-1">Below $100</p>
                    <p class="text-[10px]">‚Ä¢ 20% refund + 30% code OR</p>
                    <p class="text-[10px]">‚Ä¢ $35 credit + 30% code</p>
                  </div>
                  <div class="bg-white rounded-lg p-3 border border-amber-300">
                    <p class="font-bold text-amber-800 mb-1">$100 ‚Äì $150</p>
                    <p class="text-[10px]">‚Ä¢ 25% refund + 30% code OR</p>
                    <p class="text-[10px]">‚Ä¢ $50 credit + 30% code</p>
                  </div>
                  <div class="bg-white rounded-lg p-3 border border-amber-300">
                    <p class="font-bold text-amber-800 mb-1">$150+</p>
                    <p class="text-[10px]">‚Ä¢ 30% refund + 30% code OR</p>
                    <p class="text-[10px]">‚Ä¢ $60 credit + 30% code</p>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>

    <section id="view-settings" class="view-content hidden">
      <h1 class="text-2xl font-bold text-slate-900 mb-8">Portal Settings</h1>
      <div class="glass-card p-8 max-w-md">
        <label class="text-[10px] font-bold text-slate-400 uppercase">Max Wait Time (sec)</label>
        <input type="number" value="45" class="w-full mt-1 p-2 border border-slate-200 rounded-lg text-sm mb-4">
        <button class="bg-slate-900 text-white w-full py-3 rounded-xl font-bold text-xs uppercase tracking-widest">Save Changes</button>
      </div>
    </section>

  </main>

  <script>
    function calculateRetention() {
      const amount = parseFloat(document.getElementById('orderAmount').value) || 0;
      const existingDiscount = parseFloat(document.getElementById('existingDiscount').value) || 0;
      const resultsDiv = document.getElementById('results');
      const warningDiv = document.getElementById('warningMessage');

      if (amount <= 0) {
        resultsDiv.classList.add('hidden');
        warningDiv.classList.add('hidden');
        return;
      }

      // Show warning if existing discount is present
      if (existingDiscount > 0) {
        warningDiv.classList.remove('hidden');
        document.getElementById('existingDiscountDisplay').textContent = existingDiscount;
        document.getElementById('maxAdditionalDiscount').textContent = Math.max(0, 20 - existingDiscount);
      } else {
        warningDiv.classList.add('hidden');
      }

      let refundPercent, creditAmount, nextOrderDiscount, category;

      if (amount < 100) {
        refundPercent = 20;
        creditAmount = 35;
        nextOrderDiscount = 30;
        category = 'Below $100';
      } else if (amount >= 100 && amount < 150) {
        refundPercent = 25;
        creditAmount = 50;
        nextOrderDiscount = 30;
        category = '$100 ‚Äì $150';
      } else {
        refundPercent = 30;
        creditAmount = 60;
        nextOrderDiscount = 30;
        category = '$150 and Above';
      }

      // Adjust if there's an existing discount
      const maxAdditionalDiscount = Math.max(0, 20 - existingDiscount);
      const adjustedNextOrderDiscount = Math.min(nextOrderDiscount, maxAdditionalDiscount + 10);

      const refundAmount = (amount * refundPercent / 100).toFixed(2);
      const netAmount = (amount - refundAmount).toFixed(2);

      document.getElementById('orderCategory').textContent = category;
      document.getElementById('refundAmount').textContent = `${refundAmount}`;
      document.getElementById('refundDiscount').textContent = `${adjustedNextOrderDiscount}%`;
      document.getElementById('refundNetAmount').textContent = `${netAmount}`;
      document.getElementById('creditAmount').textContent = `${creditAmount}`;
      document.getElementById('creditDiscount').textContent = `${adjustedNextOrderDiscount}%`;
      document.getElementById('creditTotalValue').textContent = `${creditAmount} + ${adjustedNextOrderDiscount}% off`;

      const discountNote = existingDiscount > 0 ? 
        ` (Note: Order has ${existingDiscount}% existing discount, so additional discount is limited to ${adjustedNextOrderDiscount}%)` : '';

      document.getElementById('scriptTemplate').innerHTML = `Hi [Customer],<br><br>I understand you'd like to cancel your order. We'd love to keep you as a customer!<br><br>Here are two options we can offer:<br><br><strong>Option 1:</strong> We can refund you ${refundAmount} (${refundPercent}% of your order) and provide a ${adjustedNextOrderDiscount}% discount code for your next purchase.<br><br><strong>Option 2:</strong> We can provide ${creditAmount} in store credit plus a ${adjustedNextOrderDiscount}% discount code for your next order.${discountNote}<br><br>Which option works best for you?`;

      resultsDiv.classList.remove('hidden');
      lucide.createIcons();
    }

    function setView(viewId) {
      document.querySelectorAll('.nav-item').forEach(btn => btn.classList.remove('nav-active'));
      document.getElementById('btn-' + viewId).classList.add('nav-active');
      document.querySelectorAll('.view-content').forEach(view => view.classList.add('hidden'));
      document.getElementById('view-' + viewId).classList.remove('hidden');
    }
    lucide.createIcons();
  </script>
</body>
</html>