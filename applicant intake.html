<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Applicant Intake Portal</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Define the API URL for the single system
    const APPLICANT_API_URL = 'https://your.single.system/api/applicant-intake';
    
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            sans: ['Roboto', 'sans-serif'],
          },
          colors: {
            // Colors consistent with the Onboarding Hub
            'google-blue': '#4285F4',
            'brand-accent': '#CBEB33',
            'brand-dark': '#B5D12F',
            'bg-dark': '#0f172a',
            'text-dark': '#f1f5f9',
            'card-dark': '#1e293b',
            'border-dark': '#334155',
            'danger': '#ef4444',
            'primary-applicant': '#4285F4', /* Primary action color (Google Blue) */
            'secondary-applicant': '#3b82f6', /* Lighter blue for status */
          }
        }
      }
    }
  </script>
  <style>
    .animate-spin-slow {
        animation: spin 2.5s linear infinite;
    }
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    .tab-content.active {
      display: block;
    }
    .tab-content {
      display: none;
    }
    /* Custom style for file input for a cleaner look */
    .file-upload-input {
        opacity: 0;
        width: 0.1px;
        height: 0.1px;
        position: absolute;
        z-index: -1;
    }
    .file-upload-label {
        cursor: pointer;
        transition: background-color 0.15s ease-in-out;
    }
  </style>
</head>
<body class="min-h-screen bg-gray-100 text-gray-800 font-sans dark:bg-bg-dark dark:text-text-dark">

  <header class="flex items-center gap-4 bg-white dark:bg-card-dark p-4 shadow-md sticky top-0 z-30 border-b border-gray-100 dark:border-border-dark">
    <img src="dmi_logo.png" alt="Digital Minds BPO Logo" class="h-10 object-contain" onerror="this.style.display='none'" />
    <h1 class="text-2xl font-extrabold text-gray-900 dark:text-text-dark">Applicant Intake Portal</h1>
    <button id="themeToggle"
          class="ml-auto p-2 rounded-full text-gray-800 dark:text-text-dark bg-gray-100 dark:bg-border-dark hover:bg-brand-accent hover:text-bg-dark transition-all duration-300 transform hover:scale-105"
          aria-label="Toggle Dark Mode">
          <span class="material-symbols-outlined text-xl">dark_mode</span>
    </button>
  </header>

  <main id="mainContent" class="max-w-[1600px] mx-auto p-6 lg:p-10 space-y-6">

    <div class="flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">
        <div class="flex bg-white dark:bg-card-dark p-2 rounded-xl shadow-lg border border-gray-200 dark:border-border-dark w-full md:w-auto" role="tablist">
            <button id="tabForm" onclick="switchTab('form')"
                    class="tab-btn active inline-flex items-center justify-center flex-1 px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-border-dark dark:hover:bg-card-dark hover:text-primary-applicant dark:hover:text-primary-applicant">
                <i class="fas fa-file-signature mr-2"></i> Job Application Form
            </button>
            <button id="tabData" onclick="switchTab('data')"
                    class="tab-btn inline-flex items-center justify-center flex-1 px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-border-dark hover:text-primary-applicant dark:hover:text-primary-applicant">
                <i class="fas fa-table-list mr-2"></i> Application Data Table
            </button>
        </div>
        <button onclick="alert('Starting new screening round...')"
                class="inline-flex items-center bg-brand-accent hover:bg-brand-dark text-bg-dark px-4 py-2 rounded-full shadow-lg font-bold transition duration-300 transform hover:scale-[1.03] text-sm w-full md:w-auto">
            <i class="fas fa-magnifying-glass mr-2"></i> Start Screening
        </button>
    </div>
    <div id="formContent" class="tab-content active">
        <div class="bg-white dark:bg-card-dark rounded-2xl shadow-2xl p-6 lg:p-8">
            <h2 class="text-2xl font-bold text-gray-900 dark:text-text-dark border-b pb-3 mb-6 border-gray-200 dark:border-border-dark">
                <i class="fas fa-user-check text-primary-applicant mr-2"></i> Standardized Job Application
            </h2>
            <form id="applicantForm" class="space-y-6">
                
                <fieldset class="border p-4 rounded-lg border-gray-200 dark:border-border-dark space-y-4">
                    <legend class="text-lg font-semibold px-2 text-primary-applicant">Personal Details</legend>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label for="firstName" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">First Name</label>
                            <input type="text" id="firstName" name="FirstName" required 
                                class="w-full p-3 border border-gray-300 dark:border-border-dark rounded-lg dark:bg-bg-dark dark:text-text-dark focus:ring-primary-applicant focus:border-primary-applicant transition">
                        </div>
                        <div>
                            <label for="lastName" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Last Name</label>
                            <input type="text" id="lastName" name="LastName" required 
                                class="w-full p-3 border border-gray-300 dark:border-border-dark rounded-lg dark:bg-bg-dark dark:text-text-dark focus:ring-primary-applicant focus:border-primary-applicant transition">
                        </div>
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Email Address</label>
                            <input type="email" id="email" name="Email" required 
                                class="w-full p-3 border border-gray-300 dark:border-border-dark rounded-lg dark:bg-bg-dark dark:text-text-dark focus:ring-primary-applicant focus:border-primary-applicant transition">
                        </div>
                    </div>
                </fieldset>

                <fieldset class="border p-4 rounded-lg border-gray-200 dark:border-border-dark space-y-4">
                    <legend class="text-lg font-semibold px-2 text-primary-applicant">Application Details</legend>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="position" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Position Applied For</label>
                            <select id="position" name="Position" required
                                class="w-full p-3 border border-gray-300 dark:border-border-dark rounded-lg dark:bg-bg-dark dark:text-text-dark focus:ring-primary-applicant focus:border-primary-applicant transition">
                                <option value="">Select Position...</option>
                                <option value="CustomerService">Customer Service Representative</option>
                                <option value="TeamLead">Team Lead</option>
                                <option value="ITSupport">IT Support Specialist</option>
                                <option value="FinanceAnalyst">Finance Analyst</option>
                            </select>
                        </div>
                        <div>
                            <label for="source" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">How did you hear about us?</label>
                            <select id="source" name="Source"
                                class="w-full p-3 border border-gray-300 dark:border-border-dark rounded-lg dark:bg-bg-dark dark:text-text-dark focus:ring-primary-applicant focus:border-primary-applicant transition">
                                <option value="Website">Company Website</option>
                                <option value="Referral">Employee Referral</option>
                                <option value="JobBoard">Job Board (e.g., Indeed, LinkedIn)</option>
                                <option value="SocialMedia">Social Media</option>
                            </select>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="border p-4 rounded-lg border-gray-200 dark:border-border-dark space-y-4">
                    <legend class="text-lg font-semibold px-2 text-primary-applicant">Upload Documents</legend>
                    <div>
                        <label for="resume" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Resume/CV (PDF or DOCX)</label>
                        <input type="file" id="resume" name="Resume" accept=".pdf,.doc,.docx" required class="file-upload-input" onchange="updateFileName(this)">
                        <label for="resume" class="file-upload-label w-full p-3 inline-flex items-center justify-center border-2 border-primary-applicant border-dashed rounded-lg bg-blue-50 dark:bg-blue-900/50 text-primary-applicant hover:bg-blue-100 dark:hover:bg-blue-900 transition">
                            <i class="fas fa-cloud-arrow-up mr-3"></i>
                            <span id="resumeFileName" class="font-medium">Click to upload your Resume/CV</span>
                        </label>
                    </div>
                </fieldset>

                <div class="pt-4 flex justify-end">
                    <button type="submit" id="submitApplicantBtn"
                        class="inline-flex items-center bg-primary-applicant hover:bg-blue-600 text-white px-8 py-3 rounded-full shadow-xl font-bold transition duration-150 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed text-lg">
                        <i class="fas fa-paper-plane mr-2"></i> Submit Application
                    </button>
                </div>
            </form>
        </div>
    </div>
    <div id="dataContent" class="tab-content">
        <div class="relative bg-white dark:bg-card-dark rounded-2xl shadow-2xl overflow-hidden border border-gray-100 dark:border-border-dark">

            <div id="applicantLoadingSpinner"
                class="hidden absolute inset-0 bg-white/90 dark:bg-card-dark/90 backdrop-blur-sm flex justify-center items-center z-40">
                <div class="flex flex-col items-center">
                    <i class="fas fa-sync-alt fa-3x text-primary-applicant animate-spin-slow"></i>
                    <p id="applicantLoadingText" class="mt-3 text-lg text-gray-700 dark:text-text-dark font-medium">Processing application data...</p>
                </div>
            </div>

            <div class="overflow-x-auto">
                <table class="min-w-full text-sm">
                    <thead class="bg-gray-200 dark:bg-border-dark text-gray-700 dark:text-text-dark uppercase tracking-wider">
                        <tr>
                            <th class="px-4 py-4 text-left font-semibold">Applicant Name</th>
                            <th class="px-4 py-4 text-left font-semibold">Position</th>
                            <th class="px-4 py-4 text-left font-semibold">Date Applied</th>
                            <th class="px-4 py-4 text-left font-semibold">Source</th>
                            <th class="px-4 py-4 text-center font-semibold">Status</th>
                            <th class="px-4 py-4 text-center font-semibold">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="applicantTable" class="divide-y divide-gray-200 dark:divide-border-dark bg-white dark:bg-card-dark text-gray-700 dark:text-gray-300">
                        <tr class="hover:bg-gray-50 dark:hover:bg-card-dark transition duration-150">
                            <td class="px-4 py-3 font-medium text-gray-900 dark:text-text-dark">Alice Smith</td>
                            <td class="px-4 py-3">Team Lead</td>
                            <td class="px-4 py-3">Oct 30, 2025</td>
                            <td class="px-4 py-3">LinkedIn</td>
                            <td class="px-4 py-3 text-center">
                                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-primary-applicant/10 text-primary-applicant dark:bg-primary-applicant/30 dark:text-blue-200">
                                    New Applicant
                                </span>
                            </td>
                            <td class="px-4 py-3 text-center whitespace-nowrap">
                                <button class="text-primary-applicant hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300 mr-2" title="View Resume">
                                    <i class="fas fa-file-pdf"></i>
                                </button>
                                <button onclick="alert('Moving Alice Smith to Interview Stage')" class="text-secondary-applicant hover:text-blue-700 dark:text-blue-300 dark:hover:text-blue-200" title="Move to Interview">
                                    <i class="fas fa-arrow-right"></i>
                                </button>
                            </td>
                        </tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-card-dark transition duration-150">
                            <td class="px-4 py-3 font-medium text-gray-900 dark:text-text-dark">Robert Brown</td>
                            <td class="px-4 py-3">Customer Service Rep</td>
                            <td class="px-4 py-3">Oct 25, 2025</td>
                            <td class="px-4 py-3">Referral</td>
                            <td class="px-4 py-3 text-center">
                                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200">
                                    Interview Stage
                                </span>
                            </td>
                            <td class="px-4 py-3 text-center whitespace-nowrap">
                                <button class="text-primary-applicant hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300 mr-2" title="View Resume">
                                    <i class="fas fa-file-pdf"></i>
                                </button>
                                <button onclick="alert('Moving Robert Brown to Offer Stage')" class="text-secondary-applicant hover:text-blue-700 dark:text-blue-300 dark:hover:text-blue-200" title="Move to Offer">
                                    <i class="fas fa-arrow-right"></i>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    </main>

  <script>
    // --- Dark Mode Logic (Consistent) ---
    const themeToggle = document.getElementById('themeToggle');
    function updateThemeIcon(isDark) {
      themeToggle.innerHTML = isDark 
        ? '<span class="material-symbols-outlined text-xl">light_mode</span>' 
        : '<span class="material-symbols-outlined text-xl">dark_mode</span>';
    }

    function toggleTheme() {
      const isDark = document.body.classList.toggle('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      updateThemeIcon(isDark);
    }

    themeToggle.addEventListener('click', toggleTheme);

    const storedTheme = localStorage.getItem('theme');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const initialDark = storedTheme === 'dark' || (storedTheme === null && prefersDark);
    if (initialDark) {
      document.body.classList.add('dark');
    }
    updateThemeIcon(initialDark);
    // --- End Dark Mode Logic ---

    // --- Tab Switching Logic (Consistent) ---
    function switchTab(tabId) {
      document.querySelectorAll('.tab-content').forEach(content => {
        content.classList.remove('active');
      });
      document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('bg-gray-100', 'dark:bg-border-dark', 'active');
        btn.classList.add('hover:bg-gray-100', 'dark:hover:bg-border-dark');
      });

      document.getElementById(`${tabId}Content`).classList.add('active');
      const activeBtn = document.getElementById(`tab${tabId.charAt(0).toUpperCase() + tabId.slice(1)}`);
      if (activeBtn) {
        activeBtn.classList.add('bg-gray-100', 'dark:bg-border-dark', 'active');
        activeBtn.classList.remove('hover:bg-gray-100', 'dark:hover:bg-border-dark');
      }
    }

    // Set the initial active tab
    document.addEventListener('DOMContentLoaded', () => {
      switchTab('form'); 
    });

    // --- Form Submission Logic (Feeds to Single System) ---
    async function submitApplicantForm(e) {
      e.preventDefault();
      const form = document.getElementById('applicantForm');
      const submitButton = document.getElementById('submitApplicantBtn');
      const originalButtonHtml = submitButton.innerHTML;

      submitButton.disabled = true;
      submitButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Submitting...';

      // 1. Extract form data
      const formData = {
        FirstName: document.getElementById('firstName').value,
        LastName: document.getElementById('lastName').value,
        Email: document.getElementById('email').value,
        Position: document.getElementById('position').value,
        Source: document.getElementById('source').value,
        DateApplied: new Date().toISOString().split('T')[0],
        // Note: For actual implementation, resume file would be handled via FormData/API
        // For this demo, we'll just check if a file was selected.
        ResumeFile: document.getElementById('resume').files[0] ? document.getElementById('resume').files[0].name : 'No file uploaded'
      };

      console.log('Applicant Data to be sent:', formData);

      // 2. Simulate API call to the single system (APPLICANT_API_URL)
      try {
        // In a real application, you would use a standard API fetch with FormData.
        // const res = await fetch(APPLICANT_API_URL, {
        //   method: 'POST',
        //   body: JSON.stringify(formData), // Use FormData for files, but JSON for this simulation
        //   headers: {'Content-Type': 'application/json'}
        // });
        
        // Simulating success after a short delay
        await new Promise(resolve => setTimeout(resolve, 1500)); 

        alert(`Application for ${formData.FirstName} ${formData.LastName} submitted successfully to the central system!`);
        form.reset();
        document.getElementById('resumeFileName').textContent = 'Click to upload your Resume/CV'; // Reset file name display
      } catch (error) {
        console.error('Error submitting application:', error);
        alert('Failed to submit application: ' + error.message);
      } finally {
        submitButton.disabled = false;
        submitButton.innerHTML = originalButtonHtml;
      }
    }

    document.getElementById('applicantForm').addEventListener('submit', submitApplicantForm);

    // --- Utility Function to Update File Name Display ---
    function updateFileName(input) {
        const fileNameDisplay = document.getElementById('resumeFileName');
        if (input.files.length > 0) {
            fileNameDisplay.textContent = input.files[0].name;
        } else {
            fileNameDisplay.textContent = 'Click to upload your Resume/CV';
        }
    }
  </script>
</body>
</html>