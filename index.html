<!DOCTYPE html>
<html lang="en">
<head>
  <base target="_top">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  
  <style>
    :root {
      --primary: #0f172a;
      --sidebar-width: 280px;
    }
    body { 
      font-family: 'Plus Jakarta Sans', sans-serif; 
      background-color: #f1f5f9; 
      color: #1e293b; 
    }
    
    /* Modern Navigation Styling */
    .nav-item {
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
    }
    .nav-active { 
      background: #f8fafc; 
      color: #0f172a; 
      font-weight: 600;
      box-shadow: inset 4px 0 0 0 #0f172a;
    }
    .nav-active i { color: #0f172a; }
    
    /* Layout Components */
    .glass-card { 
      background: rgba(255, 255, 255, 0.9); 
      backdrop-filter: blur(8px);
      border: 1px solid rgba(226, 232, 240, 0.8); 
      border-radius: 16px; 
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .glass-card:hover { 
      transform: translateY(-2px);
      box-shadow: 0 12px 24px -10px rgba(0,0,0,0.05);
    }

    /* Knowledge Base Enhancements */
    .kb-table { width: 100%; border-collapse: separate; border-spacing: 0; margin-top: 1rem; border-radius: 12px; overflow: hidden; border: 1px solid #e2e8f0; }
    .kb-table th { background: #f8fafc; color: #64748b; font-size: 11px; text-transform: uppercase; letter-spacing: 0.05em; padding: 14px; text-align: left; border-bottom: 1px solid #e2e8f0; }
    .kb-table td { padding: 20px; font-size: 14px; border-bottom: 1px solid #f1f5f9; vertical-align: top; line-height: 1.6; background: white; }
    
    .kb-template {
      position: relative;
      background: #f8fafc;
      border: 1px solid #e2e8f0;
      cursor: pointer;
    }
    .kb-template:hover { background: #f1f5f9; }
    .copy-hint { position: absolute; top: 8px; right: 8px; opacity: 0; transition: opacity 0.2s; }
    .kb-template:hover .copy-hint { opacity: 1; }

    .view-content { animation: fadeIn 0.4s ease-out; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    /* Nav Tree Styles */
    .nav-chevron {
      transition: transform 0.2s ease;
    }

    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }

    /* Audit Form Styles */
    .rating-btn, .compliance-btn {
      display: inline-flex; align-items: center; justify-content: center;
      width: 28px; height: 28px; border-radius: 6px; background: #f1f5f9;
      font-size: 11px; font-weight: 600; color: #64748b; cursor: pointer;
      transition: all 0.15s ease;
    }
    .rating-btn:hover { background: #e2e8f0; }
    .rating-btn.selected { background: #0f172a; color: white; }
    .compliance-btn { width: auto; padding: 0 10px; }
    .compliance-btn:hover { background: #e2e8f0; }
    .compliance-btn.selected[data-value="yes"] { background: #10b981; color: white; }
    .compliance-btn.selected[data-value="no"] { background: #ef4444; color: white; }
    .compliance-btn.selected[data-value="na"] { background: #64748b; color: white; }
  </style>
</head>
<body class="flex min-h-screen">

  <aside class="w-[280px] h-screen bg-white border-r border-slate-200 fixed flex flex-col z-50">
    <div class="p-8">
      <div class="flex items-center gap-3 mb-2">
        <div>
          <h1 class="text-lg font-extrabold text-slate-900 tracking-tight">TSUKI GLASS</h1>
          <p class="text-[10px] text-slate-400 font-bold uppercase tracking-widest">Support Portal</p>
        </div>
      </div>
    </div>
    
    <nav class="flex-1 px-4 space-y-1">
      <div class="text-[10px] font-bold text-slate-400 uppercase tracking-widest px-4 pb-2 mt-4">Main Menu</div>
      <button onclick="setView('dashboard')" id="btn-dashboard" class="nav-item w-full flex items-center gap-3 px-4 py-3 text-sm font-medium text-slate-500 hover:bg-slate-50 rounded-xl nav-active">
        <i data-lucide="layout-dashboard" class="w-4 h-4"></i> Dashboard
      </button>
      <button onclick="setView('agents')" id="btn-agents" class="nav-item w-full flex items-center gap-3 px-4 py-3 text-sm font-medium text-slate-500 hover:bg-slate-50 rounded-xl">
        <i data-lucide="users" class="w-4 h-4"></i> Agent Performance
      </button>
      <button onclick="setView('knowledge')" id="btn-knowledge" class="nav-item w-full flex items-center gap-3 px-4 py-3 text-sm font-medium text-slate-500 hover:bg-slate-50 rounded-xl">
        <i data-lucide="book-open" class="w-4 h-4"></i> Knowledge Base
      </button>


      <button onclick="setView('quality')" id="btn-quality" class="nav-item w-full flex items-center gap-3 px-4 py-3 text-sm font-medium text-slate-500 hover:bg-slate-50 rounded-xl">
        <i data-lucide="shield-check" class="w-4 h-4"></i> Quality Metrics
      </button>

      <div class="text-[10px] font-bold text-slate-400 uppercase tracking-widest px-4 pt-8 pb-2 mb-2 mt-8">Systems</div>


      <button onclick="setView('schedule')" id="btn-schedule" class="nav-item w-full flex items-center gap-3 px-4 py-3 text-sm font-medium text-slate-500 hover:bg-slate-50 rounded-xl">
        <i data-lucide="calendar" class="w-4 h-4"></i> Schedule
      </button>
      <button onclick="setView('settings')" id="btn-settings" class="nav-item w-full flex items-center gap-3 px-4 py-3 text-sm font-medium text-slate-500 hover:bg-slate-50 rounded-xl">
        <i data-lucide="settings" class="w-4 h-4"></i> Settings
      </button>
    </nav>

<div class="p-4 border-t border-slate-200">
  <div class="bg-slate-50 p-3 rounded-lg flex items-center justify-center">
    <p class="text-xs font-bold text-slate-900">Internal Use Only</p>
  </div>
</div>

  </aside>

  <main class="ml-[280px] flex-1 p-12 max-w-[1600px]">
    
    <section id="view-dashboard" class="view-content">
      <div class="flex justify-between items-end mb-10">
        <div>
          <h1 class="text-3xl font-bold text-slate-900 tracking-tight">Operational Overview</h1>
          <p class="text-slate-500 mt-1">Real-time performance metrics for the current billing cycle.</p>
        </div>
        <div class="flex gap-2">
          <button class="bg-white border border-slate-200 px-4 py-2 rounded-lg text-sm font-semibold text-slate-600 flex items-center gap-2 hover:bg-slate-50">
            <i data-lucide="download" class="w-4 h-4"></i> Export Report
          </button>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-10">
        <div class="bg-white border border-slate-200 rounded-lg p-5">
          <p class="text-xs font-medium text-slate-500 mb-2">Total Inbound</p>
          <h2 class="text-2xl font-semibold text-slate-900">1,000</h2>
          <p class="text-xs text-emerald-600 mt-2">+12% from last period</p>
        </div>
        <div class="bg-white border border-slate-200 rounded-lg p-5">
          <p class="text-xs font-medium text-slate-500 mb-2">Avg Handling Time</p>
          <h2 class="text-2xl font-semibold text-slate-900">4m 12s</h2>
          <p class="text-xs text-slate-500 mt-2">-2% from last period</p>
        </div>
        <div class="bg-white border border-slate-200 rounded-lg p-5">
          <p class="text-xs font-medium text-slate-500 mb-2">CSAT Score</p>
          <h2 class="text-2xl font-semibold text-slate-900">100.0%</h2>
          <p class="text-xs text-slate-500 mt-2">No change</p>
        </div>
        <div class="bg-white border border-slate-200 rounded-lg p-5">
          <p class="text-xs font-medium text-slate-500 mb-2">Active Agents</p>
          <h2 class="text-2xl font-semibold text-slate-900">2</h2>
          <p class="text-xs text-slate-500 mt-2">Agent 1, Agent 2</p>
        </div>
      </div>
      
      <div class="glass-card p-12 flex flex-col items-center justify-center text-slate-400 border-dashed border-2 border-slate-200">
        <div class="p-4 bg-slate-50 rounded-full mb-4">
          <i data-lucide="bar-chart-3" class="w-8 h-8 opacity-40"></i>
        </div>
        <p class="text-sm font-semibold text-slate-500">Analytics Visualization Module</p>
        <p class="text-xs text-slate-400 mt-1">Data will populate upon API synchronization.</p>
      </div>
    </section>

    <section id="view-agents" class="view-content hidden">
        <h1 class="text-3xl font-bold text-slate-900 mb-8">Agent Performance</h1>
        <div class="glass-card overflow-hidden">
            <table class="w-full text-left">
              <thead class="bg-slate-50 border-b border-slate-200">
                <tr>
                  <th class="px-8 py-5 text-[11px] font-bold text-slate-400 uppercase tracking-wider">Agent Name</th>
                  <th class="px-8 py-5 text-[11px] font-bold text-slate-400 uppercase tracking-wider">Status</th>
                  <th class="px-8 py-5 text-[11px] font-bold text-slate-400 uppercase tracking-wider">Department</th>
                  <th class="px-8 py-5 text-[11px] font-bold text-slate-400 uppercase tracking-wider">Actions</th>
                </tr>
              </thead>
              <tbody class="divide-y divide-slate-100 bg-white">
                <tr class="hover:bg-slate-50/50 transition-colors">
                  <td class="px-8 py-5">
                    <div class="flex items-center gap-3">
                      <div class="w-8 h-8 bg-slate-100 rounded-full flex items-center justify-center font-bold text-xs text-slate-600">A1</div>
                      <span class="text-sm font-semibold text-slate-900">Agent 1</span>
                    </div>
                  </td>
                  <td class="px-8 py-5">
                    <span class="inline-flex items-center gap-1.5 px-3 py-1 bg-emerald-50 text-emerald-700 text-[11px] font-bold rounded-full">
                      <span class="w-1.5 h-1.5 bg-emerald-500 rounded-full"></span> ONLINE
                    </span>
                  </td>
                  <td class="px-8 py-5 text-sm text-slate-500">Customer Support</td>
                  <td class="px-8 py-5"><button class="text-slate-400 hover:text-slate-900"><i data-lucide="more-horizontal" class="w-5 h-5"></i></button></td>
                </tr>
                <tr class="hover:bg-slate-50/50 transition-colors">
                  <td class="px-8 py-5">
                    <div class="flex items-center gap-3">
                      <div class="w-8 h-8 bg-slate-100 rounded-full flex items-center justify-center font-bold text-xs text-slate-600">A2</div>
                      <span class="text-sm font-semibold text-slate-900">Agent 2</span>
                    </div>
                  </td>
                  <td class="px-8 py-5">
                    <span class="inline-flex items-center gap-1.5 px-3 py-1 bg-slate-100 text-slate-500 text-[11px] font-bold rounded-full">
                      <span class="w-1.5 h-1.5 bg-slate-400 rounded-full"></span> OFFLINE
                    </span>
                  </td>
                  <td class="px-8 py-5 text-sm text-slate-500">Quality Assurance</td>
                  <td class="px-8 py-5"><button class="text-slate-400 hover:text-slate-900"><i data-lucide="more-horizontal" class="w-5 h-5"></i></button></td>
                </tr>
              </tbody>
            </table>
          </div>
    </section>

    <section id="view-quality" class="view-content hidden">
      <!-- Header -->
      <div class="flex justify-between items-center mb-6">
        <div>
          <h1 class="text-3xl font-bold text-slate-900 tracking-tight">Quality Audit Form</h1>
          <p class="text-slate-500 mt-1 text-sm">1=Poor, 2=Needs Work, 3=Meets, 4=Exceeds, 5=Exceptional</p>
        </div>
        <div class="flex gap-2">
          <button onclick="resetAuditForm()" class="bg-white border border-slate-200 px-4 py-2 rounded-lg text-sm font-semibold text-slate-600 hover:bg-slate-50 flex items-center gap-2">
            <i data-lucide="rotate-ccw" class="w-4 h-4"></i> Reset
          </button>
          <button onclick="downloadAuditPDF()" class="bg-slate-900 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-slate-800 flex items-center gap-2">
            <i data-lucide="download" class="w-4 h-4"></i> Download PDF
          </button>
        </div>
      </div>

      <!-- Audit Info -->
      <div class="grid grid-cols-4 gap-4 mb-6">
        <input type="text" id="audit-agent" placeholder="Agent Name" class="px-3 py-2 text-sm bg-white border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-900/10">
        <input type="text" id="audit-evaluator" placeholder="Evaluator Name" class="px-3 py-2 text-sm bg-white border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-900/10">
        <input type="text" id="audit-ticket" placeholder="Ticket/Call ID" class="px-3 py-2 text-sm bg-white border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-900/10">
        <input type="date" id="audit-date" class="px-3 py-2 text-sm bg-white border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-900/10">
      </div>

      <!-- Audit Table -->
      <div id="audit-form-content">
        <table class="kb-table shadow-sm w-full">
          <thead>
            <tr>
              <th class="w-2/5">Criteria</th>
              <th class="w-1/5 text-center">Rating</th>
              <th class="w-2/5">Comments</th>
            </tr>
          </thead>
          <tbody>
            <!-- Call Opening -->
            <tr><td colspan="3" class="bg-blue-50 font-bold text-blue-800 text-xs uppercase tracking-wider">Call Opening</td></tr>
            <tr>
              <td class="text-sm">Greeted customer professionally</td>
              <td class="text-center"><div class="flex justify-center gap-1 rating-group" data-category="opening"><span class="rating-btn" data-value="1">1</span><span class="rating-btn" data-value="2">2</span><span class="rating-btn" data-value="3">3</span><span class="rating-btn" data-value="4">4</span><span class="rating-btn" data-value="5">5</span></div></td>
              <td><input type="text" class="audit-comment w-full px-2 py-1 text-xs border border-slate-200 rounded" placeholder="Add comment..."></td>
            </tr>
            <tr>
              <td class="text-sm">Introduced self and company</td>
              <td class="text-center"><div class="flex justify-center gap-1 rating-group" data-category="opening"><span class="rating-btn" data-value="1">1</span><span class="rating-btn" data-value="2">2</span><span class="rating-btn" data-value="3">3</span><span class="rating-btn" data-value="4">4</span><span class="rating-btn" data-value="5">5</span></div></td>
              <td><input type="text" class="audit-comment w-full px-2 py-1 text-xs border border-slate-200 rounded" placeholder="Add comment..."></td>
            </tr>
            <tr>
              <td class="text-sm">Verified customer identity</td>
              <td class="text-center"><div class="flex justify-center gap-1 rating-group" data-category="opening"><span class="rating-btn" data-value="1">1</span><span class="rating-btn" data-value="2">2</span><span class="rating-btn" data-value="3">3</span><span class="rating-btn" data-value="4">4</span><span class="rating-btn" data-value="5">5</span></div></td>
              <td><input type="text" class="audit-comment w-full px-2 py-1 text-xs border border-slate-200 rounded" placeholder="Add comment..."></td>
            </tr>

            <!-- Communication -->
            <tr><td colspan="3" class="bg-purple-50 font-bold text-purple-800 text-xs uppercase tracking-wider">Communication Skills</td></tr>
            <tr>
              <td class="text-sm">Clear and understandable speech</td>
              <td class="text-center"><div class="flex justify-center gap-1 rating-group" data-category="communication"><span class="rating-btn" data-value="1">1</span><span class="rating-btn" data-value="2">2</span><span class="rating-btn" data-value="3">3</span><span class="rating-btn" data-value="4">4</span><span class="rating-btn" data-value="5">5</span></div></td>
              <td><input type="text" class="audit-comment w-full px-2 py-1 text-xs border border-slate-200 rounded" placeholder="Add comment..."></td>
            </tr>
            <tr>
              <td class="text-sm">Active listening demonstrated</td>
              <td class="text-center"><div class="flex justify-center gap-1 rating-group" data-category="communication"><span class="rating-btn" data-value="1">1</span><span class="rating-btn" data-value="2">2</span><span class="rating-btn" data-value="3">3</span><span class="rating-btn" data-value="4">4</span><span class="rating-btn" data-value="5">5</span></div></td>
              <td><input type="text" class="audit-comment w-full px-2 py-1 text-xs border border-slate-200 rounded" placeholder="Add comment..."></td>
            </tr>
            <tr>
              <td class="text-sm">Professional tone maintained</td>
              <td class="text-center"><div class="flex justify-center gap-1 rating-group" data-category="communication"><span class="rating-btn" data-value="1">1</span><span class="rating-btn" data-value="2">2</span><span class="rating-btn" data-value="3">3</span><span class="rating-btn" data-value="4">4</span><span class="rating-btn" data-value="5">5</span></div></td>
              <td><input type="text" class="audit-comment w-full px-2 py-1 text-xs border border-slate-200 rounded" placeholder="Add comment..."></td>
            </tr>
            <tr>
              <td class="text-sm">Empathy and rapport building</td>
              <td class="text-center"><div class="flex justify-center gap-1 rating-group" data-category="communication"><span class="rating-btn" data-value="1">1</span><span class="rating-btn" data-value="2">2</span><span class="rating-btn" data-value="3">3</span><span class="rating-btn" data-value="4">4</span><span class="rating-btn" data-value="5">5</span></div></td>
              <td><input type="text" class="audit-comment w-full px-2 py-1 text-xs border border-slate-200 rounded" placeholder="Add comment..."></td>
            </tr>

            <!-- Problem Resolution -->
            <tr><td colspan="3" class="bg-emerald-50 font-bold text-emerald-800 text-xs uppercase tracking-wider">Problem Resolution</td></tr>
            <tr>
              <td class="text-sm">Correctly identified issue</td>
              <td class="text-center"><div class="flex justify-center gap-1 rating-group" data-category="resolution"><span class="rating-btn" data-value="1">1</span><span class="rating-btn" data-value="2">2</span><span class="rating-btn" data-value="3">3</span><span class="rating-btn" data-value="4">4</span><span class="rating-btn" data-value="5">5</span></div></td>
              <td><input type="text" class="audit-comment w-full px-2 py-1 text-xs border border-slate-200 rounded" placeholder="Add comment..."></td>
            </tr>
            <tr>
              <td class="text-sm">Provided accurate information</td>
              <td class="text-center"><div class="flex justify-center gap-1 rating-group" data-category="resolution"><span class="rating-btn" data-value="1">1</span><span class="rating-btn" data-value="2">2</span><span class="rating-btn" data-value="3">3</span><span class="rating-btn" data-value="4">4</span><span class="rating-btn" data-value="5">5</span></div></td>
              <td><input type="text" class="audit-comment w-full px-2 py-1 text-xs border border-slate-200 rounded" placeholder="Add comment..."></td>
            </tr>
            <tr>
              <td class="text-sm">Followed proper procedures</td>
              <td class="text-center"><div class="flex justify-center gap-1 rating-group" data-category="resolution"><span class="rating-btn" data-value="1">1</span><span class="rating-btn" data-value="2">2</span><span class="rating-btn" data-value="3">3</span><span class="rating-btn" data-value="4">4</span><span class="rating-btn" data-value="5">5</span></div></td>
              <td><input type="text" class="audit-comment w-full px-2 py-1 text-xs border border-slate-200 rounded" placeholder="Add comment..."></td>
            </tr>
            <tr>
              <td class="text-sm">Offered appropriate solutions</td>
              <td class="text-center"><div class="flex justify-center gap-1 rating-group" data-category="resolution"><span class="rating-btn" data-value="1">1</span><span class="rating-btn" data-value="2">2</span><span class="rating-btn" data-value="3">3</span><span class="rating-btn" data-value="4">4</span><span class="rating-btn" data-value="5">5</span></div></td>
              <td><input type="text" class="audit-comment w-full px-2 py-1 text-xs border border-slate-200 rounded" placeholder="Add comment..."></td>
            </tr>

            <!-- Call Closing -->
            <tr><td colspan="3" class="bg-amber-50 font-bold text-amber-800 text-xs uppercase tracking-wider">Call Closing</td></tr>
            <tr>
              <td class="text-sm">Summarized resolution/next steps</td>
              <td class="text-center"><div class="flex justify-center gap-1 rating-group" data-category="closing"><span class="rating-btn" data-value="1">1</span><span class="rating-btn" data-value="2">2</span><span class="rating-btn" data-value="3">3</span><span class="rating-btn" data-value="4">4</span><span class="rating-btn" data-value="5">5</span></div></td>
              <td><input type="text" class="audit-comment w-full px-2 py-1 text-xs border border-slate-200 rounded" placeholder="Add comment..."></td>
            </tr>
            <tr>
              <td class="text-sm">Asked if anything else needed</td>
              <td class="text-center"><div class="flex justify-center gap-1 rating-group" data-category="closing"><span class="rating-btn" data-value="1">1</span><span class="rating-btn" data-value="2">2</span><span class="rating-btn" data-value="3">3</span><span class="rating-btn" data-value="4">4</span><span class="rating-btn" data-value="5">5</span></div></td>
              <td><input type="text" class="audit-comment w-full px-2 py-1 text-xs border border-slate-200 rounded" placeholder="Add comment..."></td>
            </tr>
            <tr>
              <td class="text-sm">Professional closing statement</td>
              <td class="text-center"><div class="flex justify-center gap-1 rating-group" data-category="closing"><span class="rating-btn" data-value="1">1</span><span class="rating-btn" data-value="2">2</span><span class="rating-btn" data-value="3">3</span><span class="rating-btn" data-value="4">4</span><span class="rating-btn" data-value="5">5</span></div></td>
              <td><input type="text" class="audit-comment w-full px-2 py-1 text-xs border border-slate-200 rounded" placeholder="Add comment..."></td>
            </tr>

            <!-- Compliance -->
            <tr><td colspan="3" class="bg-rose-50 font-bold text-rose-800 text-xs uppercase tracking-wider">Compliance</td></tr>
            <tr>
              <td class="text-sm">Followed data protection guidelines</td>
              <td class="text-center"><div class="flex justify-center gap-1 compliance-group"><span class="compliance-btn" data-value="yes">Yes</span><span class="compliance-btn" data-value="no">No</span><span class="compliance-btn" data-value="na">N/A</span></div></td>
              <td><input type="text" class="audit-comment w-full px-2 py-1 text-xs border border-slate-200 rounded" placeholder="Add comment..."></td>
            </tr>
            <tr>
              <td class="text-sm">No unauthorized promises made</td>
              <td class="text-center"><div class="flex justify-center gap-1 compliance-group"><span class="compliance-btn" data-value="yes">Yes</span><span class="compliance-btn" data-value="no">No</span><span class="compliance-btn" data-value="na">N/A</span></div></td>
              <td><input type="text" class="audit-comment w-full px-2 py-1 text-xs border border-slate-200 rounded" placeholder="Add comment..."></td>
            </tr>
            <tr>
              <td class="text-sm">Proper documentation completed</td>
              <td class="text-center"><div class="flex justify-center gap-1 compliance-group"><span class="compliance-btn" data-value="yes">Yes</span><span class="compliance-btn" data-value="no">No</span><span class="compliance-btn" data-value="na">N/A</span></div></td>
              <td><input type="text" class="audit-comment w-full px-2 py-1 text-xs border border-slate-200 rounded" placeholder="Add comment..."></td>
            </tr>
          </tbody>
        </table>

        <!-- Overall Notes & Score -->
        <div class="mt-6 grid grid-cols-3 gap-4">
          <div class="col-span-2">
            <label class="text-xs font-bold text-slate-500 uppercase mb-2 block">Overall Notes / Coaching Points</label>
            <textarea id="audit-notes" class="w-full h-24 p-3 bg-white border border-slate-200 rounded-lg text-sm resize-none focus:outline-none focus:ring-2 focus:ring-slate-900/10" placeholder="Enter feedback..."></textarea>
          </div>
          <div class="bg-slate-900 rounded-lg p-4 text-white flex flex-col justify-center">
            <p class="text-xs text-slate-400 uppercase mb-1">Total Score</p>
            <p class="text-3xl font-bold"><span id="audit-score">0</span>/70</p>
            <p class="text-sm text-slate-400"><span id="audit-percent">0</span>% Quality</p>
          </div>
        </div>
      </div>
    </section>

    <section id="view-knowledge" class="view-content hidden">
      <div class="flex gap-8">
        <div class="w-[280px] shrink-0">
          <div class="sticky top-12">
            <div class="relative mb-4">
              <i data-lucide="search" class="w-4 h-4 absolute left-3 top-2.5 text-slate-400"></i>
              <input type="text" placeholder="Search..." class="w-full pl-9 pr-3 py-2 text-sm bg-white border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-900/10">
            </div>

            <div class="bg-white border border-slate-200 rounded-lg overflow-hidden">
              <div class="max-h-[calc(100vh-200px)] overflow-y-auto">

                <!-- Shipping & Orders -->
                <div class="border-b border-slate-100">
                  <button onclick="toggleNavSection('shipping')" class="w-full flex items-center justify-between p-3 hover:bg-slate-50 transition-colors">
                    <div class="flex items-center gap-2">
                      <i data-lucide="package" class="w-4 h-4 text-slate-600"></i>
                      <span class="text-sm font-semibold text-slate-900">Shipping & Orders</span>
                    </div>
                    <i data-lucide="chevron-down" class="w-4 h-4 text-slate-400 nav-chevron" id="chevron-shipping"></i>
                  </button>
                  <div id="nav-shipping" class="bg-slate-50 hidden">
                    <div onclick="scrollToSection('shipping-matrix')" class="pl-9 pr-3 py-2 text-xs text-slate-700 hover:text-slate-900 hover:bg-slate-100 cursor-pointer border-l-2 border-transparent hover:border-slate-900 transition-all">
                      Address Modification
                    </div>
                    <div onclick="scrollToSection('mod-unfulfilled')" class="pl-9 pr-3 py-2 text-xs text-slate-700 hover:text-slate-900 hover:bg-slate-100 cursor-pointer border-l-2 border-transparent hover:border-slate-900 transition-all">
                      Modify Unfulfilled Orders
                    </div>
                    <div onclick="scrollToSection('order-status')" class="pl-9 pr-3 py-2 text-xs text-slate-700 hover:text-slate-900 hover:bg-slate-100 cursor-pointer border-l-2 border-transparent hover:border-slate-900 transition-all">
                      Order Status Templates
                    </div>
                  </div>
                </div>

                <!-- Cancellations & Refunds -->
                <div class="border-b border-slate-100">
                  <button onclick="toggleNavSection('cancellations')" class="w-full flex items-center justify-between p-3 hover:bg-slate-50 transition-colors">
                    <div class="flex items-center gap-2">
                      <i data-lucide="x-circle" class="w-4 h-4 text-slate-600"></i>
                      <span class="text-sm font-semibold text-slate-900">Cancellations & Refunds</span>
                    </div>
                    <i data-lucide="chevron-down" class="w-4 h-4 text-slate-400 nav-chevron" id="chevron-cancellations"></i>
                  </button>
                  <div id="nav-cancellations" class="bg-slate-50 hidden">
                    <div onclick="scrollToSection('cancellation')" class="pl-9 pr-3 py-2 text-xs text-slate-700 hover:text-slate-900 hover:bg-slate-100 cursor-pointer border-l-2 border-transparent hover:border-slate-900 transition-all">
                      Cancellation Workflow
                    </div>
                    <div onclick="scrollToSection('refund-returns')" class="pl-9 pr-3 py-2 text-xs text-slate-700 hover:text-slate-900 hover:bg-slate-100 cursor-pointer border-l-2 border-transparent hover:border-slate-900 transition-all">
                      Refund for Returns
                    </div>
                  </div>
                </div>

                <!-- Abandoned Carts -->
<div class="border-b border-slate-100">
  <button onclick="toggleNavSection('abandoned-carts')" class="w-full flex items-center justify-between p-3 hover:bg-slate-50 transition-colors">
    <div class="flex items-center gap-2">
      <i data-lucide="shopping-cart" class="w-4 h-4 text-slate-600"></i>
      <span class="text-sm font-semibold text-slate-900">Abandoned Carts</span>
    </div>
    <i data-lucide="chevron-down" class="w-4 h-4 text-slate-400 nav-chevron" id="chevron-abandoned-carts"></i>
  </button>

  <div id="nav-abandoned-carts" class="bg-slate-50 hidden">
                    <div onclick="scrollToSection('abandoned-cart-script')" class="pl-9 pr-3 py-2 text-xs text-slate-700 hover:text-slate-900 hover:bg-slate-100 cursor-pointer border-l-2 border-transparent hover:border-slate-900 transition-all">
                      Recovery Script
                    </div>
                    <div onclick="scrollToSection('abandoned-outbound-scripts')" class="pl-9 pr-3 py-2 text-xs text-slate-700 hover:text-slate-900 hover:bg-slate-100 cursor-pointer border-l-2 border-transparent hover:border-slate-900 transition-all">
                      Outbound Call Scripts
                    </div>
                    <div onclick="scrollToSection('outbound-opening')" class="pl-12 pr-3 py-2 text-xs text-slate-500 hover:text-slate-900 hover:bg-slate-100 cursor-pointer border-l-2 border-transparent hover:border-slate-900 transition-all">
                      Opening Scripts
                    </div>
                    <div onclick="scrollToSection('outbound-empathy')" class="pl-12 pr-3 py-2 text-xs text-slate-500 hover:text-slate-900 hover:bg-slate-100 cursor-pointer border-l-2 border-transparent hover:border-slate-900 transition-all">
                      Empathy & Rapport
                    </div>
                    <div onclick="scrollToSection('outbound-rebuttals')" class="pl-12 pr-3 py-2 text-xs text-slate-500 hover:text-slate-900 hover:bg-slate-100 cursor-pointer border-l-2 border-transparent hover:border-slate-900 transition-all">
                      Rebuttals & Objections
                    </div>
                    <div onclick="scrollToSection('outbound-closing')" class="pl-12 pr-3 py-2 text-xs text-slate-500 hover:text-slate-900 hover:bg-slate-100 cursor-pointer border-l-2 border-transparent hover:border-slate-900 transition-all">
                      Closing Scripts
                    </div>
                  </div>
</div>



<!-- Customer Response Templates -->
<div class="border-b border-slate-100">
  <button onclick="toggleNavSection('customer-responses')" class="w-full flex items-center justify-between p-3 hover:bg-slate-50 transition-colors">
    <div class="flex items-center gap-2">
      <i data-lucide="message-square-text" class="w-4 h-4 text-slate-600"></i>
      <span class="text-sm font-semibold text-slate-900">Macro Scripts</span>
    </div>
    <i data-lucide="chevron-down" class="w-4 h-4 text-slate-400 nav-chevron" id="chevron-customer-responses"></i>
  </button>

<div id="nav-customer-responses" class="bg-slate-50 hidden">
                    <div onclick="scrollToSection('responses-abandoned-payment')" class="pl-9 pr-3 py-2 text-xs text-slate-700 hover:text-slate-900 hover:bg-slate-100 cursor-pointer border-l-2 border-transparent hover:border-slate-900 transition-all">
                      Abandoned & Payment Issues
                    </div>
                    <div onclick="scrollToSection('responses-shipping')" class="pl-9 pr-3 py-2 text-xs text-slate-700 hover:text-slate-900 hover:bg-slate-100 cursor-pointer border-l-2 border-transparent hover:border-slate-900 transition-all">
                      Shipping & Delivery
                    </div>
                    <div onclick="scrollToSection('responses-social')" class="pl-9 pr-3 py-2 text-xs text-slate-700 hover:text-slate-900 hover:bg-slate-100 cursor-pointer border-l-2 border-transparent hover:border-slate-900 transition-all">
                      Social Media Responses
                    </div>
                    <div onclick="scrollToSection('responses-returns')" class="pl-9 pr-3 py-2 text-xs text-slate-700 hover:text-slate-900 hover:bg-slate-100 cursor-pointer border-l-2 border-transparent hover:border-slate-900 transition-all">
                      Returns, Refunds & Damage
                    </div>
                    <div onclick="scrollToSection('responses-product')" class="pl-9 pr-3 py-2 text-xs text-slate-700 hover:text-slate-900 hover:bg-slate-100 cursor-pointer border-l-2 border-transparent hover:border-slate-900 transition-all">
                      Product & Store Inquiries
                    </div>
                    <div onclick="scrollToSection('responses-feedback')" class="pl-9 pr-3 py-2 text-xs text-slate-700 hover:text-slate-900 hover:bg-slate-100 cursor-pointer border-l-2 border-transparent hover:border-slate-900 transition-all">
                      Feedback & Reviews
                    </div>
                  </div>

</div>


                <!-- Tools -->
                <div>
                  <button onclick="toggleNavSection('tools')" class="w-full flex items-center justify-between p-3 hover:bg-slate-50 transition-colors">
                    <div class="flex items-center gap-2">
                      <i data-lucide="calculator" class="w-4 h-4 text-slate-600"></i>
                      <span class="text-sm font-semibold text-slate-900">Tools</span>
                    </div>
                    <i data-lucide="chevron-down" class="w-4 h-4 text-slate-400 nav-chevron" id="chevron-tools"></i>
                  </button>
                  <div id="nav-tools" class="bg-slate-50 hidden">
                    <div onclick="scrollToSection('retention-calculator')" class="pl-9 pr-3 py-2 text-xs text-slate-700 hover:text-slate-900 hover:bg-slate-100 cursor-pointer border-l-2 border-transparent hover:border-slate-900 transition-all">
                      Retention Calculator
                    </div>
                  </div>
                </div>

              </div>
            </div>
          </div>
        </div>

        <div class="flex-1 space-y-24 pb-32">
          
          <div id="shipping-matrix">
            <div class="mb-8">
              <span class="inline-block px-3 py-1 bg-slate-200 text-slate-700 text-[10px] font-bold rounded-full uppercase tracking-tighter mb-4">Procedure 01-A</span>
              <h2 class="text-4xl font-extrabold text-slate-900 tracking-tight">Shipping Address Matrix</h2>
              <p class="text-slate-500 mt-2 max-w-2xl text-lg">Standardized workflow for processing customer-requested delivery updates.</p>
            </div>

            <div class="bg-blue-600 rounded-2xl p-6 text-white mb-8 flex items-start gap-4 shadow-lg shadow-blue-100">
              <div class="p-3 bg-white/10 rounded-xl"><i data-lucide="info" class="w-6 h-6"></i></div>
              <div>
                <p class="font-bold mb-1">Mandatory Shopify Verification</p>
                <p class="text-sm text-blue-100">Always confirm fulfillment status in Shopify before discussing options with the customer. Status determines the entire path.</p>
              </div>
            </div>

            <table class="kb-table shadow-sm">
              <thead>
                <tr>
                  <th class="w-1/3">Condition / Inquiry</th>
                  <th>Action Protocol</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="font-bold text-slate-700 bg-slate-50/50">Initial Request</td>
                  <td>Check fulfillment status in Shopify</td>
                </tr>
                <tr>
                  <td class="font-bold text-slate-700">Status: <span class="text-rose-600">FULFILLED</span></td>
                  <td>
                    <div class="p-4 bg-rose-50 border border-rose-100 rounded-xl">
                      <p class="text-sm font-bold text-rose-800 mb-2">ðŸš« Modification Prohibited</p>
                      <p class="text-xs text-rose-700">Notify customer that order has shipped. Provide tracking and advise direct courier contact.</p>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td class="font-bold text-slate-700">Status: <span class="text-emerald-600">UNFULFILLED</span></td>
                  <td class="bg-emerald-50/30">Proceed to information gathering phase.</td>
                </tr>
                <tr>
                  <td class="font-bold">Gather Details</td>
                  <td>
                    <div class="kb-template p-4 rounded-xl" onclick="copyTemplate(this)">
                      <div class="copy-hint text-[10px] font-bold text-blue-600">CLICK TO COPY</div>
                      <p class="text-[10px] font-bold text-blue-500 uppercase mb-2 tracking-widest">Inquiry Template</p>
                      <p class="text-xs italic leading-relaxed">"Hi [Customer Name], thank you for reaching out! We can certainly help. Could you please provide your complete new address? We'll check with the warehouse team if the change can still be made."</p>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td class="font-bold">Address Verification</td>
                  <td>
                    <div class="flex items-center gap-2 p-3 bg-amber-50 text-amber-800 rounded-lg border border-amber-200 text-xs">
                      <i data-lucide="map" class="w-4 h-4"></i> Cross-check provided address via Google Maps before submission.
                    </div>
                  </td>
                </tr>
                <tr>
                  <td class="font-bold text-slate-700">Regional: <span class="text-blue-600">US-BASED</span></td>
                  <td>
                    <ul class="text-xs space-y-2 list-disc list-inside text-slate-600 font-medium">
                      <li>Apply <strong>HOLD</strong> in Shopify</li>
                      <li>Edit address directly in <strong>OMS</strong></li>
                      <li>Release hold & notify <strong>K&S Slack</strong></li>
                    </ul>
                  </td>
                </tr>
                <tr>
                  <td class="font-bold text-slate-700">Regional: <span class="text-purple-600">NON-US</span></td>
                  <td>
                    <ul class="text-xs space-y-2 list-disc list-inside text-slate-600 font-medium">
                      <li>Apply <strong>HOLD</strong> in Shopify</li>
                      <li><strong>Escalate to K&S</strong> (ERP modification required)</li>
                    </ul>
                  </td>
                </tr>
                <tr>
                  <td class="font-bold">Success Confirmation</td>
                  <td>
                    <div class="kb-template p-4 rounded-xl border-emerald-100 bg-emerald-50/50" onclick="copyTemplate(this)">
                      <div class="copy-hint text-[10px] font-bold text-emerald-600">CLICK TO COPY</div>
                      <p class="text-[10px] font-bold text-emerald-600 uppercase mb-2 tracking-widest">Confirmation Template</p>
                      <p class="text-xs italic leading-relaxed">"Great news! We were able to update your shipping address to [NEW ADDRESS]. You will receive tracking once it ships."</p>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <div id="mod-unfulfilled">
            <div class="mb-8">
              <span class="inline-block px-3 py-1 bg-blue-100 text-blue-700 text-[10px] font-bold rounded-full uppercase tracking-tighter mb-4">Procedure 02-B</span>
              <h2 class="text-4xl font-extrabold text-slate-900 tracking-tight">Order Modification</h2>
              <p class="text-slate-500 mt-2 max-w-2xl text-lg">Protocols for adding or removing items from active orders.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="glass-card p-8 border-t-4 border-t-emerald-500">
                    <h3 class="text-xl font-bold text-slate-900 mb-6 flex items-center gap-2">
                        <i data-lucide="plus-circle" class="text-emerald-500"></i> Adding Items
                    </h3>
                    <div class="space-y-6">
                        <div class="p-4 bg-slate-50 rounded-xl border border-slate-200">
                            <p class="text-[10px] font-bold text-slate-400 uppercase mb-2">Initial Step</p>
                            <p class="text-xs leading-relaxed italic">"Hi Customer! ðŸ˜Š We've received your request. Please confirm Product Name / Quantity / Link."</p>
                        </div>
                        <div class="space-y-4">
                            <div class="flex items-center gap-3">
                                <div class="w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-[10px] font-bold">US</div>
                                <p class="text-xs font-semibold">Update OMS -> Edit Shopify (Invoice Amount)</p>
                            </div>
                            <div class="flex items-center gap-3">
                                <div class="w-6 h-6 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center text-[10px] font-bold">GL</div>
                                <p class="text-xs font-semibold">Update Shopify -> Escalate to K&S Team</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="glass-card p-8 border-t-4 border-t-rose-500">
                    <h3 class="text-xl font-bold text-slate-900 mb-6 flex items-center gap-2">
                        <i data-lucide="minus-circle" class="text-rose-500"></i> Removing Items
                    </h3>
                    <div class="space-y-6">
                        <div class="p-4 bg-slate-50 rounded-xl border border-slate-200">
                            <p class="text-[10px] font-bold text-slate-400 uppercase mb-2">Requirements</p>
                            <p class="text-xs leading-relaxed italic">"Please provide: Product Name / Reason / PayPal for Refund."</p>
                        </div>
                        <ul class="text-xs space-y-3 font-medium text-slate-600">
                            <li class="flex gap-2 items-start"><i data-lucide="check" class="w-3 h-3 text-emerald-500 mt-1"></i> Process in ERP/OMS and Shopify</li>
                            <li class="flex gap-2 items-start"><i data-lucide="check" class="w-3 h-3 text-emerald-500 mt-1"></i> Trigger manual refund in Shopify</li>
                            <li class="flex gap-2 items-start"><i data-lucide="check" class="w-3 h-3 text-emerald-500 mt-1"></i> Notify: "Refund initiated (5-7 days)"</li>
                        </ul>
                    </div>
                </div>
            </div>
          </div>

          <div id="order-status">
            <h2 class="text-3xl font-bold text-slate-900 tracking-tight mb-8">Order Status Communication</h2>
            <div class="grid grid-cols-1 gap-4">
                <div class="kb-template p-6 rounded-2xl border-l-8 border-l-blue-500" onclick="copyTemplate(this)">
                    <p class="text-[10px] font-bold text-blue-500 uppercase mb-2">With Tracking Available</p>
                    <p class="text-xs leading-relaxed">"Hi Customer! Your order #(number) has shipped. Tracking: #XXXXXXXX. It's on its way!"</p>
                </div>
                <div class="kb-template p-6 rounded-2xl border-l-8 border-l-slate-400" onclick="copyTemplate(this)">
                    <p class="text-[10px] font-bold text-slate-500 uppercase mb-2">Processing (No Tracking)</p>
                    <p class="text-xs leading-relaxed">"Hi Customer! Order #(number) is being processed (1-3 business days). We'll email tracking once dispatched."</p>
                </div>
            </div>
          </div>

          <div id="cancellation">
            <h2 class="text-3xl font-bold text-slate-900 tracking-tight mb-8">Cancellation Workflow</h2>
            <div class="glass-card overflow-hidden">
                <div class="grid grid-cols-3 bg-slate-50 border-b border-slate-200 text-[10px] font-bold uppercase tracking-widest text-slate-400">
                    <div class="p-4 border-r border-slate-200">Scenario</div>
                    <div class="p-4 border-r border-slate-200">Restriction</div>
                    <div class="p-4">Process</div>
                </div>
                <div class="grid grid-cols-3 border-b border-slate-100 items-center">
                    <div class="p-6 text-sm font-bold border-r border-slate-100">Tracking Issued</div>
                    <div class="p-6 border-r border-slate-100">
                        <span class="px-3 py-1 bg-rose-50 text-rose-600 rounded-full font-bold text-[10px]">LOCKED</span>
                    </div>
                    <div class="p-6 text-xs text-slate-500">Suggest receiving package then initiating return.</div>
                </div>
                <div class="grid grid-cols-3 items-center">
                    <div class="p-6 text-sm font-bold border-r border-slate-100">Within 24 Hours</div>
                    <div class="p-6 border-r border-slate-100">
                        <span class="px-3 py-1 bg-emerald-50 text-emerald-600 rounded-full font-bold text-[10px]">ELIGIBLE</span>
                    </div>
                    <div class="p-6 text-xs">
                        <p class="font-bold text-slate-900 mb-1">Attempt Retention First</p>
                        <p class="text-slate-500">Hold in Shopify -> Offer Credit ($30-50) -> If declined, cancel in Shopify/OMS.</p>
                    </div>
                </div>
            </div>
          </div>

          <div id="refund-returns">
            <h2 class="text-3xl font-bold text-slate-900 tracking-tight mb-4">Refund for Returns</h2>
            <p class="text-slate-500 mb-8">Standard 90-day return policy management.</p>
            
            <div class="bg-indigo-900 rounded-3xl p-10 text-white relative overflow-hidden">
                <div class="relative z-10">
                    <h3 class="text-2xl font-bold mb-6">The 90-Day Window</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                        <div class="space-y-4">
                            <p class="text-indigo-200 font-bold uppercase text-[10px] tracking-widest">Eligibility Rules</p>
                            <ul class="text-sm space-y-3">
                                <li class="flex items-center gap-2"><i data-lucide="check-circle" class="w-4 h-4 text-indigo-400"></i> Original Packaging Required</li>
                                <li class="flex items-center gap-2"><i data-lucide="check-circle" class="w-4 h-4 text-indigo-400"></i> Unused & Same Condition</li>
                                <li class="flex items-center gap-2"><i data-lucide="check-circle" class="w-4 h-4 text-indigo-400"></i> Buyer pays return shipping</li>
                            </ul>
                        </div>
                        <div class="p-6 bg-white/10 rounded-2xl backdrop-blur-md">
                            <p class="font-bold mb-2">Policy Decline Template</p>
                            <p class="text-xs text-indigo-100 italic">"Unfortunately, your order is beyond the 90-day window. We can offer a coupon code for your next purchase as a gesture of goodwill."</p>
                        </div>
                    </div>
                </div>
                <div class="absolute -right-20 -bottom-20 w-80 h-80 bg-white/5 rounded-full"></div>
            </div>
          </div>

<div id="abandoned-cart-script">
  <h2 class="text-3xl font-bold text-slate-900 tracking-tight mb-4">
    Abandoned Cart Recovery
  </h2>
  <p class="text-slate-500 mb-8">
    Simple, compliant scripts to re-engage customers who started checkout but didnâ€™t complete their purchase.
  </p>

  <div class="space-y-8">

    <!-- ARTICLE 1: WHEN TO CALL -->
    <article class="bg-slate-50 rounded-2xl p-6">
      <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2">
        Article 1 Â· When to Contact
      </p>
      <ul class="text-sm text-slate-700 space-y-2">
        <li>â€¢ Customer added items and entered contact details</li>
        <li>â€¢ Call within 1â€“24 hours of cart abandonment</li>

    <li>â€¢ Call only between <span class="font-bold text-blue-600">8 a.m. â€“ 9 p.m.</span>  in the recipient's local time</li>

        <li>â€¢ Immediately honor opt-out or DNC requests</li>
        <li>â€¢ Violations can result in fines; follow federal and state rules</li>
      </ul>
    </article>


    <!-- ARTICLE 2: CORE CALL SCRIPT -->
    <article class="bg-emerald-900 rounded-2xl p-6 text-white">
      <p class="text-[10px] font-bold text-emerald-200 uppercase tracking-widest mb-3">
        Article 2 Â· Core Call Script
      </p>

      <div class="space-y-4 text-sm">
        <p class="italic">
          â€œHi, may I speak with <strong>[Customer Name]</strong>?  
          This is <strong>[Agent Name]</strong> calling from <strong>[Store Name]</strong>.
          You recently added items to your cart but didnâ€™t get a chance to check out.
          Is now a good time for a quick minute?â€
        </p>

        <p class="italic">
          â€œI just wanted to see if you had any questions or if something held you backâ€”
          shipping, pricing, or product details.â€
        </p>

        <p class="italic">
          â€œIf youâ€™d like, I can help you finish the order now or email you your cart link for later.â€
        </p>
      </div>
    </article>

    <!-- ARTICLE 3: SCRIPT VARIATIONS -->
    <article class="bg-slate-50 rounded-2xl p-6">
      <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-4">
        Article 3 Â· Script Variations
      </p>

      <div class="space-y-5 text-sm text-slate-700">

        <!-- Forgot -->
        <div>
          <p class="font-semibold mb-1">Customer Forgot</p>
          <p class="italic">
            â€œNo worries at allâ€”things get busy! You had <strong>[Product Name]</strong>
            in your cart, and itâ€™s one of our most popular items.â€
          </p>
        </div>

        <!-- Price -->
        <div>
          <p class="font-semibold mb-1">Price Concern</p>
          <p class="italic">
            â€œThanks for sharing that. If it helps, I can apply
            <strong>[free shipping / small promo]</strong> today.â€
          </p>
        </div>

        <!-- Shipping -->
        <div>
          <p class="font-semibold mb-1">Shipping Question</p>
          <p class="italic">
            â€œShipping typically takes <strong>[Xâ€“Y days]</strong>,
            and we send tracking as soon as it ships.â€
          </p>
        </div>

        <!-- Still Thinking -->
        <div>
          <p class="font-semibold mb-1">Still Thinking</p>
          <p class="italic">
            â€œTotally fine. Would it help if I emailed you your cart
            so you can check out when itâ€™s convenient?â€
          </p>
        </div>

        <!-- Soft Close -->
        <div>
          <p class="font-semibold mb-1">Soft Close</p>
          <p class="italic">
            â€œWould you like me to help complete the order now,
            or would you prefer the link by email?â€
          </p>
        </div>

      </div>
    </article>

  </div>
</div>


<!-- OUTBOUND CALL SCRIPTS SECTION -->
<div id="abandoned-outbound-scripts">
  <div class="mb-8">
    <span class="inline-block px-3 py-1 bg-orange-100 text-orange-700 text-[10px] font-bold rounded-full uppercase tracking-tighter mb-4">Outbound Guide</span>
    <h2 class="text-4xl font-extrabold text-slate-900 tracking-tight">Abandoned Checkout Outbound Scripts</h2>
    <p class="text-slate-500 mt-2 max-w-2xl text-lg">Complete call flow scripts for recovering abandoned checkouts through outbound calls.</p>
  </div>

  <div class="bg-orange-600 rounded-2xl p-6 text-white mb-8 flex items-start gap-4 shadow-lg shadow-orange-100">
    <div class="p-3 bg-white/10 rounded-xl"><i data-lucide="phone-outgoing" class="w-6 h-6"></i></div>
    <div>
      <p class="font-bold mb-1">Outbound Call Flow</p>
      <p class="text-sm text-orange-100">Follow this progression: Opening â†’ Build Rapport â†’ Handle Objections â†’ Close. Adapt based on customer responses.</p>
    </div>
  </div>

  <div class="space-y-10">

    <!-- SECTION 1: OPENING SCRIPTS -->
    <div id="outbound-opening" class="glass-card p-8 border-t-4 border-t-blue-500">
      <h3 class="text-xl font-bold text-slate-900 mb-2 flex items-center gap-2">
        <i data-lucide="phone-call" class="text-blue-500"></i> Opening Scripts
      </h3>
      <p class="text-sm text-slate-500 mb-6">First 5 scripts - Friendly, non-intrusive approach to start the conversation.</p>

      <div class="space-y-4">
        <div class="kb-template p-4 rounded-xl" onclick="copyTemplate(this)">
          <div class="copy-hint text-[10px] font-bold text-blue-600">CLICK TO COPY</div>
          <p class="text-[10px] font-bold text-blue-500 uppercase mb-2 tracking-widest">Script 1</p>
          <p class="text-sm leading-relaxed">"Hi [Name], this is [Your Name] from [Company]. I noticed you recently left some items in your cart. I just wanted to check if there's anything I can help you with?"</p>
        </div>

        <div class="kb-template p-4 rounded-xl" onclick="copyTemplate(this)">
          <div class="copy-hint text-[10px] font-bold text-blue-600">CLICK TO COPY</div>
          <p class="text-[10px] font-bold text-blue-500 uppercase mb-2 tracking-widest">Script 2</p>
          <p class="text-sm leading-relaxed">"Hello [Name], I'm [Your Name] calling from [Company]. I saw you were interested in [Product/Service] but didn't complete your checkout. Do you have any questions I can answer?"</p>
        </div>

        <div class="kb-template p-4 rounded-xl" onclick="copyTemplate(this)">
          <div class="copy-hint text-[10px] font-bold text-blue-600">CLICK TO COPY</div>
          <p class="text-[10px] font-bold text-blue-500 uppercase mb-2 tracking-widest">Script 3</p>
          <p class="text-sm leading-relaxed">"Hey [Name], it's [Your Name] from [Company]. I noticed your cart is still waiting. Did something stop you from finishing your order?"</p>
        </div>

        <div class="kb-template p-4 rounded-xl" onclick="copyTemplate(this)">
          <div class="copy-hint text-[10px] font-bold text-blue-600">CLICK TO COPY</div>
          <p class="text-[10px] font-bold text-blue-500 uppercase mb-2 tracking-widest">Script 4</p>
          <p class="text-sm leading-relaxed">"Hi [Name], this is [Your Name] with [Company]. I just wanted to follow up on your recent visit to our site and see if I can help you complete your order."</p>
        </div>

        <div class="kb-template p-4 rounded-xl" onclick="copyTemplate(this)">
          <div class="copy-hint text-[10px] font-bold text-blue-600">CLICK TO COPY</div>
          <p class="text-[10px] font-bold text-blue-500 uppercase mb-2 tracking-widest">Script 5</p>
          <p class="text-sm leading-relaxed">"Hello [Name], [Your Name] here from [Company]. I saw that you added [Product] to your cart but didn't check out. Can I help make the process easier?"</p>
        </div>
      </div>
    </div>

    <!-- SECTION 2: EMPATHY / BUILDING RAPPORT -->
    <div id="outbound-empathy" class="glass-card p-8 border-t-4 border-t-purple-500">
      <h3 class="text-xl font-bold text-slate-900 mb-2 flex items-center gap-2">
        <i data-lucide="heart-handshake" class="text-purple-500"></i> Empathy & Building Rapport
      </h3>
      <p class="text-sm text-slate-500 mb-6">Next 5 scripts - Show understanding and build trust with the customer.</p>

      <div class="space-y-4">
        <div class="kb-template p-4 rounded-xl border-purple-100" onclick="copyTemplate(this)">
          <div class="copy-hint text-[10px] font-bold text-purple-600">CLICK TO COPY</div>
          <p class="text-[10px] font-bold text-purple-500 uppercase mb-2 tracking-widest">Script 6</p>
          <p class="text-sm leading-relaxed">"I completely understand, sometimes life gets busy. Is there anything that's making the checkout tricky today?"</p>
        </div>

        <div class="kb-template p-4 rounded-xl border-purple-100" onclick="copyTemplate(this)">
          <div class="copy-hint text-[10px] font-bold text-purple-600">CLICK TO COPY</div>
          <p class="text-[10px] font-bold text-purple-500 uppercase mb-2 tracking-widest">Script 7</p>
          <p class="text-sm leading-relaxed">"I totally get it, [Name]. A lot of our customers hesitate at checkout. Can I clarify any details about the product for you?"</p>
        </div>

        <div class="kb-template p-4 rounded-xl border-purple-100" onclick="copyTemplate(this)">
          <div class="copy-hint text-[10px] font-bold text-purple-600">CLICK TO COPY</div>
          <p class="text-[10px] font-bold text-purple-500 uppercase mb-2 tracking-widest">Script 8</p>
          <p class="text-sm leading-relaxed">"It's normal to have questions before finalizing a purchase. Let me know what's on your mindâ€”I'm happy to help!"</p>
        </div>

        <div class="kb-template p-4 rounded-xl border-purple-100" onclick="copyTemplate(this)">
          <div class="copy-hint text-[10px] font-bold text-purple-600">CLICK TO COPY</div>
          <p class="text-[10px] font-bold text-purple-500 uppercase mb-2 tracking-widest">Script 9</p>
          <p class="text-sm leading-relaxed">"I hear you, [Name]. Online shopping can be overwhelming sometimes. I can guide you through the process if you'd like."</p>
        </div>

        <div class="kb-template p-4 rounded-xl border-purple-100" onclick="copyTemplate(this)">
          <div class="copy-hint text-[10px] font-bold text-purple-600">CLICK TO COPY</div>
          <p class="text-[10px] font-bold text-purple-500 uppercase mb-2 tracking-widest">Script 10</p>
          <p class="text-sm leading-relaxed">"I understand stopping midway is common. If something's holding you back, we can address it togetherâ€”no pressure."</p>
        </div>
      </div>
    </div>

    <!-- SECTION 3: REBUTTALS / HANDLING OBJECTIONS -->
    <div id="outbound-rebuttals" class="glass-card p-8 border-t-4 border-t-amber-500">
      <h3 class="text-xl font-bold text-slate-900 mb-2 flex items-center gap-2">
        <i data-lucide="shield-check" class="text-amber-500"></i> Rebuttals & Handling Objections
      </h3>
      <p class="text-sm text-slate-500 mb-6">Next 5 scripts - Address common reasons for cart abandonment.</p>

      <div class="space-y-4">
        <div class="kb-template p-4 rounded-xl border-amber-100" onclick="copyTemplate(this)">
          <div class="copy-hint text-[10px] font-bold text-amber-600">CLICK TO COPY</div>
          <p class="text-[10px] font-bold text-amber-600 uppercase mb-2 tracking-widest">Script 11 Â· Price Concerns</p>
          <p class="text-sm leading-relaxed">"I understand budget is important. Right now we have [promotion/discount] availableâ€”would you like me to apply that to your order?"</p>
        </div>

        <div class="kb-template p-4 rounded-xl border-amber-100" onclick="copyTemplate(this)">
          <div class="copy-hint text-[10px] font-bold text-amber-600">CLICK TO COPY</div>
          <p class="text-[10px] font-bold text-amber-600 uppercase mb-2 tracking-widest">Script 12 Â· Not Ready to Buy</p>
          <p class="text-sm leading-relaxed">"I get that timing matters. Just so you know, your cart will be saved for a limited time if you want to finish later."</p>
        </div>

        <div class="kb-template p-4 rounded-xl border-amber-100" onclick="copyTemplate(this)">
          <div class="copy-hint text-[10px] font-bold text-amber-600">CLICK TO COPY</div>
          <p class="text-[10px] font-bold text-amber-600 uppercase mb-2 tracking-widest">Script 13 Â· Shipping Concerns</p>
          <p class="text-sm leading-relaxed">"I hear you about shipping. We offer [free/fast shipping] for orders over [amount]. That might make things easier for you."</p>
        </div>

        <div class="kb-template p-4 rounded-xl border-amber-100" onclick="copyTemplate(this)">
          <div class="copy-hint text-[10px] font-bold text-amber-600">CLICK TO COPY</div>
          <p class="text-[10px] font-bold text-amber-600 uppercase mb-2 tracking-widest">Script 14 Â· Technical Issues</p>
          <p class="text-sm leading-relaxed">"I'm sorry if the checkout page was confusing. I can walk you through the steps over the phone or provide a direct link to make it simpler."</p>
        </div>

        <div class="kb-template p-4 rounded-xl border-amber-100" onclick="copyTemplate(this)">
          <div class="copy-hint text-[10px] font-bold text-amber-600">CLICK TO COPY</div>
          <p class="text-[10px] font-bold text-amber-600 uppercase mb-2 tracking-widest">Script 15 Â· Comparing Options</p>
          <p class="text-sm leading-relaxed">"That makes sense, it's always good to compare. Can I highlight why most of our customers choose [Product] over others?"</p>
        </div>
      </div>
    </div>

    <!-- SECTION 4: CLOSING / CALL TO ACTION -->
    <div id="outbound-closing" class="glass-card p-8 border-t-4 border-t-emerald-500">
      <h3 class="text-xl font-bold text-slate-900 mb-2 flex items-center gap-2">
        <i data-lucide="check-circle" class="text-emerald-500"></i> Closing & Call to Action
      </h3>
      <p class="text-sm text-slate-500 mb-6">Last 5 scripts - Gentle nudges to complete the purchase.</p>

      <div class="space-y-4">
        <div class="kb-template p-4 rounded-xl border-emerald-100 bg-emerald-50/30" onclick="copyTemplate(this)">
          <div class="copy-hint text-[10px] font-bold text-emerald-600">CLICK TO COPY</div>
          <p class="text-[10px] font-bold text-emerald-600 uppercase mb-2 tracking-widest">Script 16 Â· Soft Close</p>
          <p class="text-sm leading-relaxed">"Would you like me to help you complete your order now so you don't miss out on [product/offer]?"</p>
        </div>

        <div class="kb-template p-4 rounded-xl border-emerald-100 bg-emerald-50/30" onclick="copyTemplate(this)">
          <div class="copy-hint text-[10px] font-bold text-emerald-600">CLICK TO COPY</div>
          <p class="text-[10px] font-bold text-emerald-600 uppercase mb-2 tracking-widest">Script 17 Â· Urgency Close</p>
          <p class="text-sm leading-relaxed">"Your cart will only be saved for [X hours/days]. If you want, we can finalize your order right now to secure your items."</p>
        </div>

        <div class="kb-template p-4 rounded-xl border-emerald-100 bg-emerald-50/30" onclick="copyTemplate(this)">
          <div class="copy-hint text-[10px] font-bold text-emerald-600">CLICK TO COPY</div>
          <p class="text-[10px] font-bold text-emerald-600 uppercase mb-2 tracking-widest">Script 18 Â· Incentive Close</p>
          <p class="text-sm leading-relaxed">"If you complete your order today, I can add [discount/freebie/bonus] for you. Should I go ahead?"</p>
        </div>

        <div class="kb-template p-4 rounded-xl border-emerald-100 bg-emerald-50/30" onclick="copyTemplate(this)">
          <div class="copy-hint text-[10px] font-bold text-emerald-600">CLICK TO COPY</div>
          <p class="text-[10px] font-bold text-emerald-600 uppercase mb-2 tracking-widest">Script 19 Â· Reassurance Close</p>
          <p class="text-sm leading-relaxed">"I can assure you the checkout is safe and quick. If you'd like, I can process it with you now to save time."</p>
        </div>

        <div class="kb-template p-4 rounded-xl border-emerald-100 bg-emerald-50/30" onclick="copyTemplate(this)">
          <div class="copy-hint text-[10px] font-bold text-emerald-600">CLICK TO COPY</div>
          <p class="text-[10px] font-bold text-emerald-600 uppercase mb-2 tracking-widest">Script 20 Â· Friendly Reminder Close</p>
          <p class="text-sm leading-relaxed">"No pressure, [Name]. I just wanted to make sure you didn't miss out on the items in your cart. Want to finish your order today?"</p>
        </div>
      </div>
    </div>

  </div>
</div>


<div id="customer-response-templates">
  <h2 class="text-3xl font-bold text-slate-900 mb-4">
    Customer Response Templates
  </h2>
  <p class="text-slate-500 mb-10">
    Approved reply templates for sales, support, social media, shipping, refunds, and customer care.
  </p>

  <div class="space-y-12">

    <!-- ABANDONED / PAYMENT -->
    <section id="responses-abandoned-payment" class="space-y-6">
      <h3 class="text-xl font-semibold text-slate-900">Abandoned & Payment Issues</h3>

      <article class="bg-slate-50 rounded-2xl p-6">
        <p class="text-[10px] uppercase tracking-widest text-slate-400 mb-2">
          Abandon â€“ During Call
        </p>
        <pre class="text-sm text-slate-700 whitespace-pre-wrap">
Hello {{ticket.customer.firstname}},

Iâ€™d be happy to help you place your order.

You can use the following link to place your order:
[Insert link]

Before checking out, please apply this 20% discount code:
[Insert code]

If you run into any issues or have questions, Iâ€™m here to help.

Best regards,
{{current_user.firstname}}
Tsuki Glass Support
        </pre>
      </article>

      <article class="bg-slate-50 rounded-2xl p-6">
        <p class="text-[10px] uppercase tracking-widest text-slate-400 mb-2">
          Charged but No Order Found
        </p>
        <pre class="text-sm text-slate-700 whitespace-pre-wrap">
Hello {{ticket.customer.firstname}},

Thank you for reaching out. After checking our system, we do not see an order under your name.

To investigate further, please provide:
â€¢ Email and address used
â€¢ Date and time of charge
â€¢ Amount charged

Once received, weâ€™ll resolve this promptly.

Best regards,
{{current_user.firstname}}
        </pre>
      </article>
    </section>

    <!-- SHIPPING -->
    <section id="responses-shipping" class="space-y-6">
      <h3 class="text-xl font-semibold text-slate-900">Shipping & Delivery</h3>

      <article class="bg-slate-50 rounded-2xl p-6">
        <p class="text-[10px] uppercase tracking-widest text-slate-400 mb-2">
          Shipping Delay
        </p>
        <pre class="text-sm text-slate-700 whitespace-pre-wrap">
Hello {{ticket.customer.firstname}},

I sincerely apologize for the delay. Due to increased order volume, some shipments are delayed.

Your order has shipped and can be tracked here:
https://tsukiglass.com/apps/track123?nums=

Best regards,
{{current_user.firstname}}
        </pre>
      </article>

      <article class="bg-slate-50 rounded-2xl p-6">
        <p class="text-[10px] uppercase tracking-widest text-slate-400 mb-2">
          Delivered to Incorrect Address
        </p>
        <pre class="text-sm text-slate-700 whitespace-pre-wrap">
Hi {{ticket.customer.firstname}},

Weâ€™ve escalated this to our logistics team for urgent investigation.
Weâ€™ll update you immediately once we hear back.

Kind regards,
{{current_user.firstname}}
        </pre>
      </article>
    </section>

    <!-- SOCIAL -->
    <section id="responses-social" class="space-y-6">
      <h3 class="text-xl font-semibold text-slate-900">Social Media Responses</h3>

      <article class="bg-slate-50 rounded-2xl p-6">
        <p class="text-[10px] uppercase tracking-widest text-slate-400 mb-2">
          Loved the Glasses
        </p>
        <p class="text-sm italic text-slate-700">
          We absolutely love hearing this! ðŸŽ‰ Every TsukiGlass is handcrafted to elevate your experience.
        </p>
      </article>

      <article class="bg-slate-50 rounded-2xl p-6">
        <p class="text-[10px] uppercase tracking-widest text-slate-400 mb-2">
          Out of Stock
        </p>
        <p class="text-sm italic text-slate-700">
          Thanks for your interest! Please sign up for an email alert on the product page to be notified when itâ€™s back.
        </p>
      </article>
    </section>

    <!-- RETURNS -->
    <section id="responses-returns" class="space-y-6">
      <h3 class="text-xl font-semibold text-slate-900">Returns, Refunds & Damage</h3>

      <article class="bg-slate-50 rounded-2xl p-6">
        <p class="text-[10px] uppercase tracking-widest text-slate-400 mb-2">
          Broken Glass Replacement
        </p>
        <pre class="text-sm text-slate-700 whitespace-pre-wrap">
Dear {{ticket.customer.firstname}},

Weâ€™ve arranged a replacement set of 2 glasses.
No return is required.

Best regards,
{{current_user.firstname}}
        </pre>
      </article>

      <article class="bg-slate-50 rounded-2xl p-6">
        <p class="text-[10px] uppercase tracking-widest text-slate-400 mb-2">
          Return Beyond 30 Days
        </p>
        <pre class="text-sm text-slate-700 whitespace-pre-wrap">
While weâ€™re unable to process a refund, weâ€™d like to offer a 30% discount on your next order.

Code: X67YGF30ReturnGift
        </pre>
      </article>
    </section>

    <!-- PRODUCT -->
    <section id="responses-product" class="space-y-6">
      <h3 class="text-xl font-semibold text-slate-900">Product & Store Inquiries</h3>

      <article class="bg-slate-50 rounded-2xl p-6">
        <p class="text-[10px] uppercase tracking-widest text-slate-400 mb-2">
          Left-Handed Product Inquiry
        </p>
        <p class="text-sm text-slate-700">
          The Storm Japanese Crystal Whisky Glass is designed to be comfortable for both left- and right-handed users.
        </p>
      </article>
    </section>

    <!-- FEEDBACK -->
    <section id="responses-feedback" class="space-y-6">
      <h3 class="text-xl font-semibold text-slate-900">Feedback & Reviews</h3>

      <article class="bg-slate-50 rounded-2xl p-6">
        <p class="text-[10px] uppercase tracking-widest text-slate-400 mb-2">
          Positive Feedback
        </p>
        <p class="text-sm text-slate-700">
          Thank you so much for your kind words! Weâ€™d truly appreciate a review on Trustpilot.
        </p>
      </article>
    </section>

  </div>
</div>



          <div id="retention-calculator">
            <h2 class="text-3xl font-bold text-slate-900 tracking-tight mb-8">Retention Offer Calculator</h2>
            
            <div class="bg-white border border-slate-200 rounded-[32px] p-10 shadow-2xl shadow-slate-200/50">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-10 mb-10">
                <div class="space-y-2">
                  <label class="text-[10px] font-extrabold text-slate-400 uppercase tracking-widest">Order Total ($)</label>
                  <input type="number" id="orderAmount" placeholder="0.00" class="w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-2xl text-2xl font-bold focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 transition-all outline-none" oninput="calculateRetention()">
                </div>
                <div class="space-y-2">
                  <label class="text-[10px] font-extrabold text-slate-400 uppercase tracking-widest">Existing Discount (%)</label>
                  <input type="number" id="existingDiscount" value="0" min="0" max="20" class="w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-2xl text-2xl font-bold focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 transition-all outline-none" oninput="calculateRetention()">
                </div>
              </div>

              <div id="results" class="hidden animate-in fade-in slide-in-from-bottom-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <div class="p-8 bg-blue-600 text-white rounded-[24px]">
                        <p class="text-[10px] font-bold uppercase tracking-widest opacity-80 mb-4">Option A: Partial Refund</p>
                        <h4 class="text-4xl font-bold mb-2" id="refundAmount">$0.00</h4>
                        <p class="text-xs text-blue-100 mb-6">Immediate refund + <span id="refundDiscount">30%</span> coupon</p>
                        <div class="pt-6 border-t border-white/20">
                            <p class="text-[10px] uppercase font-bold opacity-60">Customer Net Pay</p>
                            <p class="text-xl font-bold" id="refundNetAmount">$0.00</p>
                        </div>
                    </div>
                    <div class="p-8 bg-slate-900 text-white rounded-[24px]">
                        <p class="text-[10px] font-bold uppercase tracking-widest opacity-80 mb-4">Option B: Store Credit</p>
                        <h4 class="text-4xl font-bold mb-2" id="creditAmount">$0.00</h4>
                        <p class="text-xs text-slate-400 mb-6">Store credit + <span id="creditDiscount">30%</span> coupon</p>
                        <div class="pt-6 border-t border-white/20">
                            <p class="text-[10px] uppercase font-bold opacity-60">Total Value Offered</p>
                            <p class="text-xl font-bold" id="creditTotalValue">$0.00</p>
                        </div>
                    </div>
                </div>

                <div class="bg-slate-50 border border-slate-200 rounded-2xl p-6">
                    <p class="text-[10px] font-bold text-slate-400 uppercase mb-4 tracking-widest">Personalized Script</p>
                    <div class="text-sm text-slate-700 leading-relaxed font-medium" id="scriptTemplate"></div>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>

    <section id="view-schedule" class="view-content hidden">
      <!-- Header with Week Navigation -->
      <div class="flex justify-between items-center mb-6">
        <div>
          <h1 class="text-3xl font-bold text-slate-900 tracking-tight">Schedule</h1>
          <p class="text-slate-500 mt-1">Shift Scheduling and Coverage</p>
        </div>
        <div class="flex items-center gap-3">
          <button class="bg-white border border-slate-200 px-4 py-2 rounded-lg text-sm font-semibold text-slate-600 hover:bg-slate-50 flex items-center gap-2">
            <i data-lucide="download" class="w-4 h-4"></i> Export
          </button>
          <button class="bg-slate-900 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-slate-800 flex items-center gap-2">
            <i data-lucide="plus" class="w-4 h-4"></i> Add Shift
          </button>
        </div>
      </div>

      <!-- Week Navigation Bar -->
      <div class="glass-card p-4 mb-6 flex items-center justify-between">
        <div class="flex items-center gap-4">
          <button class="p-2 hover:bg-slate-100 rounded-lg transition-colors">
            <i data-lucide="chevron-left" class="w-5 h-5 text-slate-600"></i>
          </button>
          <div class="flex items-center gap-3">
            <h2 class="text-xl font-bold text-slate-900">Jan 5 - Jan 11</h2>
            <button class="p-1 hover:bg-slate-100 rounded transition-colors">
              <i data-lucide="calendar" class="w-4 h-4 text-slate-500"></i>
            </button>
          </div>
          <button class="p-2 hover:bg-slate-100 rounded-lg transition-colors">
            <i data-lucide="chevron-right" class="w-5 h-5 text-slate-600"></i>
          </button>
        </div>
        <div class="flex items-center gap-2">
          <select class="bg-white border border-slate-200 px-3 py-2 rounded-lg text-sm font-medium text-slate-700">
            <option>Week</option>
            <option>Day</option>
            <option>Month</option>
          </select>
          <select class="bg-white border border-slate-200 px-3 py-2 rounded-lg text-sm font-medium text-slate-700">
            <option>All Employees (12)</option>
            <option>Agents Only</option>
            <option>Team Leads</option>
          </select>
        </div>
      </div>

      <!-- Calendar Grid -->
      <div class="glass-card overflow-hidden">
        <!-- Day Headers -->
<!-- Day Headers -->
<div class="grid grid-cols-8 border-b border-slate-200 bg-slate-50" id="week-header">
  <div class="p-4 border-r border-slate-200">
    <p class="text-xs font-bold text-slate-500 uppercase tracking-wider">Employee</p>
  </div>
  <div class="p-4 text-center border-r border-slate-200" data-day="Mon"></div>
  <div class="p-4 text-center border-r border-slate-200" data-day="Tue"></div>
  <div class="p-4 text-center border-r border-slate-200" data-day="Wed"></div>
  <div class="p-4 text-center border-r border-slate-200" data-day="Thu"></div>
  <div class="p-4 text-center border-r border-slate-200" data-day="Fri"></div>
  <div class="p-4 text-center border-r border-slate-200" data-day="Sat"></div>
  <div class="p-4 text-center" data-day="Sun"></div>
</div>


        <!-- Employee Rows -->
        <div id="schedule-tbody">
        <!-- Agent 1 -->
        <div class="grid grid-cols-8 border-b border-slate-100 hover:bg-slate-50 transition-colors">
          <div class="p-4 border-r border-slate-100 flex items-center gap-3">
            <div class="w-8 h-8 rounded-full bg-cyan-500 flex items-center justify-center text-white font-bold text-sm">A1</div>
            <div>
              <p class="font-semibold text-slate-900 text-sm">Agent 1</p>
              <p class="text-xs text-slate-500">40.00 Hrs/week</p>
            </div>
          </div>
          <div class="p-2 border-r border-slate-100 flex items-center justify-center">
            <div class="bg-cyan-500 text-white px-3 py-2 rounded text-xs font-semibold text-center w-full">
              <div class="font-bold">7PM - 4AM</div>
              <div class="text-[10px] opacity-90 mt-1">AGENT</div>
            </div>
          </div>
          <div class="p-2 border-r border-slate-100 flex items-center justify-center">
            <div class="bg-cyan-500 text-white px-3 py-2 rounded text-xs font-semibold text-center w-full">
              <div class="font-bold">7PM - 4AM</div>
              <div class="text-[10px] opacity-90 mt-1">AGENT</div>
            </div>
          </div>
          <div class="p-2 border-r border-slate-100 flex items-center justify-center">
            <div class="bg-cyan-500 text-white px-3 py-2 rounded text-xs font-semibold text-center w-full">
              <div class="font-bold">7PM - 4AM</div>
              <div class="text-[10px] opacity-90 mt-1">AGENT</div>
            </div>
          </div>
          <div class="p-2 border-r border-slate-100 flex items-center justify-center bg-blue-50">
            <div class="bg-cyan-500 text-white px-3 py-2 rounded text-xs font-semibold text-center w-full">
              <div class="font-bold">7PM - 4AM</div>
              <div class="text-[10px] opacity-90 mt-1">AGENT</div>
            </div>
          </div>
          <div class="p-2 border-r border-slate-100 flex items-center justify-center">
            <div class="bg-cyan-500 text-white px-3 py-2 rounded text-xs font-semibold text-center w-full">
              <div class="font-bold">7PM - 4AM</div>
              <div class="text-[10px] opacity-90 mt-1">AGENT</div>
            </div>
          </div>
          <div class="p-2 border-r border-slate-100 flex items-center justify-center">
            <div class="bg-slate-100 text-slate-400 px-3 py-2 rounded text-xs font-semibold text-center w-full">OFF</div>
          </div>
          <div class="p-2 flex items-center justify-center">
            <div class="bg-slate-100 text-slate-400 px-3 py-2 rounded text-xs font-semibold text-center w-full">OFF</div>
          </div>
        </div>

        <!-- Agent 2 -->
        <div class="grid grid-cols-8 border-b border-slate-100 hover:bg-slate-50 transition-colors">
          <div class="p-4 border-r border-slate-100 flex items-center gap-3">
            <div class="w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-400 font-bold text-sm">A2</div>
            <div>
              <p class="font-semibold text-slate-900 text-sm">Agent 2</p>
              <p class="text-xs text-slate-500">40.00 Hrs/week</p>
            </div>
          </div>

                    <div class="p-2 border-r border-slate-100 flex items-center justify-center">
            <div class="bg-slate-100 text-slate-400 px-3 py-2 rounded text-xs font-semibold text-center w-full">OFF</div>
          </div>
          <div class="p-2 border-r border-slate-100 flex items-center justify-center">
               <div class="bg-slate-100 text-slate-600 px-3 py-2 rounded text-xs font-semibold text-center w-full border border-slate-200">
              <div class="font-bold">4AM - 1PM</div>
              <div class="text-[10px] opacity-90 mt-1">AGENT</div>
            </div>
          </div>

          <div class="p-2 border-r border-slate-100 flex items-center justify-center">
            <div class="bg-slate-100 text-slate-600 px-3 py-2 rounded text-xs font-semibold text-center w-full border border-slate-200">
              <div class="font-bold">4AM - 1PM</div>
              <div class="text-[10px] opacity-90 mt-1">AGENT</div>
            </div>
          </div>
          <div class="p-2 border-r border-slate-100 flex items-center justify-center bg-blue-50">
            <div class="bg-slate-100 text-slate-600 px-3 py-2 rounded text-xs font-semibold text-center w-full border border-slate-200">
              <div class="font-bold">4AM - 1PM</div>
              <div class="text-[10px] opacity-90 mt-1">AGENT</div>
            </div>
          </div>
          <div class="p-2 border-r border-slate-100 flex items-center justify-center">
            <div class="bg-slate-100 text-slate-600 px-3 py-2 rounded text-xs font-semibold text-center w-full border border-slate-200">
              <div class="font-bold">4AM - 1PM</div>
              <div class="text-[10px] opacity-90 mt-1">AGENT</div>
            </div>
          </div>
          <div class="p-2 border-r border-slate-100 flex items-center justify-center">
            <div class="bg-slate-100 text-slate-600 px-3 py-2 rounded text-xs font-semibold text-center w-full border border-slate-200">
              <div class="font-bold">4AM - 1PM</div>
              <div class="text-[10px] opacity-90 mt-1">AGENT</div>
            </div>
          </div>
          <div class="p-2 flex items-center justify-center">
            <div class="bg-slate-100 text-slate-400 px-3 py-2 rounded text-xs font-semibold text-center w-full">OFF</div>
          </div>
        </div>

        <!-- Team Lead - Backup 1 -->
        <div class="grid grid-cols-8 border-b border-slate-100 hover:bg-slate-50 transition-colors">
          <div class="p-4 border-r border-slate-100 flex items-center gap-3">
            <div class="w-8 h-8 rounded-full bg-emerald-500 flex items-center justify-center text-white font-bold text-sm">B1</div>
            <div>
              <p class="font-semibold text-slate-900 text-sm">Backup 1</p>
              <p class="text-xs text-slate-500">Team Lead</p>
            </div>
          </div>
          <div class="p-2 flex items-center justify-center">
            <div class="bg-slate-100 text-slate-400 px-3 py-2 rounded text-xs font-semibold text-center w-full">OFF</div>
          </div>
          <div class="p-2 border-r border-slate-100 flex items-center justify-center">
            <div class="bg-emerald-300 text-slate-600 px-3 py-2 rounded text-xs font-semibold text-center w-full">
              <div class="font-bold">ON-CALL</div>
              <div class="text-[10px] opacity-70 mt-1">BACKUP</div>
            </div>
          </div>
          <div class="p-2 border-r border-slate-100 flex items-center justify-center">
            <div class="bg-emerald-300 text-slate-600 px-3 py-2 rounded text-xs font-semibold text-center w-full">
              <div class="font-bold">ON-CALL</div>
              <div class="text-[10px] opacity-70 mt-1">BACKUP</div>
            </div>
          </div>
          <div class="p-2 border-r border-slate-100 flex items-center justify-center bg-blue-50">
            <div class="bg-emerald-300 text-slate-600 px-3 py-2 rounded text-xs font-semibold text-center w-full">
              <div class="font-bold">ON-CALL</div>
              <div class="text-[10px] opacity-70 mt-1">BACKUP</div>
            </div>
          </div>
          <div class="p-2 border-r border-slate-100 flex items-center justify-center">
            <div class="bg-emerald-300 text-slate-600 px-3 py-2 rounded text-xs font-semibold text-center w-full">
              <div class="font-bold">ON-CALL</div>
              <div class="text-[10px] opacity-70 mt-1">BACKUP</div>
            </div>
          </div>
          <div class="p-2 border-r border-slate-100 flex items-center justify-center">
            <div class="bg-emerald-300 text-slate-600 px-3 py-2 rounded text-xs font-semibold text-center w-full">
              <div class="font-bold">ON-CALL</div>
              <div class="text-[10px] opacity-70 mt-1">BACKUP</div>
            </div>
          </div>
          <div class="p-2 flex items-center justify-center">
            <div class="bg-slate-100 text-slate-400 px-3 py-2 rounded text-xs font-semibold text-center w-full">OFF</div>
          </div>
        </div>

        <!-- Team Lead - Backup 2 -->
        <div class="grid grid-cols-8 border-b border-slate-100 hover:bg-slate-50 transition-colors">
          <div class="p-4 border-r border-slate-100 flex items-center gap-3">
            <div class="w-8 h-8 rounded-full bg-emerald-600 flex items-center justify-center text-white font-bold text-sm">B2</div>
            <div>
              <p class="font-semibold text-slate-900 text-sm">Backup 2</p>
              <p class="text-xs text-slate-500">Team Lead</p>
            </div>
          </div>
          <div class="p-2 border-r border-slate-100 flex items-center justify-center">
            <div class="bg-slate-100 text-slate-600 px-3 py-2 rounded text-xs font-semibold text-center w-full border border-slate-200">
              <div class="font-bold">ON-CALL</div>
              <div class="text-[10px] opacity-70 mt-1">BACKUP</div>
            </div>
          </div>
          <div class="p-2 border-r border-slate-100 flex items-center justify-center">
            <div class="bg-slate-100 text-slate-600 px-3 py-2 rounded text-xs font-semibold text-center w-full border border-slate-200">
              <div class="font-bold">ON-CALL</div>
              <div class="text-[10px] opacity-70 mt-1">BACKUP</div>
            </div>
          </div>
          <div class="p-2 border-r border-slate-100 flex items-center justify-center">
            <div class="bg-slate-100 text-slate-600 px-3 py-2 rounded text-xs font-semibold text-center w-full border border-slate-200">
              <div class="font-bold">ON-CALL</div>
              <div class="text-[10px] opacity-70 mt-1">BACKUP</div>
            </div>
          </div>
          <div class="p-2 border-r border-slate-100 flex items-center justify-center bg-blue-50">
            <div class="bg-slate-100 text-slate-600 px-3 py-2 rounded text-xs font-semibold text-center w-full border border-slate-200">
              <div class="font-bold">ON-CALL</div>
              <div class="text-[10px] opacity-70 mt-1">BACKUP</div>
            </div>
          </div>
          <div class="p-2 border-r border-slate-100 flex items-center justify-center">
            <div class="bg-slate-100 text-slate-600 px-3 py-2 rounded text-xs font-semibold text-center w-full border border-slate-200">
              <div class="font-bold">ON-CALL</div>
              <div class="text-[10px] opacity-70 mt-1">BACKUP</div>
            </div>
          </div>
          <div class="p-2 border-r border-slate-100 flex items-center justify-center">
            <div class="bg-slate-100 text-slate-400 px-3 py-2 rounded text-xs font-semibold text-center w-full">OFF</div>
          </div>
          <div class="p-2 flex items-center justify-center">
            <div class="bg-slate-100 text-slate-400 px-3 py-2 rounded text-xs font-semibold text-center w-full">OFF</div>
          </div>
        </div>

        <!-- Project Manager -->
        <div class="grid grid-cols-8 hover:bg-slate-50 transition-colors">
          <div class="p-4 border-r border-slate-100 flex items-center gap-3">
            <div class="w-8 h-8 rounded-full bg-purple-500 flex items-center justify-center text-white font-bold text-sm">PM</div>
            <div>
              <p class="font-semibold text-slate-900 text-sm">Project Mgr.</p>
              <p class="text-xs text-slate-500">Management</p>
            </div>
          </div>
          <div class="p-2 border-r border-slate-100 flex items-center justify-center">
            <div class="bg-purple-500 text-white px-3 py-2 rounded text-xs font-semibold text-center w-full">
              <div class="font-bold">MANAGER</div>
              <div class="text-[10px] opacity-90 mt-1">STRATEGY</div>
            </div>
          </div>
          <div class="p-2 border-r border-slate-100 flex items-center justify-center">
            <div class="bg-purple-500 text-white px-3 py-2 rounded text-xs font-semibold text-center w-full">
              <div class="font-bold">MANAGER</div>
              <div class="text-[10px] opacity-90 mt-1">STRATEGY</div>
            </div>
          </div>
          <div class="p-2 border-r border-slate-100 flex items-center justify-center">
            <div class="bg-purple-500 text-white px-3 py-2 rounded text-xs font-semibold text-center w-full">
              <div class="font-bold">MANAGER</div>
              <div class="text-[10px] opacity-90 mt-1">STRATEGY</div>
            </div>
          </div>
          <div class="p-2 border-r border-slate-100 flex items-center justify-center bg-blue-50">
            <div class="bg-purple-500 text-white px-3 py-2 rounded text-xs font-semibold text-center w-full">
              <div class="font-bold">MANAGER</div>
              <div class="text-[10px] opacity-90 mt-1">STRATEGY</div>
            </div>
          </div>
          <div class="p-2 border-r border-slate-100 flex items-center justify-center">
            <div class="bg-purple-500 text-white px-3 py-2 rounded text-xs font-semibold text-center w-full">
              <div class="font-bold">MANAGER</div>
              <div class="text-[10px] opacity-90 mt-1">STRATEGY</div>
            </div>
          </div>
          <div class="p-2 border-r border-slate-100 flex items-center justify-center">
            <div class="bg-slate-100 text-slate-400 px-3 py-2 rounded text-xs font-semibold text-center w-full">OFF</div>
          </div>
          <div class="p-2 flex items-center justify-center">
            <div class="bg-slate-100 text-slate-400 px-3 py-2 rounded text-xs font-semibold text-center w-full">OFF</div>
          </div>
        </div>
        </div>
      </div>

      <!-- Summary Stats -->
      <div class="grid grid-cols-4 gap-6 mt-6">
        <div class="glass-card p-6">
          <p class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">Total Scheduled Hours</p>
          <p class="text-3xl font-bold text-slate-900">80.0</p>
          <p class="text-xs text-slate-500 mt-1">Per week</p>
        </div>
        <div class="glass-card p-6">
          <p class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">Coverage Rate</p>
          <p class="text-3xl font-bold text-emerald-600">100%</p>
          <p class="text-xs text-slate-500 mt-1">All shifts covered</p>
        </div>
        <div class="glass-card p-6">
          <p class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">Active Employees</p>
          <p class="text-3xl font-bold text-slate-900">4</p>
          <p class="text-xs text-slate-500 mt-1">1 Agent, 2 TL, 1 PM</p>
        </div>
        <div class="glass-card p-6">
          <p class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">Backup Coverage</p>
          <p class="text-3xl font-bold text-blue-600">2</p>
          <p class="text-xs text-slate-500 mt-1">Team leads on-call</p>
        </div>
      </div>
    </section>

    <section id="view-settings" class="view-content hidden">
      <div class="flex justify-between items-center mb-8">
        <h1 class="text-3xl font-bold text-slate-900">Role Permissions</h1>
        <button onclick="toggleAddUserModal()" class="bg-slate-900 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-slate-800 flex items-center gap-2">
          <i data-lucide="plus" class="w-4 h-4"></i> Add User
        </button>
      </div>

      <!-- Add User Modal -->
      <div id="addUserModal" class="hidden mb-6 bg-white border border-slate-200 rounded-lg p-6">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-bold text-slate-900">Add New User</h3>
          <button onclick="toggleAddUserModal()" class="text-slate-400 hover:text-slate-900">
            <i data-lucide="x" class="w-5 h-5"></i>
          </button>
        </div>
        <div class="grid grid-cols-2 gap-4 mb-4">
          <div>
            <label class="text-xs font-semibold text-slate-600 block mb-2">Full Name</label>
            <input type="text" placeholder="John Doe" class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
          <div>
            <label class="text-xs font-semibold text-slate-600 block mb-2">Email</label>
            <input type="email" placeholder="john@example.com" class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
          <div>
            <label class="text-xs font-semibold text-slate-600 block mb-2">Username</label>
            <input type="text" placeholder="johndoe" class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
          <div>
            <label class="text-xs font-semibold text-slate-600 block mb-2">Role</label>
            <select class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
              <option value="">Select role...</option>
              <option value="agent">Agent</option>
              <option value="agent">Agent</option>
              <option value="lead">Team Lead</option>
              <option value="admin">Administrator</option>
            </select>
          </div>
        </div>
        <div class="flex gap-2 justify-end">
          <button onclick="toggleAddUserModal()" class="px-4 py-2 text-sm font-semibold text-slate-600 hover:bg-slate-50 rounded-lg">Cancel</button>
          <button class="px-4 py-2 text-sm font-semibold bg-slate-900 text-white hover:bg-slate-800 rounded-lg">Add User</button>
        </div>
      </div>

      <!-- Edit User Modal -->
      <div id="editUserModal" class="hidden mb-6 bg-white border border-slate-200 rounded-lg p-6">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-bold text-slate-900">Edit User</h3>
          <button onclick="toggleEditUserModal()" class="text-slate-400 hover:text-slate-900">
            <i data-lucide="x" class="w-5 h-5"></i>
          </button>
        </div>
        <div class="grid grid-cols-2 gap-4 mb-4">
          <div>
            <label class="text-xs font-semibold text-slate-600 block mb-2">Full Name</label>
            <input type="text" id="editFullName" class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
          <div>
            <label class="text-xs font-semibold text-slate-600 block mb-2">Email</label>
            <input type="email" id="editEmail" class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
          <div>
            <label class="text-xs font-semibold text-slate-600 block mb-2">Username</label>
            <input type="text" id="editUsername" class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-slate-50" disabled>
          </div>
          <div>
            <label class="text-xs font-semibold text-slate-600 block mb-2">Role</label>
            <select id="editRole" class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
              <option value="agent">Agent</option>
              <option value="agent">Agent</option>
              <option value="lead">Team Lead</option>
              <option value="admin">Administrator</option>
            </select>
          </div>
        </div>
        <div class="flex gap-2 justify-end">
          <button onclick="toggleEditUserModal()" class="px-4 py-2 text-sm font-semibold text-slate-600 hover:bg-slate-50 rounded-lg">Cancel</button>
          <button class="px-4 py-2 text-sm font-semibold bg-slate-900 text-white hover:bg-slate-800 rounded-lg">Save Changes</button>
        </div>
      </div>

      <div class="glass-card overflow-hidden">
        <table class="w-full text-left">
          <thead class="bg-slate-50 border-b border-slate-200">
            <tr>
              <th class="px-6 py-4 text-[11px] font-bold text-slate-400 uppercase tracking-wider">Username</th>
              <th class="px-6 py-4 text-[11px] font-bold text-slate-400 uppercase tracking-wider">Role</th>
              <th class="px-6 py-4 text-[11px] font-bold text-slate-400 uppercase tracking-wider w-24">Actions</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-slate-100 bg-white">
            <tr class="hover:bg-slate-50/50 transition-colors">
              <td class="px-6 py-4">
                <div class="flex items-center gap-3">
                  <div class="w-8 h-8 bg-slate-100 rounded-full flex items-center justify-center font-bold text-xs text-slate-600">A1</div>
                  <span class="text-sm font-semibold text-slate-900">Agent 1</span>
                </div>
              </td>
              <td class="px-6 py-4">
                <select class="text-xs font-semibold px-3 py-1 border border-slate-200 rounded-full bg-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                  <option value="agent" selected>Agent</option>
              <option value="agent">Agent</option>
                  <option value="lead">Team Lead</option>
                  <option value="admin">Administrator</option>
                </select>
              </td>
              <td class="px-6 py-4">
                <button onclick="openEditUser('Agent 1', 'agent1@tsukiglass.com', 'agent')" class="text-slate-400 hover:text-slate-900 transition-colors">
                  <i data-lucide="pencil" class="w-4 h-4"></i>
                </button>
              </td>
            </tr>
            <tr class="hover:bg-slate-50/50 transition-colors">
              <td class="px-6 py-4">
                <div class="flex items-center gap-3">
                  <div class="w-8 h-8 bg-slate-100 rounded-full flex items-center justify-center font-bold text-xs text-slate-600">A2</div>
                  <span class="text-sm font-semibold text-slate-900">Agent 2</span>
                </div>
              </td>
              <td class="px-6 py-4">
                <select class="text-xs font-semibold px-3 py-1 border border-slate-200 rounded-full bg-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                  <option value="agent">Agent</option>
              <option value="agent">Agent</option>
                  <option value="lead">Team Lead</option>
                  <option value="admin">Administrator</option>
                </select>
              </td>
              <td class="px-6 py-4">
                <button onclick="openEditUser('Agent 2', 'agent2@tsukiglass.com', 'qa')" class="text-slate-400 hover:text-slate-900 transition-colors">
                  <i data-lucide="pencil" class="w-4 h-4"></i>
                </button>
              </td>
            </tr>
            <tr class="hover:bg-slate-50/50 transition-colors">
              <td class="px-6 py-4">
                <div class="flex items-center gap-3">
                  <div class="w-8 h-8 bg-slate-100 rounded-full flex items-center justify-center font-bold text-xs text-slate-600">B1</div>
                  <span class="text-sm font-semibold text-slate-900">Backup 1</span>
                </div>
              </td>
              <td class="px-6 py-4">
                <select class="text-xs font-semibold px-3 py-1 border border-slate-200 rounded-full bg-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                  <option value="agent">Agent</option>
                  <option value="qa">Quality Assurance</option>
                  <option value="lead" selected>Team Lead</option>
                  <option value="admin">Administrator</option>
                </select>
              </td>
              <td class="px-6 py-4">
                <button onclick="openEditUser('Backup 1', 'backup1@tsukiglass.com', 'lead')" class="text-slate-400 hover:text-slate-900 transition-colors">
                  <i data-lucide="pencil" class="w-4 h-4"></i>
                </button>
              </td>
            </tr>
            <tr class="hover:bg-slate-50/50 transition-colors">
              <td class="px-6 py-4">
                <div class="flex items-center gap-3">
                  <div class="w-8 h-8 bg-slate-100 rounded-full flex items-center justify-center font-bold text-xs text-slate-600">B2</div>
                  <span class="text-sm font-semibold text-slate-900">Backup 2</span>
                </div>
              </td>
              <td class="px-6 py-4">
                <select class="text-xs font-semibold px-3 py-1 border border-slate-200 rounded-full bg-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                  <option value="agent">Agent</option>
                  <option value="qa">Quality Assurance</option>
                  <option value="lead" selected>Team Lead</option>
                  <option value="admin">Administrator</option>
                </select>
              </td>
              <td class="px-6 py-4">
                <button onclick="openEditUser('Backup 2', 'backup2@tsukiglass.com', 'lead')" class="text-slate-400 hover:text-slate-900 transition-colors">
                  <i data-lucide="pencil" class="w-4 h-4"></i>
                </button>
              </td>
            </tr>
            <tr class="hover:bg-slate-50/50 transition-colors">
              <td class="px-6 py-4">
                <div class="flex items-center gap-3">
                  <div class="w-8 h-8 bg-slate-100 rounded-full flex items-center justify-center font-bold text-xs text-slate-600">PM</div>
                  <span class="text-sm font-semibold text-slate-900">Project Manager</span>
                </div>
              </td>
              <td class="px-6 py-4">
                <select class="text-xs font-semibold px-3 py-1 border border-slate-200 rounded-full bg-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                  <option value="agent">Agent</option>
                  <option value="qa">Quality Assurance</option>
                  <option value="lead">Team Lead</option>
                  <option value="admin" selected>Administrator</option>
                </select>
              </td>
              <td class="px-6 py-4">
                <button onclick="openEditUser('Project Manager', 'pm@tsukiglass.com', 'admin')" class="text-slate-400 hover:text-slate-900 transition-colors">
                  <i data-lucide="pencil" class="w-4 h-4"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

  </main>

  <script>
    // Google Apps Script Integration
    const GAS_MODE = typeof google !== 'undefined' && google.script; // Detect if running in Apps Script

    // Load schedule data from Google Sheets
    function loadScheduleData() {
      if (GAS_MODE) {
        google.script.run
          .withSuccessHandler(onScheduleDataLoaded)
          .withFailureHandler(onScheduleError)
          .getScheduleData();
      } else {
        console.log('Running in standalone mode - using static data');
      }
    }

    // Callback when schedule data is loaded
    function onScheduleDataLoaded(response) {
      if (response.error) {
        console.error('Error loading schedule:', response.error);
        alert('Error loading schedule: ' + response.error);
        return;
      }

      if (response.success && response.data) {
        renderSchedule(response.data);
      }
    }

    // Error handler
    function onScheduleError(error) {
      console.error('Apps Script error:', error);
      alert('Error communicating with server: ' + error.message);
    }

    // Render schedule table from data
    function renderSchedule(scheduleData) {
      const tbody = document.getElementById('schedule-tbody');
      if (!tbody) return;

      tbody.innerHTML = '';

      scheduleData.forEach((employee, index) => {
        const row = createScheduleRow(employee, index);
        tbody.appendChild(row);
      });

      lucide.createIcons();
    }

    // Create a schedule row element
    function createScheduleRow(employee, index) {
      const row = document.createElement('div');
      row.className = 'grid grid-cols-8 border-b border-slate-100 hover:bg-slate-50 transition-colors schedule-row';
      row.dataset.employee = employee.Employee;

      const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
      const colorClass = employee.Color || 'slate-500';

      // Employee name cell
      row.innerHTML = `
        <div class="p-4 border-r border-slate-100 flex items-center gap-3">
          <div class="w-8 h-8 rounded-full bg-${colorClass} flex items-center justify-center text-white font-bold text-sm">${employee.Initials}</div>
          <div>
            <p class="font-semibold text-slate-900 text-sm">${employee.Employee}</p>
            <p class="text-xs text-slate-500">${employee.HoursPerWeek}.00 Hrs/week</p>
          </div>
        </div>
      `;

      // Day cells
      days.forEach(day => {
        const cellDiv = document.createElement('div');
        cellDiv.className = 'p-2 border-r border-slate-100 flex items-center justify-center schedule-cell';
        cellDiv.dataset.day = day;
        cellDiv.dataset.employee = employee.Employee;

        const shiftValue = employee[day] || '';
        const isOff = shiftValue === 'OFF';
        const isOnCall = shiftValue.includes('ON-CALL');
        const isMANAGER = shiftValue.includes('MANAGER');

        let cellContent;
        if (isOff) {
          cellContent = `<div class="bg-slate-100 text-slate-400 px-3 py-2 rounded text-xs font-semibold text-center w-full editable-shift" contenteditable="true">${shiftValue}</div>`;
        } else if (isOnCall) {
          cellContent = `<div class="bg-slate-100 text-slate-600 px-3 py-2 rounded text-xs font-semibold text-center w-full border border-slate-200 editable-shift" contenteditable="true">
            <div class="font-bold">ON-CALL</div>
            <div class="text-[10px] opacity-70 mt-1">BACKUP</div>
          </div>`;
        } else if (isMANAGER) {
          cellContent = `<div class="bg-purple-500 text-white px-3 py-2 rounded text-xs font-semibold text-center w-full editable-shift" contenteditable="true">
            <div class="font-bold">MANAGER</div>
            <div class="text-[10px] opacity-90 mt-1">STRATEGY</div>
          </div>`;
        } else {
          cellContent = `<div class="bg-${colorClass} text-white px-3 py-2 rounded text-xs font-semibold text-center w-full editable-shift" contenteditable="true">
            <div class="font-bold">${shiftValue}</div>
            <div class="text-[10px] opacity-90 mt-1">${employee.Role}</div>
          </div>`;
        }

        cellDiv.innerHTML = cellContent;
        row.appendChild(cellDiv);
      });

      // Remove last day Sunday's border
      row.lastChild.classList.remove('border-r');

      return row;
    }

    // Save schedule changes to Google Sheets
    function saveScheduleChange(employeeName, day, value) {
      if (!GAS_MODE) {
        console.log('Standalone mode - change not persisted:', employeeName, day, value);
        return;
      }

      google.script.run
        .withSuccessHandler(onScheduleSaved)
        .withFailureHandler(onScheduleError)
        .updateScheduleCell(employeeName, day, value);
    }

    // Callback when schedule is saved
    function onScheduleSaved(response) {
      if (response.error) {
        console.error('Error saving schedule:', response.error);
        alert('Error saving schedule: ' + response.error);
        return;
      }

      console.log('Schedule saved successfully');
      // Optionally show a brief success indicator
    }

    // Set up edit listeners for schedule cells
    function initScheduleEditing() {
      document.addEventListener('blur', function(e) {
        if (e.target.classList.contains('editable-shift')) {
          const cell = e.target.closest('.schedule-cell');
          if (!cell) return;

          const employeeName = cell.dataset.employee;
          const day = cell.dataset.day;
          const newValue = e.target.textContent.trim();

          saveScheduleChange(employeeName, day, newValue);
        }
      }, true);

      // Also save on Enter key
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' && e.target.classList.contains('editable-shift')) {
          e.preventDefault();
          e.target.blur();
        }
      });
    }

    // Load data when view changes to schedule
    function onViewChange(viewId) {
      if (viewId === 'schedule') {
        loadScheduleData();
      }
    }

    function calculateRetention() {
      const amount = parseFloat(document.getElementById('orderAmount').value) || 0;
      const existingDiscount = parseFloat(document.getElementById('existingDiscount').value) || 0;
      const resultsDiv = document.getElementById('results');

      if (amount <= 0) {
        resultsDiv.classList.add('hidden');
        return;
      }

      let refundPercent, creditAmount, nextOrderDiscount;

      if (amount < 100) {
        refundPercent = 20; creditAmount = 35; nextOrderDiscount = 30;
      } else if (amount >= 100 && amount < 150) {
        refundPercent = 25; creditAmount = 50; nextOrderDiscount = 30;
      } else {
        refundPercent = 30; creditAmount = 60; nextOrderDiscount = 30;
      }

      const maxAdditional = Math.max(0, 20 - existingDiscount);
      const adjustedDiscount = Math.min(nextOrderDiscount, maxAdditional + 10);
      const refundVal = (amount * refundPercent / 100).toFixed(2);
      const netVal = (amount - refundVal).toFixed(2);

      document.getElementById('refundAmount').textContent = `$${refundVal}`;
      document.getElementById('refundDiscount').textContent = `${adjustedDiscount}%`;
      document.getElementById('refundNetAmount').textContent = `$${netVal}`;
      document.getElementById('creditAmount').textContent = `$${creditAmount}`;
      document.getElementById('creditDiscount').textContent = `${adjustedDiscount}%`;
      document.getElementById('creditTotalValue').textContent = `$${creditAmount} + ${adjustedDiscount}% Off`;

      document.getElementById('scriptTemplate').innerHTML = `Hi Customer, I understand you'd like to cancel. We'd love to keep you with us! <br><br><strong>Option A:</strong> A refund of $${refundVal} plus a ${adjustedDiscount}% code.<br><strong>Option B:</strong> $${creditAmount} in store credit plus a ${adjustedDiscount}% code.<br><br>Which do you prefer?`;

      resultsDiv.classList.remove('hidden');
      lucide.createIcons();
    }

    function setView(viewId) {
      document.querySelectorAll('.nav-item').forEach(btn => btn.classList.remove('nav-active'));
      document.getElementById('btn-' + viewId).classList.add('nav-active');
      document.querySelectorAll('.view-content').forEach(view => view.classList.add('hidden'));
      document.getElementById('view-' + viewId).classList.remove('hidden');
      window.scrollTo(0,0);

      // Trigger view change callback
      onViewChange(viewId);
    }

    function scrollToSection(id) {
        document.getElementById(id).scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    function copyTemplate(el) {
        const text = el.querySelector('p:last-child').innerText;
        navigator.clipboard.writeText(text);
        const hint = el.querySelector('.copy-hint');
        hint.innerText = 'COPIED!';
        hint.classList.add('text-emerald-500');
        setTimeout(() => {
            hint.innerText = 'CLICK TO COPY';
            hint.classList.remove('text-emerald-500');
        }, 2000);
    }

    function toggleAddUserModal() {
        const modal = document.getElementById('addUserModal');
        modal.classList.toggle('hidden');
        if (!modal.classList.contains('hidden')) {
            lucide.createIcons();
        }
    }

    function toggleEditUserModal() {
        const modal = document.getElementById('editUserModal');
        modal.classList.toggle('hidden');
        if (!modal.classList.contains('hidden')) {
            lucide.createIcons();
        }
    }

    function openEditUser(fullName, email, role) {
        document.getElementById('editFullName').value = fullName;
        document.getElementById('editEmail').value = email;
        document.getElementById('editUsername').value = email.split('@')[0];
        document.getElementById('editRole').value = role;
        toggleEditUserModal();
    }

    function toggleNavSection(sectionId) {
        const section = document.getElementById('nav-' + sectionId);
        const chevron = document.getElementById('chevron-' + sectionId);

        if (section.classList.contains('hidden')) {
            section.classList.remove('hidden');
            chevron.style.transform = 'rotate(0deg)';
        } else {
            section.classList.add('hidden');
            chevron.style.transform = 'rotate(-90deg)';
        }

        lucide.createIcons();
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize schedule editing functionality
        initScheduleEditing();

        // Initialize icons
        lucide.createIcons();
    });

    lucide.createIcons();

    // ===== AUDIT FORM FUNCTIONS =====
    function initAuditForm() {
      document.querySelectorAll('.rating-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          this.parentElement.querySelectorAll('.rating-btn').forEach(b => b.classList.remove('selected'));
          this.classList.add('selected');
          updateAuditScore();
        });
      });
      document.querySelectorAll('.compliance-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          this.parentElement.querySelectorAll('.compliance-btn').forEach(b => b.classList.remove('selected'));
          this.classList.add('selected');
        });
      });
    }

    function updateAuditScore() {
      let total = 0;
      document.querySelectorAll('.rating-btn.selected').forEach(btn => {
        total += parseInt(btn.dataset.value);
      });
      document.getElementById('audit-score').textContent = total;
      document.getElementById('audit-percent').textContent = Math.round((total / 70) * 100);
    }

    function resetAuditForm() {
      document.querySelectorAll('.rating-btn, .compliance-btn').forEach(btn => btn.classList.remove('selected'));
      document.querySelectorAll('.audit-comment').forEach(input => input.value = '');
      document.querySelectorAll('#audit-agent, #audit-evaluator, #audit-ticket, #audit-notes').forEach(el => el.value = '');
      document.getElementById('audit-date').value = '';
      document.getElementById('audit-score').textContent = '0';
      document.getElementById('audit-percent').textContent = '0';
    }


async function downloadAuditPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  const agent = document.getElementById('audit-agent').value || 'N/A';
  const evaluator = document.getElementById('audit-evaluator').value || 'N/A';
  const ticket = document.getElementById('audit-ticket').value || 'N/A';
  const date = document.getElementById('audit-date').value || new Date().toLocaleDateString();
  const score = document.getElementById('audit-score').textContent;
  const percent = document.getElementById('audit-percent').textContent;
  const notes = document.getElementById('audit-notes').value || 'None';

  const pageWidth = doc.internal.pageSize.getWidth();
  const pageHeight = doc.internal.pageSize.getHeight();
  const leftMargin = 15;
  
  // Brand Colors
  const wattle = [204, 220, 84];     // #CCDC54
  const outerSpace = [44, 51, 52];   // #2C3334

  // --- ART ACCENTS (TOP RIGHT) ---
  doc.setFillColor(...wattle);
  doc.triangle(pageWidth, 0, pageWidth, 40, pageWidth - 75, 0, 'F'); 
  doc.setFillColor(...outerSpace);
  doc.triangle(pageWidth, 40, pageWidth, 47, pageWidth - 12, 40, 'F'); 

  // --- SCORE BADGE (Integrated with Accent) ---
  doc.setFillColor(...outerSpace);
  doc.roundedRect(pageWidth - 55, 12, 40, 18, 2, 2, 'F');
  doc.setTextColor(255, 255, 255);
  doc.setFontSize(7);
  doc.setFont('helvetica', 'bold');
  doc.text('PERFORMANCE', pageWidth - 35, 18, { align: 'center' });
  doc.setTextColor(...wattle);
  doc.setFontSize(15);
  doc.text(`${percent}%`, pageWidth - 35, 26, { align: 'center' });

  // --- LOGO & TITLE ---
  try {
    const logoUrl = 'https://digitalmindsbpo.com/storage/2021/11/cropped-Digital_Minds_Logo_Original.png';
    // Positioned Top Left
    doc.addImage(logoUrl, 'PNG', leftMargin, 12, 45, 12);
  } catch (e) {
    console.warn("Logo URL could not be reached, skipping image.");
  }

  let y = 35;
  doc.setTextColor(...outerSpace);
  doc.setFont('helvetica', 'bold');
  doc.setFontSize(18);
  doc.text('QUALITY AUDIT REPORT', leftMargin, y);
  
  y += 5;
  doc.setFontSize(8);
  doc.setFont('helvetica', 'normal');
  doc.setTextColor(120);
  doc.text('Digital Minds BPO - Standard Evaluation Form', leftMargin, y);

  // --- INFO BLOCK (Single Row Layout) ---
  y += 12;
  doc.setDrawColor(...wattle);
  doc.setLineWidth(0.5);
  doc.line(leftMargin, y, pageWidth - leftMargin, y);
  
  y += 7;
  doc.setTextColor(...outerSpace);
  doc.setFontSize(7);
  doc.setFont('helvetica', 'bold');
  
  // Clean horizontal labels
  doc.text('AGENT:', leftMargin, y);
  doc.text('TICKET/CALL ID:', leftMargin + 50, y);
  doc.text('EVALUATOR:', leftMargin + 100, y);
  doc.text('DATE:', leftMargin + 155, y);
  
  y += 5;
  doc.setFont('helvetica', 'normal');
  doc.setFontSize(9);
  doc.text(agent, leftMargin, y);
  doc.text(ticket, leftMargin + 50, y);
  doc.text(evaluator, leftMargin + 100, y);
  doc.text(date, leftMargin + 155, y);

  // --- TABLE SECTION ---
  y += 10;
  const colWidths = [110, 20, 50]; // Widths for Criteria, Rating, Comments
  
  // Header
  doc.setFillColor(...outerSpace);
  doc.rect(leftMargin, y, pageWidth - (leftMargin * 2), 8, 'F');
  doc.setTextColor(255, 255, 255);
  doc.setFontSize(8);
  doc.setFont('helvetica', 'bold');
  doc.text('EVALUATION CRITERIA', leftMargin + 3, y + 5.5);
  doc.text('SCORE', leftMargin + colWidths[0] + 3, y + 5.5);
  doc.text('COMMENTS', leftMargin + colWidths[0] + colWidths[1] + 3, y + 5.5);

  y += 8;
  doc.setTextColor(...outerSpace);
  
  const rows = document.querySelectorAll('#audit-form-content tbody tr');
  rows.forEach(row => {
    const cells = row.querySelectorAll('td');
    
    // Check if it's a Section Header (1 cell) or Criteria Row (3 cells)
    if (cells.length === 1) {
      doc.setFillColor(245, 248, 240); // Soft Wattle-tinted gray
      doc.rect(leftMargin, y, pageWidth - (leftMargin * 2), 6, 'F');
      doc.setFontSize(7);
      doc.setFont('helvetica', 'bold');
      doc.text(cells[0].textContent.trim().toUpperCase(), leftMargin + 3, y + 4.5);
      y += 6;
    } else if (cells.length === 3) {
      doc.setFont('helvetica', 'normal');
      doc.setFontSize(7.5);
      
      const criteria = cells[0].textContent.trim();
      const selectedRating = row.querySelector('.selected');
      const rating = selectedRating ? selectedRating.textContent : '-';
      const comment = cells[2].querySelector('input').value || '';

      const criteriaLines = doc.splitTextToSize(criteria, 105);
      const commentLines = doc.splitTextToSize(comment, 45);
      const rowHeight = Math.max(criteriaLines.length * 4, commentLines.length * 4, 7);

      doc.text(criteriaLines, leftMargin + 3, y + 4);
      doc.setFont('helvetica', 'bold');
      doc.text(rating, leftMargin + colWidths[0] + 3, y + 4);
      doc.setFont('helvetica', 'normal');
      doc.setFontSize(7);
      doc.text(commentLines, leftMargin + colWidths[0] + colWidths[1] + 3, y + 4);
      
      doc.setDrawColor(240);
      doc.setLineWidth(0.1);
      doc.line(leftMargin, y + rowHeight, pageWidth - leftMargin, y + rowHeight);
      y += rowHeight + 1;
    }
  });

  // --- NOTES SECTION ---
  y += 5;
  if (y < 275) { 
    doc.setFontSize(8);
    doc.setFont('helvetica', 'bold');
    doc.text('EVALUATOR SUMMARY:', leftMargin, y);
    y += 4;
    doc.setFont('helvetica', 'normal');
    doc.setFontSize(7);
    const splitNotes = doc.splitTextToSize(notes, pageWidth - (leftMargin * 2));
    doc.text(splitNotes, leftMargin, y);
  }

  // --- BOTTOM ART ACCENT ---
  doc.setFillColor(...wattle);
  doc.triangle(0, pageHeight, 0, pageHeight - 25, 55, pageHeight, 'F');
  doc.setFillColor(...outerSpace);
  doc.triangle(0, pageHeight - 25, 0, pageHeight - 31, 12, pageHeight - 25, 'F');

  doc.save(`Quality_Audit_${agent.replace(/\s+/g, '_')}.pdf`);
}

    
    document.addEventListener('DOMContentLoaded', initAuditForm);

  </script>


<script>
  function renderWeekHeader() {
    const today = new Date(); // uses the user's current date automatically

    const dayNames = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];

    // Find Monday of current week
    const monday = new Date(today);
    const diff = monday.getDay() === 0 ? -6 : 1 - monday.getDay();
    monday.setDate(monday.getDate() + diff);

    document.querySelectorAll('#week-header [data-day]').forEach((cell, index) => {
      const date = new Date(monday);
      date.setDate(monday.getDate() + index);

      const isToday = date.toDateString() === today.toDateString();

      // Add blue highlight for today
      cell.className = 'p-4 text-center border-r border-slate-200';
      if (isToday) cell.classList.add('bg-blue-50');

      cell.innerHTML = `
        <p class="text-xs font-semibold ${isToday ? 'text-blue-600' : 'text-slate-500'} uppercase tracking-wide">
          ${isToday ? 'TODAY' : dayNames[date.getDay()].toUpperCase()}
        </p>
        <p class="text-2xl font-bold ${isToday ? 'text-blue-600' : 'text-slate-900'} mt-1">
          ${date.getDate()}
        </p>
      `;
    });
  }

  document.addEventListener('DOMContentLoaded', renderWeekHeader);
</script>



</body>
</html>